(window.webpackJsonp=window.webpackJsonp||[]).push([["Dqsp"],{Dqsp:function(e,t,a){"use strict";a.r(t);var l=a("QbLZ"),s=a.n(l),i=a("rY9o"),n=a("L2JU"),r=a("7Qib"),c=a("Yfch"),o=a("X4fA"),p=a("6Uqi"),u=a("YZgg"),d=a("CAjm"),y=a("vFqi"),h=a("caUn"),m=a("uBmh"),g=a("4Yho"),b={name:"payDetailsCopy",components:{PageTable:p.a,tranDialog:g.a,filterBox:u.a,typeBox:d.a,agentBoxCopy:y.a,timeBox:h.a,statusBox:m.a},data:function(){return{tranVisible:!1,orderType:1,productAgentidArr:[],cur_page:1,checked:!0,AccountTipList:null,filterVisible:!1,listQuery:{businessType:0,endDate:"",orderType:[],pageSize:10,payOrderID:"",productAgentid:"",productid:"",pageNum:1,startDate:"",status:1,userID:"",payType:2,userName:"",isAgent:0,couponId:"",proName:"",cityName:"",compare:0,money:"",mobile:"",cardNum:"",sn:"",flag:2,agentFindType:3,isRefund:0,preAllServiceFee:"",rate:""},posData:{list:[],pageNum:1,pageSize:10,total:0,loading:!1},detalForm:{payOrderID:"",count:1},listLoading:!1,multipleSelection:[],listQuery2:{},startDate:new Date((new Date).setDate((new Date).getDate()-7)),endDate:new Date,payOrderID:"",table_list:[{type:"click",label:"商户名称",width:"110px",name:"userName",checked:!0},{type:"tel",label:"手机号",name:"mobile",checked:!0},{label:"小微商户号",name:"merId",width:"180px",checked:!1},{label:"所属代理商名称",name:"agentName",width:"100px",checked:!0},{label:"一级代理商名称",name:"topAgentName",width:"100px",checked:!0},{type:"date",label:"订单时间",name:"insertDate",checked:!0,fixed:"right"},{label:"清算日",name:"jYSettleDate",width:"100px",checked:!0},{type:"click",label:"订单号",width:"180px",name:"payOrderID",checked:!0},{label:"参考号",width:"180px",name:"unionPayOrderid",checked:!1},{label:"结算类型",width:"130px",name:"orderTypeTxt",checked:!0},{type:"bank",label:"银行卡号",name:"cardNum",checked:!0},{label:"卡类型",width:"100px",name:"bankCardType",checked:!1},{type:"statusColor",label:"交易状态",width:"100px",name:"status",checked:!0},{type:"popover",label:"交易信息",name:"bankResult",width:"150px",checked:!0},{type:"recordMoney",label:"订单金额(元)",width:"140px",name:"money",checked:!0,fixed:"right"},{type:"money",label:"应收服务费(元)",width:"140px",name:"preAllServiceFee",checked:!1},{type:"money",label:"优惠金额(元)",width:"140px",name:"couponMoney",checked:!1},{type:"money",label:"实收服务费(元)",width:"140px",name:"allServiceFee",checked:!0},{type:"money",label:"实际到账(元)",width:"140px",name:"trueMoney",checked:!1},{type:"date",label:"交易完成时间",name:"paymentDate",checked:!1}]}},computed:s()({},Object(n.b)(["agentList","settlement_copy","productInfo"])),mounted:function(){var e=this;this.$nextTick(function(){e.pageLoad()})},methods:{pageLoad:function(){""!=this.listQuery.productAgentid&&this.sizeChange(10)},currentChange:function(e){this.select_query(e)},sizeChange:function(e){""!=this.listQuery.productAgentid?(this.listQuery2=this.copy_obj(this.listQuery),this.select_query(1,e)):this.$message.warning("请选择代理商")},select_query:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,l=JSON.parse(Object(o.b)());this.listQuery2.productid=l.id,this.listQuery2.startDate=Object(r.g)(this.startDate)+" 00:00:00",this.listQuery2.endDate=Object(r.g)(this.endDate)+" 23:59:59",this.listQuery2.pageNum=t||this.posData.pageNum,this.listQuery2.pageSize=a||this.posData.pageSize,this.posData.loading=!0,""!=this.listQuery.preAllServiceFee&&(this.listQuery2.preAllServiceFee=Object(c.w)(this.listQuery.preAllServiceFee)),""!=this.listQuery.money&&(this.listQuery2.money=Object(c.w)(this.listQuery.money)),this.$store.dispatch("reqUrl_SysData",{reqName:i.sd,dataName:"settlement_copy",data:this.listQuery2}).then(function(t){e.posData.list=t.data.payDetail,e.posData.total=t.total,e.posData.loading=!1,e.posData.pageNum=e.listQuery2.pageNum,e.posData.pageSize=e.listQuery2.pageSize}).catch(function(t){e.posData.loading=!1})},handleSelectionChange:function(e){this.multipleSelection=e},closeDialog:function(e){this.tranVisible=e},selectOrderType:function(e){this.listQuery.orderType=e},selectStatusType:function(e){this.listQuery.status=e},handleDetail:function(e,t,a){"userName"==a.name&&this.pushPage("customerManage/info",{cId:t.userId,name:t.userName}),"payOrderID"==a.name&&(this.detalForm.payOrderID=t.id,this.orderType=t.orderType,this.tranVisible=!0),"money"==a.name&&this.pushPage("agentManage/achievement",{orderId:t.transactionNo,startDate:t.jYSettleDate,endDate:t.jYSettleDate,timeValue:1})},selectUserId:function(e){this.listQuery.userID=e},updateFlag:function(e,t,a){this.listQuery.flag=e,this.startDate=t,this.endDate=a,1==e&&(this.listQuery.status=1)},selectAgentFun:function(e,t,a){this.listQuery.productAgentid=e,this.listQuery.agentFindType=t,1===a&&this.pageLoad()},btnClickHandle:function(e){switch(e){case"export":this.getCheckData("结算明细分润",this.multipleSelection,this.table_list)}}}},v=a("KHd+"),D=Object(v.a)(b,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"table"},[a("div",{staticClass:"container"},[a("nav",[a("el-row",[a("agentBoxCopy",{attrs:{listQuery:e.listQuery},on:{selectAgentFun:e.selectAgentFun}}),e._v(" "),a("filterBox",{attrs:{listQuery:e.listQuery},on:{selectUserId:e.selectUserId}}),e._v(" "),a("el-input",{staticClass:"nav-input font-w-6",attrs:{placeholder:"请输入订单号",clearable:!0},model:{value:e.listQuery.payOrderID,callback:function(t){e.$set(e.listQuery,"payOrderID","string"==typeof t?t.trim():t)},expression:"listQuery.payOrderID"}},[a("template",{slot:"prepend"},[e._v("订单号")])],2),e._v(" "),a("el-input",{staticClass:"nav-input font-w-4",attrs:{clearable:!0,placeholder:"请输入银行卡号"},model:{value:e.listQuery.cardNum,callback:function(t){e.$set(e.listQuery,"cardNum","string"==typeof t?t.trim():t)},expression:"listQuery.cardNum"}},[a("template",{slot:"prepend"},[e._v("银行卡号")])],2),e._v(" "),a("el-input",{staticClass:"nav-input font-w-5",attrs:{clearable:!0,placeholder:"请输入服务费"},model:{value:e.listQuery.preAllServiceFee,callback:function(t){e.$set(e.listQuery,"preAllServiceFee","string"==typeof t?t.trim():t)},expression:"listQuery.preAllServiceFee"}},[a("template",{slot:"prepend"},[e._v("应收服务费")])],2),e._v(" "),a("div",{staticClass:"nav-select"},[a("div",{staticClass:"nav-select-title"},[e._v("交易状态")]),e._v(" "),a("el-select",{staticClass:"handle-select select-w-4",attrs:{placeholder:"全部",disabled:1==e.listQuery.flag},model:{value:e.listQuery.status,callback:function(t){e.$set(e.listQuery,"status",t)},expression:"listQuery.status"}},[a("el-option",{key:"-1",attrs:{label:"全部",value:-1}}),e._v(" "),a("el-option",{key:"1",attrs:{label:"成功",value:1}}),e._v(" "),a("el-option",{key:"0",attrs:{label:"处理中",value:0}}),e._v(" "),a("el-option",{key:"2",attrs:{label:"失败",value:2}})],1)],1),e._v(" "),a("div",{staticClass:"nav-select select-input-style"},[a("el-input",{staticClass:"nav-input font-w-4",staticStyle:{"margin-top":"0px"},attrs:{placeholder:"请输入金额",clearable:!0},model:{value:e.listQuery.money,callback:function(t){e.$set(e.listQuery,"money",t)},expression:"listQuery.money"}},[a("el-select",{staticClass:"handle-select select-w-4 big-small",staticStyle:{"padding-left":"10px","margin-top":"-6px"},attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.listQuery.compare,callback:function(t){e.$set(e.listQuery,"compare",t)},expression:"listQuery.compare"}},[a("el-option",{key:"0",attrs:{label:"金额等于",value:0}}),e._v(" "),a("el-option",{key:"1",attrs:{label:"金额小于",value:1}}),e._v(" "),a("el-option",{key:"2",attrs:{label:"金额大于",value:2}})],1)],1)],1),e._v(" "),a("typeBox",{attrs:{tranType:-1,payType:0},on:{selectOrderType:e.selectOrderType}}),e._v(" "),a("timeBox",{attrs:{page:"payDetailsCopy"},on:{updateFlag:e.updateFlag}}),e._v(" "),a("el-button",{staticClass:"search margin-t-20",attrs:{type:"primary",icon:"search"},on:{click:function(t){e.sizeChange(10)}}},[e._v("查询")])],1)],1),e._v(" "),a("div",{staticClass:"tip clearfix"},[a("div",{staticClass:"fl margin-r-30"},[e._v("\n          汇总笔数：\n          "),a("span",{staticClass:"color-blue"},[e._v("\n            "+e._s(e.settlement_copy.list&&e.settlement_copy.list.count)+" ")]),e._v("笔\n        ")]),e._v(" "),a("div",{staticClass:"fl margin-r-30"},[e._v("\n          订单金额：\n          "),a("span",{staticClass:"color-blue"},[e._v("\n            "+e._s(e._f("formatToYuan")(e.settlement_copy.list&&e.settlement_copy.list.money))+" ")]),e._v("元\n        ")])]),e._v(" "),a("PageTable",{attrs:{listWidth:!0,showSummary:!0,tableList:e.table_list,tableData:e.posData,indexID:!0,noIndex:!0},on:{handleSelectionChange:e.handleSelectionChange,clickData:e.handleDetail,sizeChange:e.sizeChange,currentChange:e.currentChange,btnClickHandle:e.btnClickHandle}})],1)]),e._v(" "),a("tranDialog",{attrs:{tranVisible:e.tranVisible,orderType:e.orderType,orderId:e.detalForm.payOrderID,splitfee:e.detalForm.count},on:{closeDialog:e.closeDialog}})],1)},[],!1,null,null,null);D.options.__file="payDetailsCopy.vue";t.default=D.exports}}]);