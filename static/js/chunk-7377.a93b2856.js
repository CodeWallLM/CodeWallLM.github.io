(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7377"],{"RU/L":function(e,t,a){a("Rqdy");var i=a("WEpk").Object;e.exports=function(e,t,a){return i.defineProperty(e,t,a)}},Rqdy:function(e,t,a){var i=a("Y7ZC");i(i.S+i.F*!a("jmDH"),"Object",{defineProperty:a("2faE").f})},SEkw:function(e,t,a){e.exports={default:a("RU/L"),__esModule:!0}},YEIV:function(e,t,a){"use strict";t.__esModule=!0;var i=function(e){return e&&e.__esModule?e:{default:e}}(a("SEkw"));t.default=function(e,t,a){return t in e?(0,i.default)(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},"i/Hq":function(e,t,a){"use strict";var i=a("uDdB");a.n(i).a},seEE:function(e,t,a){"use strict";a.r(t);var i=a("YEIV"),n=a.n(i),s=a("14Xm"),l=a.n(s),r=a("D3Ub"),u=a.n(r),c=a("QbLZ"),o=a.n(c),d=a("L2JU"),p=a("rY9o"),h=a("X4fA"),b={name:"terminalFlow",components:{PageTable:a("6Uqi").a},data:function(){var e=this;return{pickerBeginDateBefore:{disabledDate:function(t){return!!e.listQuery.endDate&&(t.getTime()>new Date(e.listQuery.endDate).getTime()||t.getTime()>(new Date).getTime())}},pickerBeginDateAfter:{disabledDate:function(t){return!!e.listQuery.startDate&&(t.getTime()<new Date(e.listQuery.startDate).getTime()||t.getTime()>(new Date).getTime())}},tableList:[{label:"终端序列号",name:"sn",width:"150px",type:"terminal_flow_sn",checked:!0},{label:"厂商名称",name:"producerName",width:"100px",checked:!0},{label:"终端类型",name:"type",width:"100px",type:"stateMuch",stateMuch:this.typeObjList,checked:!0},{label:"终端型号",name:"sysPosProducerName",width:"100px",checked:!0},{label:"状态",name:"bindingType",width:"80px",type:"stateMuch",stateMuch:{1:"入库",2:"下拨",3:"绑定",4:"下线"},checked:!0},{label:"操作人",name:"userName",width:"100px",checked:!0},{label:"操作时间",name:"insertDate",width:"150px",checked:!0},{label:"说明",name:"content",width:"270px",checked:!0}],tableData:{list:[],loading:!1,pageNum:1,pageSize:10,total:0},selectedData:[],currentButton:[],filterVisible:!1,userType:null,userList:[],bindingTypeList:[],vendorList:[],typeList:[],snList:[],typeObjList:{},snListVisible:!1,listQuery:{bindingType:0,dbGuId:"",endDate:"",pageNum:1,pageSize:10,startDate:""},vendorQuery:{producerName:"",producerNameForShort:"",productId:"",skip:1,take:100},modalQuery:{pageNum:1,pageSize:10,producer_id:"",productId:"",type:0}}},computed:o()({},Object(d.b)(["productInfo"])),watch:{productInfo:function(e,t){e.id!=t.id&&t.id&&(this.listQuery.pageNum=1,this.tableData.pageNum=1,this.mountedInit())}},mounted:function(){this.mountedInit()},methods:n()({mountedInit:function(){this.userType=Object(h.f)(),this.setProductID(),this.setSearchDate(),this.getPageData(),this.getTypeList()},setProductID:function(){var e=JSON.parse(Object(h.b)());this.vendorQuery.productId=e.id,this.modalQuery.productId=e.id},setSearchDate:function(){var e=new Date,t=new Date,a=e.getFullYear()-3,i=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0"),s=t.getFullYear(),l=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");this.listQuery.startDate=a+"-"+i+"-"+n+" 00:00:00",this.listQuery.endDate=s+"-"+l+"-"+r+" 23:59:59"},getPageData:function(){var e=this;return u()(l.a.mark(function t(){var a;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=null,e.tableData.loading=!0,t.next=4,Object(p.te)(e.vendorQuery);case 4:return a=t.sent,e.vendorList=a.rows,t.next=8,Object(p.Jc)();case 8:return a=t.sent,e.bindingTypeList=a.rows,"3"===e.userType&&delete e.bindingTypeList[0],t.next=13,Object(p.L)(e.listQuery);case 13:a=t.sent,e.tableData.list=a.rows,e.tableData.total=a.total,e.tableData.loading=!1;case 17:case"end":return t.stop()}},t,e)}))()},getListData:function(){var e=this;this.tableData.loading=!0,Object(p.L)(this.listQuery).then(function(t){e.tableData.list=t.rows,e.tableData.total=t.total,e.tableData.loading=!1}).catch(function(){return e.tableData.loading=!1})},getVendorList:function(){var e=this;Object(p.te)(this.vendorQuery).then(function(t){return e.vendorList=t.rows})},getTypeList:function(){var e=this;Object(p.y)().then(function(t){return e.typeList=t.rows})},searchData:function(){this.listQuery.pageNum=1,this.listQuery.pageSize=10,this.tableData.pageNum=1,this.tableData.pageSize=10,this.listQuery.startDate+=this.listQuery.startDate.indexOf("00:00:00")>-1?"":" 00:00:00",this.listQuery.endDate+=this.listQuery.endDate.indexOf("23:59:59")>-1?"":" 23:59:59",this.getListData()},handleSelectionChange:function(e){this.selectedData=e},handleSizeChange:function(e){this.listQuery.pageNum=1,this.listQuery.pageSize=e,this.tableData.pageNum=1,this.tableData.pageSize=e,this.getListData()},handleCurrentChange:function(e){this.listQuery.pageNum=e,this.tableData.pageNum=e,this.getListData()},terminalFlowSnCellClickHandler:function(e){var t=this;this.snListVisible=!0,this.snList=[],e.sns.forEach(function(e){var a={name:e};t.snList.push(a)})}},"getTypeList",function(){var e=this;Object(p.y)().then(function(t){e.typeList=t.rows,t.rows.map(function(t){e.$set(e.typeObjList,t.type,t.name)}),e.tableList.map(function(t){"终端类型"==t.label&&(t.stateMuch=e.typeObjList)})})})},y=(a("i/Hq"),a("KHd+")),g=Object(y.a)(b,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("nav",[a("el-row",[a("div",{staticClass:"nav-select"},[a("div",{staticClass:"nav-select-title"},[e._v("终端厂商")]),e._v(" "),a("el-select",{staticClass:"handle-select select-w-3",attrs:{placeholder:"请选择"},model:{value:e.listQuery.dbGuId,callback:function(t){e.$set(e.listQuery,"dbGuId",t)},expression:"listQuery.dbGuId"}},[a("el-option",{key:-1,attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.vendorList,function(e,t){return a("el-option",{key:t,attrs:{value:e.id,label:e.producerName}})})],2)],1),e._v(" "),a("div",{staticClass:"nav-select"},[a("div",{staticClass:"nav-select-title"},[e._v("终端状态")]),e._v(" "),a("el-select",{staticClass:"handle-select select-w-3",attrs:{placeholder:"请选择"},model:{value:e.listQuery.bindingType,callback:function(t){e.$set(e.listQuery,"bindingType",t)},expression:"listQuery.bindingType"}},[a("el-option",{attrs:{label:"全部",value:0}}),e._v(" "),e._l(e.bindingTypeList,function(e,t){return a("el-option",{key:t,attrs:{label:e.bindingTypeName,value:e.bindingType}})})],2)],1),e._v(" "),a("div",{staticClass:"nav-select"},[a("div",{staticClass:"nav-select-title mt1"},[e._v("操作时间")]),e._v(" "),a("el-date-picker",{attrs:{editable:!1,type:"date","value-format":"yyyy-MM-dd",placeholder:"开始时间","picker-options":e.pickerBeginDateBefore},model:{value:e.listQuery.startDate,callback:function(t){e.$set(e.listQuery,"startDate",t)},expression:"listQuery.startDate"}}),e._v(" -\n        "),a("el-date-picker",{attrs:{editable:!1,type:"date","value-format":"yyyy-MM-dd",placeholder:"结束时间","picker-options":e.pickerBeginDateAfter},model:{value:e.listQuery.endDate,callback:function(t){e.$set(e.listQuery,"endDate",t)},expression:"listQuery.endDate"}})],1),e._v(" "),a("el-button",{staticClass:"search margin-t-20",attrs:{type:"primary"},on:{click:e.searchData}},[e._v("查询")])],1)],1),e._v(" "),a("PageTable",{attrs:{tableList:e.tableList,tableData:e.tableData,currentButton:e.currentButton},on:{handleSelectionChange:e.handleSelectionChange,sizeChange:e.handleSizeChange,currentChange:e.handleCurrentChange,terminalFlowSnCellClick:e.terminalFlowSnCellClickHandler}}),e._v(" "),a("el-dialog",{attrs:{"close-on-click-modal":!1,"append-to-body":!0,title:"同批次终端",visible:e.snListVisible,width:"270px"},on:{"update:visible":function(t){e.snListVisible=t}}},[a("el-table",{attrs:{data:e.snList,"show-header":!1}},[a("el-table-column",{attrs:{prop:"name"}})],1)],1)],1)},[],!1,null,"c643724e",null);g.options.__file="terminalFlow.vue";t.default=g.exports},uDdB:function(e,t,a){var i=a("x23e");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a("SZ7m").default)("ec017a16",i,!0,{})},x23e:function(e,t,a){(e.exports=a("I1BE")(!1)).push([e.i,"\n.no-m-b[data-v-c643724e] {\r\n  margin-bottom: 0;\n}\n.custom-err[data-v-c643724e] {\r\n  font-size: 12px;\r\n  height: 16px;\r\n  line-height: 16px;\n}\r\n",""])}}]);