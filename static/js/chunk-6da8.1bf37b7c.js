(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-6da8"],{"0oUx":function(t,e,n){(t.exports=n("I1BE")(!1)).push([t.i,"\n.no-m-b[data-v-6b0c0710] {\n  margin-bottom: 0;\n}\n.custom-err[data-v-6b0c0710] {\n  font-size: 12px;\n  height: 16px;\n  line-height: 16px;\n}\n.link-btn[data-v-6b0c0710] {\n  display: inline-block;\n  border: 1px solid #42a5f5;\n  background-color: rgba(255, 255, 255, 0);\n  color: #42a5f5;\n  padding: 9px 15px;\n  margin-left: 5px;\n  font-size: 12px;\n  line-height: 1;\n}\n.v-middle[data-v-6b0c0710] {\n  vertical-align: middle;\n}\n",""])},1:function(t,e){},2:function(t,e){},3:function(t,e){},AAUg:function(t,e,n){var a=n("0oUx");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,n("SZ7m").default)("270d5488",a,!0,{})},"F0l/":function(t,e,n){"use strict";n.d(e,"O",function(){return r}),n.d(e,"e",function(){return o}),n.d(e,"n",function(){return l}),n.d(e,"h",function(){return s}),n.d(e,"K",function(){return u}),n.d(e,"E",function(){return d}),n.d(e,"I",function(){return c}),n.d(e,"o",function(){return p}),n.d(e,"B",function(){return m}),n.d(e,"g",function(){return h}),n.d(e,"b",function(){return f}),n.d(e,"V",function(){return b}),n.d(e,"p",function(){return g}),n.d(e,"N",function(){return y}),n.d(e,"kb",function(){return v}),n.d(e,"D",function(){return k}),n.d(e,"c",function(){return D}),n.d(e,"R",function(){return F}),n.d(e,"C",function(){return x}),n.d(e,"S",function(){return _}),n.d(e,"M",function(){return S}),n.d(e,"L",function(){return C}),n.d(e,"y",function(){return O}),n.d(e,"z",function(){return w}),n.d(e,"a",function(){return T}),n.d(e,"k",function(){return j}),n.d(e,"T",function(){return I}),n.d(e,"x",function(){return Q}),n.d(e,"F",function(){return L}),n.d(e,"Q",function(){return N}),n.d(e,"J",function(){return B}),n.d(e,"u",function(){return $}),n.d(e,"f",function(){return A}),n.d(e,"q",function(){return E}),n.d(e,"j",function(){return z}),n.d(e,"t",function(){return P}),n.d(e,"d",function(){return U}),n.d(e,"i",function(){return V}),n.d(e,"m",function(){return G}),n.d(e,"r",function(){return M}),n.d(e,"s",function(){return q}),n.d(e,"G",function(){return Z}),n.d(e,"U",function(){return R}),n.d(e,"l",function(){return H}),n.d(e,"A",function(){return J}),n.d(e,"w",function(){return Y}),n.d(e,"P",function(){return K}),n.d(e,"jb",function(){return W}),n.d(e,"Y",function(){return X}),n.d(e,"db",function(){return tt}),n.d(e,"Z",function(){return et}),n.d(e,"ib",function(){return nt}),n.d(e,"v",function(){return at}),n.d(e,"gb",function(){return it}),n.d(e,"eb",function(){return rt}),n.d(e,"X",function(){return ot}),n.d(e,"W",function(){return lt}),n.d(e,"lb",function(){return st}),n.d(e,"ab",function(){return ut}),n.d(e,"cb",function(){return dt}),n.d(e,"fb",function(){return ct}),n.d(e,"H",function(){return pt}),n.d(e,"hb",function(){return mt}),n.d(e,"bb",function(){return ht});var a=n("t3Un"),i="SysData";function r(t){return Object(a.a)({url:"/api/"+i+"/GetZDBankList",method:"post",data:t})}function o(t){return Object(a.a)({url:"/api/"+i+"/AddZDBank",method:"post",data:t})}function l(t){return Object(a.a)({url:"/api/"+i+"/EditZDBank",method:"post",data:t})}function s(t){return Object(a.a)({url:"/api/"+i+"/DelZDBank",method:"post",data:t})}function u(t){return Object(a.a)({url:"/api/"+i+"/GetSysBusChannel",method:"post",data:t})}function d(t){return Object(a.a)({url:"/api/"+i+"/GetBusChannelList",method:"post",data:t})}function c(t){return Object(a.a)({url:"/api/"+i+"/GetProductZDBusChannel",method:"post",data:t})}function p(t){return Object(a.a)({url:"/api/"+i+"/EditZDBankBusChannel",method:"post",data:t})}function m(t){return Object(a.a)({url:"/api/"+i+"/GetBannerSettingList",method:"post",data:t})}function h(t){return Object(a.a)({url:"/api/"+i+"/DelBannerSetting",method:"post",data:t})}function f(t){return Object(a.a)({url:"/api/"+i+"/AddBannerSetting",method:"post",data:t})}function b(t){return Object(a.a)({url:"/api/"+i+"/UpdateBannerSetting",method:"post",data:t})}function g(t){return Object(a.a)({url:"/api/"+i+"/EditZDBankBusChannelStatus",method:"post",data:t})}function y(t){return Object(a.a)({url:"/api/"+i+"/GetZDBankByID",method:"post",data:t})}function v(t){return Object(a.a)({url:"/api/"+i+"/getZDBusTranType ",method:"post",data:t})}function k(t){return Object(a.a)({url:"/api/"+i+"/GetBlackBankCardList",method:"post",data:t})}function D(t){return Object(a.a)({url:"/api/"+i+"/AddBlackBankCard",method:"post",data:t})}function F(t){return Object(a.a)({url:"/api/"+i+"/SetBlackBankCard",method:"post",data:t})}function x(t){return Object(a.a)({url:"/api/"+i+"/GetBlackBankCardById",method:"post",data:t})}function _(t){return Object(a.a)({url:"/api/"+i+"/SetBlackBankCardStatus",method:"post",data:t})}function S(t){return Object(a.a)({url:"/api/"+i+"/GetSysProvinceList",method:"post",data:t})}function C(t){return Object(a.a)({url:"/api/"+i+"/GetSysCityList",method:"post",data:t})}function O(t){return Object(a.a)({url:"/api/"+i+"/GetAgentSaleTplList",method:"post",data:t})}function w(t){return Object(a.a)({url:"/api/"+i+"/GetAgentSaleTplOne",method:"post",data:t})}function T(t){return Object(a.a)({url:"/api/"+i+"/AddAgentSaleTpl",method:"post",data:t})}function j(t){return Object(a.a)({url:"/api/"+i+"/EditAgentSaleTpl",method:"post",data:t})}function I(t){return Object(a.a)({url:"/api/"+i+"/SetDefaultAgentSaleTpl",method:"post",data:t})}function Q(t){return Object(a.a)({url:"/api/"+i+"/GetAgentSaleTpl",method:"post",data:t})}function L(t){return Object(a.a)({url:"/api/"+i+"/GetCustSaleTpl",method:"post",data:t})}function N(t){return Object(a.a)({url:"/api/"+i+"/SetAgentSaleTplStatus",method:"post",data:t})}function B(t){return Object(a.a)({url:"/api/"+i+"/GetSaleTaskList",method:"post",data:t})}function $(t){return Object(a.a)({url:"/api/"+i+"/FindZDConfig",method:"post",data:t})}function A(t){return Object(a.a)({url:"/api/"+i+"/AddZDConfig",method:"post",data:t})}function E(t){return Object(a.a)({url:"/api/"+i+"/EditZDConfig",method:"post",data:t})}function z(t){return Object(a.a)({url:"/api/"+i+"/DeleteZDConfig",method:"post",data:t})}function P(t){return Object(a.a)({url:"/api/"+i+"/FindUserPayConfig",method:"post",data:t})}function U(t){return Object(a.a)({url:"/api/"+i+"/AddUserPayConfig ",method:"post",data:t})}function V(t){return Object(a.a)({url:"/api/"+i+"/DeleteUserPayConfig",method:"post",data:t})}function G(t){return Object(a.a)({url:"/api/"+i+"/EditUserPayConfig",method:"post",data:t})}function M(){return Object(a.a)({url:"/api/"+i+"/FindAllConfigKey",method:"post"})}function q(t){return Object(a.a)({url:"/api/"+i+"/FindContent",method:"post",data:t})}function Z(t){return Object(a.a)({url:"/api/"+i+"/GetInvitationAward",method:"post",data:t})}function R(t){return Object(a.a)({url:"/api/"+i+"/SetInvitationAward",method:"post",data:t})}function H(t){return Object(a.a)({url:"/api/"+i+"/EditSaleTask",method:"post",data:t})}function J(t){return Object(a.a)({url:"/api/"+i+"/GetAgentUsableSale_Combox",method:"post",data:t})}function Y(t){return Object(a.a)({url:"/api/"+i+"/GetAgentSaleTaskList",method:"post",data:t})}function K(t){return Object(a.a)({url:"/api/"+i+"/SetAgentSaleTask",method:"post",data:t})}function W(t){return Object(a.a)({url:"/api/"+i+"/getPOSCollectionLimit",method:"post",data:t})}function X(t){return Object(a.a)({url:"/api/"+i+"/addPOSCollectionLimit",method:"post",data:t})}function tt(t){return Object(a.a)({url:"/api/"+i+"/editPOSCollectionLimit",method:"post",data:t})}function et(t){return Object(a.a)({url:"/api/"+i+"/deletePOSCollectionLimit",method:"post",data:t})}function nt(t){return Object(a.a)({url:"/api/"+i+"/getPOSCheckAccount",method:"post",data:t})}function at(t){return Object(a.a)({url:"/api/"+i+"/GetAgentSaleAllocate_Combox",method:"post",data:t})}function it(t){return Object(a.a)({url:"/api/"+i+"/getBusinessList",method:"post",data:t})}function rt(t){return Object(a.a)({url:"/api/"+i+"/editjhBusiness",method:"post",data:t})}function ot(t){return Object(a.a)({url:"/api/"+i+"/addOnejhBusiness",method:"post",data:t})}function lt(t){return Object(a.a)({url:"/api/"+i+"/addManyjhBusiness",method:"post",data:t})}function st(t){return Object(a.a)({url:"/api/"+i+"/openjhBusiness",method:"post",data:t})}function ut(t){return Object(a.a)({url:"/api/"+i+"/deljhBusiness",method:"post",data:t})}function dt(t){return Object(a.a)({url:"/api/"+i+"/editJHBusinessShowType",method:"post",data:t})}function ct(t){return Object(a.a)({url:"/api/"+i+"/findDropDown",method:"post",data:t})}function pt(t){return Object(a.a)({url:"/api/"+i+"/GetInviteDataNew",method:"post",data:t})}function mt(t){return Object(a.a)({url:"/api/"+i+"/getCheckAccountSettleList",method:"post",data:t})}function ht(t){return Object(a.a)({url:"/api/"+i+"/editCheckResult",method:"post",data:t})}},N5aa:function(t,e,n){"use strict";var a=n("4d7F"),i=n.n(a),r=n("EUZL"),o=n.n(r),l={props:{beforeUpload:Function,onSuccess:Function},data:function(){return{loading:!1,excelData:{header:null,results:null}}},methods:{generateData:function(t){var e=t.header,n=t.results;this.excelData.header=e,this.excelData.results=n,this.onSuccess&&this.onSuccess(this.excelData)},handleDrop:function(t){if(t.stopPropagation(),t.preventDefault(),!this.loading){var e=t.dataTransfer.files;if(1===e.length){var n=e[0];if(!this.isExcel(n))return this.$message.error("仅支持上传 .xlsx, .xls, .csv 文件"),!1;this.upload(n),t.stopPropagation(),t.preventDefault()}else this.$message.error("只能上传一个文件!")}},handleDragover:function(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"},handleUpload:function(){document.getElementById("excel-upload-input").click()},handleClick:function(t){var e=t.target.files[0];e&&this.upload(e)},upload:function(t){(this.$refs["excel-upload-input"].value=null,this.beforeUpload)?this.beforeUpload(t)&&this.readerData(t):this.readerData(t)},readerData:function(t){var e=this;return this.loading=!0,new i.a(function(n,a){var i=new FileReader;i.onload=function(t){var a=t.target.result,i=e.fixData(a),r=o.a.read(btoa(i),{type:"base64"}),l=r.SheetNames[0],s=r.Sheets[l],u=e.getHeaderRow(s),d=o.a.utils.sheet_to_json(s);e.generateData({header:u,results:d}),e.loading=!1,n()},i.readAsArrayBuffer(t)})},fixData:function(t){for(var e="",n=0,a=10240;n<t.byteLength/a;++n)e+=String.fromCharCode.apply(null,new Uint8Array(t.slice(n*a,n*a+a)));return e+=String.fromCharCode.apply(null,new Uint8Array(t.slice(n*a)))},getHeaderRow:function(t){var e=[],n=o.a.utils.decode_range(t["!ref"]),a=void 0,i=n.s.r;for(a=n.s.c;a<=n.e.c;++a){var r=t[o.a.utils.encode_cell({c:a,r:i})],l="UNKNOWN "+a;r&&r.t&&(l=o.a.utils.format_cell(r)),e.push(l)}return e},isExcel:function(t){return/\.(xlsx|xls|csv)$/.test(t.name)}}},s=(n("SlTs"),n("KHd+")),u=Object(s.a)(l,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("input",{ref:"excel-upload-input",attrs:{id:"excel-upload-input",type:"file",accept:".xlsx, .xls"},on:{change:t.handleClick}}),t._v(" "),n("div",{attrs:{id:"drop"},on:{drop:t.handleDrop,dragover:t.handleDragover,dragenter:t.handleDragover}},[t._v("\n    Drop excel file here or\n    "),n("el-button",{staticStyle:{"margin-left":"16px"},attrs:{loading:t.loading,size:"mini",type:"primary"},on:{click:t.handleUpload}},[t._v("上传文件")])],1)])},[],!1,null,"26075438",null);u.options.__file="index.vue";e.a=u.exports},PkhV:function(t,e,n){(t.exports=n("I1BE")(!1)).push([t.i,"\n#excel-upload-input[data-v-26075438]{\n  display: none;\n  z-index: -9999;\n}\n#drop[data-v-26075438]{\n  border: 2px dashed #bbb;\n  /*width: 300px;*/\n  height: 160px;\n  line-height: 160px;\n  margin: 0 auto;\n  font-size: 24px;\n  border-radius: 5px;\n  text-align: center;\n  color: #bbb;\n  position: relative;\n}\n",""])},"RU/L":function(t,e,n){n("Rqdy");var a=n("WEpk").Object;t.exports=function(t,e,n){return a.defineProperty(t,e,n)}},Rqdy:function(t,e,n){var a=n("Y7ZC");a(a.S+a.F*!n("jmDH"),"Object",{defineProperty:n("2faE").f})},SEkw:function(t,e,n){t.exports={default:n("RU/L"),__esModule:!0}},SlTs:function(t,e,n){"use strict";var a=n("lJhe");n.n(a).a},YEIV:function(t,e,n){"use strict";e.__esModule=!0;var a=function(t){return t&&t.__esModule?t:{default:t}}(n("SEkw"));e.default=function(t,e,n){return e in t?(0,a.default)(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},"gh+F":function(t,e,n){"use strict";n.r(e);var a=n("jWXv"),i=n.n(a),r=n("14Xm"),o=n.n(r),l=n("D3Ub"),s=n.n(l),u=n("YEIV"),d=n.n(u),c=n("QbLZ"),p=n.n(c),m=n("L2JU"),h=n("rY9o"),f=n("F0l/"),b=n("7Qib"),g=n("X4fA"),y=n("6Uqi"),v={name:"cardReaderManage",components:{UploadExcelComponent:n("N5aa").a,PageTable:y.a},data:function(){var t=this;return{pickerBeginDateBefore:{disabledDate:function(e){return!!t.listQuery.endDate&&(e.getTime()>new Date(t.listQuery.endDate).getTime()||e.getTime()>(new Date).getTime())}},pickerBeginDateAfter:{disabledDate:function(e){return!!t.listQuery.startDate&&(e.getTime()<new Date(t.listQuery.startDate).getTime()||e.getTime()>(new Date).getTime())}},tableList:[{label:"序号",name:"keyId",width:"80px",checked:!0},{label:"入库批次号",width:"160px",name:"operationNum",checked:!0},{label:"终端序列号",width:"210px",name:"sn",checked:!0},{label:"激活码",name:"activationCode",width:"120",checked:!0},{label:"厂商名称",width:"100px",name:"producerName",checked:!0},{label:"终端类型",width:"100px",name:"type",type:"stateMuch",stateMuch:this.typeObjList,checked:!0},{label:"终端型号",width:"100px",name:"model",checked:!0},{label:"终端状态",width:"100px",name:"bindingType",type:"stateMuch",stateMuch:{1:"入库",2:"下拨",3:"绑定",4:"下线"},checked:!0},{label:"激活状态",name:"isInit",width:"100px",type:"stateMuch",stateMuch:{1:"已激活",0:"未激活"},checked:!0},{label:"主秘钥类型",width:"100px",name:"posKeyType",checked:!0},{label:"入库人",width:"100px",name:"operator",checked:!0},{label:"入库时间",width:"220px",name:"insertDate",checked:!0},{label:"签到时间",width:"220px",name:"signinTime",type:"date",checked:!0},{label:"MAC地址",width:"250px",name:"macAddress",checked:!1},{label:"iOS标识",width:"160px",name:"iosUID",checked:!1}],tableData:{list:[],loading:!1,pageNum:1,pageSize:10,total:0},typeObjList:{},btnLoading:!1,editFormVisible:!1,clearFormVisible:!1,file:null,selectedData:[],currentButton:[],currentPosExample:reqCfg.posExample,filterVisible:!1,showEmptyFileTips:!1,inputType:1,list:null,bindingTypeList:[],vendorList:[],typeList:[],modelList:[],channelList:[],bindDateName:"入库",listQuery:{allocateBatchnumber:"",bindingType:0,endDate:null,isAll:1,lastId:"",modeID:"",operationNum:"",pageNum:1,pageSize:10,producerID:"",productAgentID:"",productId:"",sn:"",startDate:null,type:0,userID:"",isInit:-1},vendorQuery:{producerName:"",producerNameForShort:"",productId:"",skip:1,take:100},modalQuery:{pageNum:1,pageSize:10,producer_id:"",productId:"",type:0},channelQuery:{busChannelName:"",pageNum:1,pageSize:1,status:1,tranType:4},editForm:{producerId:"",type:null,modelId:"",batchnumber:"",fileName:"",busChannelID:"",snInfo:"",sn:"",mtmk:"",mtmkkvc:"",mkey:"",start:"",end:"",num:"",poskeytype:1},clearForm:{sn:"",flag:3},editRules:{producerId:{required:!0,message:"请选择厂商",trigger:"change"},type:{type:"number",required:!0,min:1,message:"请选择终端类型",trigger:"change"},modelId:{required:!0,message:"请选择终端型号",trigger:"change"},batchnumber:{required:!0,message:"请填写批次号",trigger:"blur"},busChannelID:{required:!0,message:"请选择通道",trigger:"change"},snInfo:{required:!0,validator:this.validatorSN,trigger:"blur"},sn:{required:!0,validator:this.validatorOneSN,trigger:"blur"},mtmk:{required:!0,message:"请填写安付主密钥",trigger:"blur"},mtmkkvc:{required:!0,message:"请填写安付主密钥校验码",trigger:"blur"},mkey:{required:!0,message:"请填写安付传输密钥",trigger:"blur"},num:{required:!0,message:"起始或结束终端号输入错误",trigger:"blur"},start:{required:!0,validator:this.start,trigger:"blur"},end:{required:!0,validator:this.end,trigger:"blur"}},upload:{action:"http://localhost:80",limit:1,multiple:!1,fileList:[]}}},computed:p()({},Object(m.b)(["agentList","productInfo"])),watch:d()({productInfo:function(t,e){t.id!=e.id&&e.id&&(this.listQuery.pageNum=1,this.tableData.pageNum=1,this.mountedInit())}},"listQuery.bindingType",function(t){var e=this;if(0==t||1==t)this.bindDateName="入库";else{var n=this.bindingTypeList.find(function(t){return t.bindingType==e.listQuery.bindingType});this.bindDateName=n.bindingTypeName}this.tableList.map(function(t){"insertDate"==t.name&&(t.label=e.bindDateName+"时间")})}),mounted:function(){this.mountedInit()},methods:{mountedInit:function(){this.setProductID(),this.setProductAgentID(),this.setQueryDate(),this.getPageData(),this.getTypeList()},setProductID:function(){var t=JSON.parse(Object(g.b)());this.vendorQuery.productId=t.id,this.modalQuery.productId=t.id,this.listQuery.productId=t.id},setProductAgentID:function(){var t=Object(g.e)();if(t){var e=JSON.parse(t);this.listQuery.productAgentID=1!==e.userType?e.productAgentid:""}},setQueryDate:function(){var t=new Date,e=new Date,n=t.getFullYear()-3,a=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0"),r=e.getFullYear(),o=String(e.getMonth()+1).padStart(2,"0"),l=String(e.getDate()).padStart(2,"0");this.listQuery.startDate=n+"-"+a+"-"+i+" 00:00:00",this.listQuery.endDate=r+"-"+o+"-"+l+" 23:59:59"},getPageData:function(){var t=this;return s()(o.a.mark(function e(){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,t.tableData.loading=!0,e.next=4,Object(b.e)();case 4:return n=e.sent,t.currentButton=n,e.next=8,Object(h.te)(t.vendorQuery);case 8:return n=e.sent,t.vendorList=n.rows,e.next=12,Object(h.Jc)();case 12:return n=e.sent,t.bindingTypeList=n.rows,t.modalQuery.pageSize=1,e.next=17,Object(h.Ud)(t.modalQuery);case 17:return n=e.sent,t.modalQuery.pageSize=n.total,e.next=21,Object(h.Ud)(t.modalQuery);case 21:return n=e.sent,t.modelList=n.rows,e.next=25,Object(h.zd)(t.listQuery);case 25:n=e.sent,t.tableData.list=n.rows,t.tableData.total=n.total,t.tableData.loading=!1;case 29:case"end":return e.stop()}},e,t)}))()},getTerminalListData:function(){var t=this;this.tableData.loading=!0,Object(h.zd)(this.listQuery).then(function(e){t.tableData.list=e.rows,t.tableData.total=e.total,t.tableData.loading=!1}).catch(function(){return t.tableData.loading=!1})},getVendorList:function(){var t=this;Object(h.te)(this.vendorQuery).then(function(e){return t.vendorList=response.rows})},getTypeList:function(){var t=this;Object(h.y)().then(function(e){t.typeList=e.rows,e.rows.map(function(e){t.$set(t.typeObjList,e.type,e.name)}),t.tableList.map(function(e){"终端类型"==e.label&&(e.stateMuch=t.typeObjList)})})},getTerminalType:function(){var t=this;this.modalQuery.pageSize=1,Object(h.Ud)(this.modalQuery).then(function(e){t.modalQuery.pageSize=e.total,Object(h.Ud)(t.modalQuery).then(function(e){return t.modelList=e.rows})})},searchData:function(){this.listQuery.pageNum=1,this.listQuery.pageSize=10,this.tableData.pageNum=1,this.tableData.pageSize=10,this.listQuery.startDate+=this.listQuery.startDate.indexOf("00:00:00")>-1?"":" 00:00:00",this.listQuery.endDate+=this.listQuery.endDate.indexOf("23:59:59")>-1?"":" 23:59:59",this.getTerminalListData()},handleSelectionChange:function(t){this.selectedData=t},isNull:function(t){return 0===t.length?(this.$message.warning("没有选中任何数据"),!1):!(t.length>1)||(this.$message.warning("请选择一条数据"),!1)},handleExceed:function(t,e){this.$message.warning("只能选择一个文件")},beforeRemove:function(t,e){return this.$confirm("确定移除 "+t.name+"？")},beforeUpload:function(t){var e=t.size/1024/1024<1,n=t.name.split(".");return e?"xls"===n[1]||"xlsx"===n[1]?(this.file=t.raw,this.showEmptyFileTips=!1,t):(this.$message.error("上传文件只能是 xls/xlsx 格式!"),this.upload.fileList=[],!1):(this.upload.fileList=[],this.$message({message:"请上传小于1M的文件",type:"warning"}),!1)},handleDetail:function(){this.file=null,this.upload.fileList=[],this.editForm.snInfo="",this.showEmptyFileTips=!1,this.editFormVisible=!0},submitTerminalForm:function(){var t=this;this.editFormVisible&&this.$refs.editForm.validate(function(e){if(2!==t.inputType||t.file){if(e){t.btnLoading=!0;var n=new FormData;if(n.append("file",t.file),n.append("productId",t.productInfo.id),n.append("batchnumber",t.editForm.batchnumber),n.append("busChannelID",t.editForm.busChannelID),n.append("poskeytype",t.editForm.poskeytype),5==t.editForm.type)n.append("snInfo",t.editForm.sn),n.append("mtmk",t.editForm.mtmk),n.append("mtmkkvc",t.editForm.mtmkkvc),n.append("mkey",t.editForm.mkey);else{var a=t.editForm.snInfo;0===(a=a.replace(/[\r\n]/g,"").replace(/，/g,",").replace(/,,/g,",").replace(/,,,/g,",")).indexOf(",")&&(a=a.substring(1)),n.append("snInfo",a)}if(n.append("producerId",t.editForm.producerId),n.append("modelId",t.editForm.modelId),n.append("type",t.editForm.type),n.append("addtype",t.inputType),3==t.inputType&&(n.append("startsn",t.editForm.start),n.append("endsn",t.editForm.end),t.editForm.num>1e6))return t.$message.warning("范围入库应小于100万台"),void(t.btnLoading=!1);Object(h.de)(n).then(function(e){t.btnLoading=!1,t.$message.success("设备入库成功"),t.editFormVisible=!1,t.getTerminalListData()}).catch(function(){return t.btnLoading=!1})}}else t.showEmptyFileTips=!0})},queryProducerChange:function(){this.listQuery.type=0,this.listQuery.modeID="",this.modalQuery.producer_id=this.listQuery.producerID,this.modalQuery.type=this.listQuery.type,this.getTerminalType()},queryTypeChange:function(){this.listQuery.modeID="",this.modalQuery.producer_id=this.listQuery.producerID,this.modalQuery.type=this.listQuery.type,this.getTerminalType()},editProducerChange:function(){this.editForm.type=null,this.editForm.modelId=null,this.modalQuery.producer_id=this.editForm.producerId,this.modalQuery.type=this.editForm.type,this.getTerminalType()},editTypeChange:function(){this.editForm.modelId=null,this.modalQuery.producer_id=this.editForm.producerId,this.modalQuery.type=this.editForm.type,5==this.editForm.type&&3==this.inputType&&(this.inputType=1),this.getTerminalType()},handleSizeChange:function(t){this.listQuery.pageNum=1,this.listQuery.pageSize=t,this.tableData.pageNum=1,this.tableData.pageSize=t,this.getTerminalListData()},handleCurrentChange:function(t){this.listQuery.pageNum=t,this.tableData.pageNum=t,this.getTerminalListData()},handleSuccess:function(t){var e=t.results,n=t.header;this.tableData=e,this.tableHeader=n},autoGetBatchNumber:function(){var t=new Date,e=t.getFullYear().toString(),n=(t.getMonth()+1).toString().padStart(2,"0"),a=t.getDate().toString().padStart(2,"0"),i=t.getHours().toString().padStart(2,"0"),r=t.getMinutes().toString().padStart(2,"0"),o=t.getSeconds().toString().padStart(2,"0");this.editForm.batchnumber=e+n+a+i+r+o},closeDialog:function(){var t=this;this.$nextTick(function(){t.$refs.editForm.clearValidate()}),this.editForm.snInfo="",this.editForm.sn="",this.editForm.mtmk="",this.editForm.mtmkkvc="",this.editForm.mkey="",this.editForm.start="",this.editForm.end="",this.editForm.num="",this.editForm.busChannelID="",this.editForm.modelId="",this.editForm.fileName="",this.inputType=1,this.editForm.type=null,this.editForm.producerId="",this.editForm.poskeytype=1},closeClearDialog:function(){var t=this;this.$nextTick(function(){t.resetForm("clearForm")})},submitClearForm:function(){var t=this;this.clearFormVisible&&(this.btnLoading=!0,Object(h.e)({sn:this.selectedData[0].sn,flag:this.clearForm.flag}).then(function(e){t.btnLoading=!1,t.$message.success("清除秘钥成功"),t.clearFormVisible=!1}).catch(function(){return t.btnLoading=!1}))},openDialog:function(){var t=this;this.autoGetBatchNumber(),this.channelQuery.pageSize=1,Object(f.E)(this.channelQuery).then(function(e){t.channelQuery.pageSize=e.total,Object(f.E)(t.channelQuery).then(function(e){return t.channelList=e.rows})})},openClearDialog:function(){this.isNull(this.selectedData)&&(3!==this.selectedData[0].bindingType?this.$message.warning("只能清除已绑定的终端设备的秘钥"):this.clearFormVisible=!0)},resetForm:function(t){this.$refs[t].resetFields()},validatorSN:function(t,e,n){e||n("请填写SN");var a=e.replace(/，/g,",");0===a.indexOf(",")&&n(new Error("不能用逗号开头")),a.match(/,,/g)&&a.match(/,,/g).length>0&&n(new Error("SN格式不正确，过多的连续逗号")),new i.a(a.split(",")).size<a.split(",").length&&n(new Error("存在重复的SN")),n()},validatorOneSN:function(t,e,n){e||n("请填写SN");/^[0-9a-zA-Z]+$/.test(e)||n(new Error("SN格式不正确")),n()},inputTypeChange:function(){this.$refs.editForm&&this.$refs.editForm.clearValidate(),1===this.inputType?this.showEmptyFileTips=!1:3===this.inputType?(this.editForm.start="",this.editForm.end="",this.editForm.num=""):this.editForm.snInfo=""},start:function(t,e,n){var a=this.editForm.start.length,i=this.editForm.end.length,r="",o="";return a>=1&&i>=1&&(o=this.editForm.start.substring(a,a),r=this.editForm.end.substring(i,i)),e?/^[0-9a-zA-Z]+$/.test(e)?Number(r)-Number(o)<0?n("开始终端号要小于结束终端号"):n():void n(new Error("SN格式不正确")):n("请填写开始终端号")},end:function(t,e,n){var a,i,r=this.editForm.start.length,o=this.editForm.end.length,l=this.editForm.start.match(/\d+/g),s=this.editForm.end.match(/\d+/g);i=l&&l[l.length-1],a=s&&s[s.length-1];return e?/^[0-9a-zA-Z]+$/.test(e)?r!=o?n("结束和开始终端号位数需保持一样"):Number(a)-Number(i)<0?n("结束终端号要大于开始终端号"):n():void n(new Error("SN格式不正确")):n("请填写结束终端号")},inputChange:function(){var t=this.editForm.start,e=this.editForm.end,n=new RegExp("\\d");if(t&&e&&n.test(t)&&n.test(e)){var a=t.match(/\d+/g),i=e.match(/\d+/g),r=0,o=0,l="",s="",u="",d="";/^[0-9]*$/.test(t)?l=t:(r=t.lastIndexOf(a[a.length-1]),l=a[a.length-1],u=t.substring(0,r)),/^[0-9]*$/.test(e)?s=e:(o=e.lastIndexOf(i[i.length-1]),s=i[i.length-1],d=e.substring(0,o)),u==d&&Number(s)-Number(l)>=0?this.editForm.num=Number(s)-Number(l)+1:this.editForm.num=""}else this.editForm.num=""},btnClickHandle:function(t){switch(t){case"enter":this.handleDetail();break;case"export":this.getCheckData("终端管理",this.selectedData,this.tableList);break;case"clear":this.openClearDialog()}}}},k=(n("scHO"),n("KHd+")),D=Object(k.a)(v,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("nav",[n("el-row",[n("el-input",{staticClass:"nav-input font-w-5",attrs:{clearable:!0,placeholder:"请输入终端序列号"},model:{value:t.listQuery.sn,callback:function(e){t.$set(t.listQuery,"sn",e)},expression:"listQuery.sn"}},[n("template",{slot:"prepend"},[t._v("序列号")])],2),t._v(" "),n("div",{staticClass:"nav-select"},[n("div",{staticClass:"nav-select-title"},[t._v("厂商")]),t._v(" "),n("el-select",{staticClass:"handle-select select-w-3",attrs:{placeholder:"请选择"},on:{change:t.queryProducerChange},model:{value:t.listQuery.producerID,callback:function(e){t.$set(t.listQuery,"producerID",e)},expression:"listQuery.producerID"}},[n("el-option",{key:-1,attrs:{label:"全部",value:""}}),t._v(" "),t._l(t.vendorList,function(t,e){return n("el-option",{key:e,attrs:{value:t.id,label:t.producerName}})})],2)],1),t._v(" "),n("div",{staticClass:"nav-select"},[n("div",{staticClass:"nav-select-title"},[t._v("状态")]),t._v(" "),n("el-select",{staticClass:"handle-select select-w-3",attrs:{placeholder:"请选择"},model:{value:t.listQuery.bindingType,callback:function(e){t.$set(t.listQuery,"bindingType",e)},expression:"listQuery.bindingType"}},[n("el-option",{attrs:{label:"全部",value:0}}),t._v(" "),t._l(t.bindingTypeList,function(t,e){return n("el-option",{key:e,attrs:{label:t.bindingTypeName,value:t.bindingType}})})],2)],1),t._v(" "),3==t.listQuery.bindingType?n("div",{staticClass:"nav-select"},[n("div",{staticClass:"nav-select-title"},[t._v("激活状态")]),t._v(" "),n("el-select",{staticClass:"handle-select select-w-3",attrs:{placeholder:"请选择"},model:{value:t.listQuery.isInit,callback:function(e){t.$set(t.listQuery,"isInit",e)},expression:"listQuery.isInit"}},[n("el-option",{attrs:{label:"全部",value:-1}}),t._v(" "),n("el-option",{attrs:{label:"已激活",value:1}}),t._v(" "),n("el-option",{attrs:{label:"未激活",value:0}})],1)],1):t._e(),t._v(" "),n("div",{staticClass:"nav-select"},[n("div",{staticClass:"nav-select-title mt1"},[t._v(t._s(t.bindDateName)+"时间")]),t._v(" "),n("el-date-picker",{attrs:{editable:!1,type:"date","value-format":"yyyy-MM-dd",placeholder:"开始日期","picker-options":t.pickerBeginDateBefore},model:{value:t.listQuery.startDate,callback:function(e){t.$set(t.listQuery,"startDate",e)},expression:"listQuery.startDate"}}),t._v(" -\n        "),n("el-date-picker",{attrs:{editable:!1,type:"date","value-format":"yyyy-MM-dd",placeholder:"结束日期","picker-options":t.pickerBeginDateAfter},model:{value:t.listQuery.endDate,callback:function(e){t.$set(t.listQuery,"endDate",e)},expression:"listQuery.endDate"}})],1),t._v(" "),t.filterVisible?n("el-input",{staticClass:"nav-input font-w-5",attrs:{placeholder:"请输入入库批次号"},model:{value:t.listQuery.operationNum,callback:function(e){t.$set(t.listQuery,"operationNum",e)},expression:"listQuery.operationNum"}},[n("template",{slot:"prepend"},[t._v("入库批次号")])],2):t._e(),t._v(" "),t.filterVisible?n("div",{staticClass:"nav-select"},[n("div",{staticClass:"nav-select-title"},[t._v("类型")]),t._v(" "),n("el-select",{staticClass:"handle-select select-w-5",attrs:{placeholder:"请选择"},on:{change:t.queryTypeChange},model:{value:t.listQuery.type,callback:function(e){t.$set(t.listQuery,"type",e)},expression:"listQuery.type"}},[n("el-option",{key:-1,attrs:{label:"全部",value:0}}),t._v(" "),t._l(t.typeList,function(t,e){return n("el-option",{key:e,attrs:{value:t.type,label:t.name}})})],2)],1):t._e(),t._v(" "),t.filterVisible?n("div",{staticClass:"nav-select"},[n("div",{staticClass:"nav-select-title"},[t._v("型号")]),t._v(" "),n("el-select",{staticClass:"handle-select select-w-3",attrs:{placeholder:"请选择"},model:{value:t.listQuery.modeID,callback:function(e){t.$set(t.listQuery,"modeID",e)},expression:"listQuery.modeID"}},[n("el-option",{key:-1,attrs:{label:"全部",value:""}}),t._v(" "),t._l(t.modelList,function(t,e){return n("el-option",{key:e,attrs:{value:t.id,label:t.sysPosProducerName}})})],2)],1):t._e(),t._v(" "),n("el-button",{staticClass:"search margin-t-20",attrs:{type:"primary"},on:{click:t.searchData}},[t._v("查询")]),t._v(" "),n("div",{staticClass:"nav_screen",on:{click:function(e){t.filterVisible=!t.filterVisible}}},[t._v("\n        高级\n        "),n("i",{staticClass:"icon",class:t.filterVisible?"el-icon-caret-top":"el-icon-caret-bottom"})])],1)],1),t._v(" "),n("PageTable",{attrs:{noIndex:!0,tableList:t.tableList,tableData:t.tableData,currentButton:t.currentButton},on:{handleSelectionChange:t.handleSelectionChange,sizeChange:t.handleSizeChange,currentChange:t.handleCurrentChange,btnClickHandle:t.btnClickHandle}}),t._v(" "),n("el-dialog",{attrs:{"close-on-click-modal":!1,"append-to-body":!0,visible:t.editFormVisible,title:"终端入库",width:"800px"},on:{"update:visible":function(e){t.editFormVisible=e},open:t.openDialog,close:t.closeDialog}},[n("el-form",{ref:"editForm",staticStyle:{width:"100%"},attrs:{inline:!0,rules:t.editRules,model:t.editForm,"label-width":"135px"}},[n("el-form-item",{attrs:{label:"批次号",prop:"batchnumber"}},[n("span",[n("el-input",{staticStyle:{width:"150px","margin-right":"5px"},attrs:{type:"text",readonly:""},model:{value:t.editForm.batchnumber,callback:function(e){t.$set(t.editForm,"batchnumber",e)},expression:"editForm.batchnumber"}})],1),t._v(" "),n("span",[n("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.autoGetBatchNumber}},[t._v("自动获取批次号")])],1)]),t._v(" "),n("el-form-item",{attrs:{label:"选择通道",prop:"busChannelID"}},[n("el-select",{attrs:{filterable:"",clearable:!0,placeholder:"请选择"},model:{value:t.editForm.busChannelID,callback:function(e){t.$set(t.editForm,"busChannelID",e)},expression:"editForm.busChannelID"}},t._l(t.channelList,function(t,e){return n("el-option",{key:e,attrs:{label:t.chineseName,value:t.id}})}))],1),t._v(" "),n("el-form-item",{attrs:{label:"厂商名称",prop:"producerId"}},[n("el-select",{attrs:{filterable:"",clearable:!0,placeholder:"请选择"},on:{change:t.editProducerChange},model:{value:t.editForm.producerId,callback:function(e){t.$set(t.editForm,"producerId",e)},expression:"editForm.producerId"}},t._l(t.vendorList,function(t,e){return n("el-option",{key:e,attrs:{label:t.producerName,value:t.id}})}))],1),t._v(" "),n("el-form-item",{attrs:{label:"终端类型",prop:"type"}},[n("el-select",{attrs:{filterable:"",clearable:!0,placeholder:"请选择"},on:{change:t.editTypeChange},model:{value:t.editForm.type,callback:function(e){t.$set(t.editForm,"type",t._n(e))},expression:"editForm.type"}},t._l(t.typeList,function(t,e){return n("el-option",{key:e,attrs:{value:t.type,label:t.name}})}))],1),t._v(" "),n("el-form-item",{attrs:{label:"型号",prop:"modelId"}},[n("el-select",{attrs:{filterable:"",clearable:!0,placeholder:"请选择"},model:{value:t.editForm.modelId,callback:function(e){t.$set(t.editForm,"modelId",e)},expression:"editForm.modelId"}},t._l(t.modelList,function(t,e){return n("el-option",{key:e,attrs:{label:t.sysPosProducerName,value:t.id}})}))],1),t._v(" "),n("el-form-item",{attrs:{label:"主秘钥类型"}},[n("el-radio-group",{model:{value:t.editForm.poskeytype,callback:function(e){t.$set(t.editForm,"poskeytype",e)},expression:"editForm.poskeytype"}},[n("el-radio",{attrs:{label:1}},[t._v("原始秘钥")]),t._v(" "),n("el-radio",{attrs:{label:2}},[t._v("加密秘钥")])],1)],1),t._v(" "),n("el-form-item",{staticStyle:{width:"100%","margin-bottom":"10px"},attrs:{label:"终端输入方式"}},[n("el-radio-group",{on:{change:t.inputTypeChange},model:{value:t.inputType,callback:function(e){t.inputType=e},expression:"inputType"}},[n("el-radio",{attrs:{label:1}},[t._v("逐个")]),t._v(" "),5!=t.editForm.type?n("el-radio",{attrs:{label:3}},[t._v("范围")]):t._e(),t._v(" "),n("el-radio",{attrs:{label:2}},[t._v("文件导入")])],1),t._v(" "),1===t.inputType?n("span",{staticStyle:{color:"red"}},[t._v("    格式说明：以逗号分割的SN串")]):t._e()],1),t._v(" "),1===t.inputType&&5!=t.editForm.type?n("el-form-item",{ref:"snInfo",staticStyle:{width:"100%"},attrs:{label:"SN",prop:"snInfo"}},[n("el-input",{staticStyle:{width:"540px"},attrs:{type:"textarea",rows:"5",resize:"none"},model:{value:t.editForm.snInfo,callback:function(e){t.$set(t.editForm,"snInfo",e)},expression:"editForm.snInfo"}})],1):t._e(),t._v(" "),1===t.inputType&&5==t.editForm.type?n("div",[n("el-form-item",{attrs:{label:"SN",prop:"sn"}},[n("el-input",{staticStyle:{width:"540px"},attrs:{type:"text",clearable:""},model:{value:t.editForm.sn,callback:function(e){t.$set(t.editForm,"sn",e)},expression:"editForm.sn"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"安付主密钥",prop:"mtmk"}},[n("el-input",{staticStyle:{width:"540px"},attrs:{type:"text",clearable:""},model:{value:t.editForm.mtmk,callback:function(e){t.$set(t.editForm,"mtmk","string"==typeof e?e.trim():e)},expression:"editForm.mtmk"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"安付主密钥校验码",prop:"mtmkkvc"}},[n("el-input",{staticStyle:{width:"540px"},attrs:{type:"text",clearable:""},model:{value:t.editForm.mtmkkvc,callback:function(e){t.$set(t.editForm,"mtmkkvc","string"==typeof e?e.trim():e)},expression:"editForm.mtmkkvc"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"安付传输密钥",prop:"mkey"}},[n("el-input",{staticStyle:{width:"540px"},attrs:{type:"text",clearable:""},model:{value:t.editForm.mkey,callback:function(e){t.$set(t.editForm,"mkey","string"==typeof e?e.trim():e)},expression:"editForm.mkey"}})],1)],1):t._e(),t._v(" "),3===t.inputType&&5!=t.editForm.type?n("div",[n("el-form-item",{attrs:{label:"开始终端序列号",prop:"start"}},[n("el-input",{attrs:{placeholder:"请输入开始终端序列号",clearable:""},on:{input:t.inputChange},model:{value:t.editForm.start,callback:function(e){t.$set(t.editForm,"start","string"==typeof e?e.trim():e)},expression:"editForm.start"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"结束终端序列号",prop:"end"}},[n("el-input",{attrs:{placeholder:"结束终端序列号",clearable:""},on:{input:t.inputChange},model:{value:t.editForm.end,callback:function(e){t.$set(t.editForm,"end","string"==typeof e?e.trim():e)},expression:"editForm.end"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"终端数量"}},[n("el-input",{attrs:{disabled:""},model:{value:t.editForm.num,callback:function(e){t.$set(t.editForm,"num",t._n(e))},expression:"editForm.num"}})],1)],1):t._e(),t._v(" "),2===t.inputType?n("el-form-item",{staticClass:"is-required",attrs:{label:"上传文件"}},[n("el-upload",{staticClass:"upload-demo",attrs:{action:t.upload.action,"on-change":t.beforeUpload,limit:1,"on-exceed":t.handleExceed,"file-list":t.upload.fileList,"auto-upload":!1,"list-type":"text",accept:".xls, .xlsx"}},[n("el-button",{staticClass:"v-middle",attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),n("a",{staticClass:"link-btn v-middle",attrs:{href:t.currentPosExample}},[t._v("下载模板")]),t._v(" "),n("el-row",{staticClass:"el-upload__tip no-m-b",attrs:{slot:"tip"},slot:"tip"},[t._v("*上传文件只能是 xls/xlsx 格式，且不超过1024kb")])],1),t._v(" "),n("el-row",{directives:[{name:"show",rawName:"v-show",value:t.showEmptyFileTips,expression:"showEmptyFileTips"}],staticClass:"no-m-b custom-err"},[n("span",{staticStyle:{color:"#f56c6c"}},[t._v("请选择上传文件")])])],1):t._e()],1),t._v(" "),n("span",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small"},on:{click:function(e){t.editFormVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{size:"small",type:"primary",loading:t.btnLoading},on:{click:t.submitTerminalForm}},[t._v("确 定")])],1)],1),t._v(" "),n("el-dialog",{attrs:{"close-on-click-modal":!1,"append-to-body":!0,visible:t.clearFormVisible,title:"清除秘钥",width:"520px"},on:{"update:visible":function(e){t.clearFormVisible=e},close:t.closeClearDialog}},[n("el-form",{ref:"clearForm",attrs:{inline:!0,model:t.clearForm,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"秘钥类型"}},[n("el-radio-group",{model:{value:t.clearForm.flag,callback:function(e){t.$set(t.clearForm,"flag",e)},expression:"clearForm.flag"}},[n("el-radio",{attrs:{label:1}},[t._v("主秘钥")]),t._v(" "),n("el-radio",{attrs:{label:2}},[t._v("主秘钥状态")]),t._v(" "),n("el-radio",{attrs:{label:3}},[t._v("工作秘钥")])],1)],1)],1),t._v(" "),n("span",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small"},on:{click:function(e){t.clearFormVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{size:"small",type:"primary",loading:t.btnLoading},on:{click:t.submitClearForm}},[t._v("确 定")])],1)],1)],1)},[],!1,null,"6b0c0710",null);D.options.__file="cardReaderManage.vue";e.default=D.exports},lJhe:function(t,e,n){var a=n("PkhV");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,n("SZ7m").default)("77dd7e76",a,!0,{})},scHO:function(t,e,n){"use strict";var a=n("AAUg");n.n(a).a}}]);