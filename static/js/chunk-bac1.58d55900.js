(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-bac1"],{"/Smc":function(e,t,n){"use strict";n("L2JU");var a=n("rY9o"),r={name:"agentDropDownList",props:["listQuery","titleName","noTitle","levelItem","agentInfo"],data:function(){return{agentList:[],agentId:""}},watch:{agentId:function(e){this.listQuery&&(this.listQuery.productAgentId=e),this.listQuery&&(this.listQuery.productAgentid=e),this.listQuery&&(this.listQuery.productAgentID=e)},"agentInfo.id":function(e){""==e&&(this.agentId=e,this.agentList=[])}},methods:{remoteMethod:function(e){var t=this;this.agentList=[],e&&Object(a.r)({nameOrMobile:e}).then(function(e){t.agentList=e.rows})},changeSelect:function(e){var t=this;this.agentList.length&&this.agentList.map(function(n){n.productAgentId==e&&t.$emit("sendAgentinfo",n)})}}},o=(n("AGlR"),n("KHd+")),s=Object(o.a)(r,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{},[n("div",{staticClass:"nav-select height-zindex"},[e.noTitle?e._e():n("div",{staticClass:"nav-select-title"},[e._v(e._s(e.titleName||"代理名称或手机号"))]),e._v(" "),n("el-select",{staticClass:"handle-select select-w-8",attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"代理商名称或手机号","remote-method":e.remoteMethod,clearable:!0},on:{change:e.changeSelect},model:{value:e.agentId,callback:function(t){e.agentId=t},expression:"agentId"}},e._l(e.agentList,function(t){return n("el-option",{key:t.id,attrs:{value:t.productAgentId,label:t.name+"-"+t.mobile}},[n("span",{staticStyle:{float:"left","font-size":"12px"}},[e._v(e._s(t.name))]),e._v(" "),n("span",{staticStyle:{float:"right","font-size":"12px"}},[n("span",{staticStyle:{color:"#8492a6"}},[e._v(e._s(t.mobile))])])])}))],1)])},[],!1,null,"27faa3b4",null);s.options.__file="agentDropDownList.vue";t.a=s.exports},"7Qib":function(e,t,n){"use strict";n.d(t,"h",function(){return g}),n.d(t,"d",function(){return m}),n.d(t,"g",function(){return f}),n.d(t,"b",function(){return v}),n.d(t,"f",function(){return h}),n.d(t,"a",function(){return y}),n.d(t,"i",function(){return b}),n.d(t,"c",function(){return _}),n.d(t,"e",function(){return w});var a=n("14Xm"),r=n.n(a),o=n("D3Ub"),s=n.n(o),i=(n("jWXv"),n("rfXi"),n("GQeE"),n("EJiy")),l=n.n(i),u=n("Kw5r"),d=n("Q2AE"),c=(n("X4fA"),n("Yfch")),p=n("N4Yp");function g(e,t){if(0===arguments.length)return null;var n=t||"{y}-{m}-{d} {h}:{i}:{s}",a=void 0;"object"===(void 0===e?"undefined":l()(e))?a=e:(10===(""+e).length&&(e=1e3*parseInt(e)),a=new Date(e));var r={y:a.getFullYear(),m:a.getMonth()+1,d:a.getDate(),h:a.getHours(),i:a.getMinutes(),s:a.getSeconds(),a:a.getDay()};return n.replace(/{(y|m|d|h|i|s|a)+}/g,function(e,t){var n=r[t];return"a"===t?["日","一","二","三","四","五","六"][n]:(e.length>0&&n<10&&(n="0"+n),n||0)})}function m(e){var t=e||new Date;return t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()}function f(e){var t=e.getFullYear(),n=e.getMonth()+1;n=n<10?"0"+n:n;var a=e.getDate();return t+"-"+n+"-"+(a=a<10?"0"+a:a)}u.default.prototype.copy_obj=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var n in e)t[n]=e[n];return t},u.default.prototype.show_feeType=function(e,t){for(var n=[],a=0;a<n.length;a++)if(e===n[a])return!0},u.default.prototype.showPageNum=function(e,t,n){return n<=t?1:Math.ceil((n-0)/t)-e>=0?e:e-1},u.default.prototype.Multiple=function(e){return 100*((e-0)*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:100)).toFixed(2)/100},u.default.prototype.delBackPage=function(e,t){var n=e.pageNum,a=e.pageSize,r=e.total,o=t.length,s=Math.ceil((r-o)/a);return s?s>=n?n:n-1:1},u.default.prototype.delBackPage2=function(e,t,n,a){var r=Math.ceil((n-a)/t);return r?r>=e?e:e-1:1},u.default.prototype.showDay=function(){var e=new Date,t=Number(e.getMonth())+1;return e.getFullYear()+"-"+t+"-"+e.getDate()},u.default.prototype.showWeekFirstDay=function(){var e=new Date,t=new Date(e-864e5*(e.getDay()-1)),n=Number(t.getMonth())+1;return e.getFullYear()+"-"+n+"-"+t.getDate()},u.default.prototype.showMonthFirstDay=function(){var e=new Date,t=new Date(e.getYear(),e.getMonth(),1),n=Number(t.getMonth())+1;return e.getFullYear()+"-"+n+"-"+t.getDate()},u.default.prototype.showMonthDay=function(){var e=new Date,t=new Date(e-2592e6),n=t.getFullYear(),a=t.getMonth()+1,r=t.getDate();return n+"-"+(a<10?"0"+a:a)+"-"+(r<10?"0"+r:r)},u.default.prototype.formatImg=function(e){return e?e.indexOf(d.a.getters.appConfig.imageHost)>-1?e+"&token="+d.a.getters.token:e:""};function v(e,t,n){var a=void 0,r=void 0,o=void 0,s=void 0,i=void 0,l=function l(){var u=+new Date-s;u<t&&u>0?a=setTimeout(l,t-u):(a=null,n||(i=e.apply(o,r),a||(o=r=null)))};return function(){for(var r=arguments.length,u=Array(r),d=0;d<r;d++)u[d]=arguments[d];o=this,s=+new Date;var c=n&&!a;return a||(a=setTimeout(l,t)),c&&(i=e.apply(o,u),o=u=null),i}}function h(e){return 1==e.length||(window.vue.$message.warning("列表中请选择一个"),!1)}function y(e){return e.length>0||(window.vue.$message.warning("列表中请至少选择一个"),!1)}function b(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];y(e)&&window.vue.$confirm("确认"+(-1==t?"删除":r||(t?"开启":"关闭"))+"吗？").then(function(r){var s=[];e.find(function(e){s.push(e.id)}),window.vue.$store.dispatch("open_close_delete",{req_name:n,data:o||(-1==t?{id:s}:{id:s,status:t})}).then(function(e){window.vue.$message.success("成功!"),a&&a()})}).catch(function(e){})}function _(e){var t=e.getFullYear(),n=e.getMonth()+1;n=n<10?"0"+n:n;var a=e.getDate();return t+"-"+n+"-"+(a=a<10?"0"+a:a)}var w=function(){var e=s()(r.a.mark(function e(){var t,n,a,o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,n=window.vue.$route.query.id,a=window.vue.$route.path.substring(1),e.next=5,Object(p.k)({pageid:n,url:a});case 5:return o=e.sent,(t=o.rows).forEach(function(e){switch(e.flag=e.url.indexOf("|")>-1?e.url.split("|")[0]:e.url,e.flag){case"add":case"edit":case"list":case"custom":case"sms":case"detail":case"check":case"edit":case"upgrade":case"remove":case"batch":case"enter":case"export":case"pwd":e.type="primary";break;case"on":case"onModule":case"off":case"offModule":e.type="warning";break;case"del":case"delModule":e.type="danger";break;default:e.type="primary"}}),e.abrupt("return",t);case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}();u.default.prototype.outExcel=function(e,t,a,r){var o=this;0!=r.length?Promise.all([n.e("chunk-7a80"),n.e("chunk-413d")]).then(n.bind(null,"S/jZ")).then(function(n){var s=Object(c.j)(a,r);n.export_json_to_excel({header:t,data:s,filename:e+Object(c.d)(),autoWidth:o.autoWidth})}):window.vue.$message.warning("请至少选择一条数据")},u.default.prototype.getCheckData=function(e,t,a){var r=this;arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(0!=t.length){for(var o=[],s=[],i=[],l=0;l<t.length;l++){var u=this.copy_obj(t[l]);i.push(u)}for(var p=0;p<a.length;p++)if(1!=a[p].hidden){if("money"==a[p].type||"rewardMoney"==a[p].type||"recordMoney"==a[p].type||"warningMoney"==a[p].type)for(var g=0;g<i.length;g++){var m=a[p].name;i[g][m]=Object(c.v)(i[g][m])}else if("stateMuch"==a[p].type)for(g=0;g<i.length;g++){m=a[p].name;i[g][m]=a[p].stateMuch[i[g][m]]}else if("arrayValue"==a[p].type){var f=d.a.getters[a[p].arrayValue].list;for(g=0;g<i.length;g++){m=a[p].name;if(f)for(var v=0;v<f.length;v++)if(f[v].value==i[g][m]){i[g][m]=f[v].label;break}}}o.push(a[p].label),s.push(a[p].name)}Promise.all([n.e("chunk-7a80"),n.e("chunk-413d")]).then(n.bind(null,"S/jZ")).then(function(t){var n=Object(c.j)(s,i);t.export_json_to_excel({header:o,data:n,filename:e+Object(c.d)(),autoWidth:r.autoWidth})})}else window.vue.$message.warning("请至少选择一条数据")},u.default.prototype.getParents=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.agentList.list;if(t)for(var n in t){if(t[n].value==e)return[t[n].value];if(t[n].children){var a=this.getParents(e,t[n].children);if(void 0!==a)return a.concat(t[n].value)}}},u.default.prototype.getAllChild=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.agentList.list;if(t)for(var n in t){if(t[n].value==e)return[t[n].value];if(!t[n].children)return a.concat(t[n].value);var a=this.getParents(e,t[n].children);if(void 0!==a)return a.concat(t[n].value)}},u.default.prototype.sortArr=function(e){if(e){for(var t=[],n=e.length;n--;n>=0)t.push(e[n]);return t}},u.default.prototype.toChinesNum=function(e){var t=["零","一","二","三","四","五","六","七","八","九"],n=["","十","百","千","万"];e=parseInt(e);var a=function(e){for(var a=e.toString().split("").reverse(),r="",o=0;o<a.length;o++)r=(0==o&&0==a[o]?"":o>0&&0==a[o]&&0==a[o-1]?"":t[a[o]]+(0==a[o]?n[0]:n[o]))+r;return r},r=Math.floor(e/1e4),o=e%1e4;return o.toString().length<4&&(o="0"+o),r?a(r)+"万"+a(o):a(e)}},"9Eck":function(e,t,n){var a=n("e4eP");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n("SZ7m").default)("ebe220ea",a,!0,{})},A5Tw:function(e,t,n){"use strict";n.r(t);var a=n("QbLZ"),r=n.n(a),o=n("rY9o"),s=n("L2JU"),i=n("7Qib"),l=(n("Yfch"),n("X4fA")),u=n("YZgg"),d=n("/Smc"),c={name:"message",components:{filterBox:u.a,agentDropDownList:d.a},data:function(){var e=this;return{tableData:[],cur_page:1,listQuery:{endDate:"",lastId:"",noteContent:"",noteLevel:0,pageNum:1,pageSize:10,show:"",startDate:"",productid:""},editVisible:!1,addVisible:!1,startDate:new Date((new Date).setDate((new Date).getDate()-7)),endDate:new Date,productAgentList:[],addForm:{noteContent:"",noteLevel:"",noteTimeOut:"",noteTitle:"",noteToAgent:"",noteType:"",show:!0,productId:"",startDate:"",endDate:"",uid:"",userType:0,topAgentId:"",buttonType:1},rules:{noteTimeOut:[{required:!0,type:"integer",min:1,max:99,message:"请输入1~99之间的正整数",trigger:"blur"}],noteTimeOut1:[]},currentButton:[],tag:!0,selectData:[],agentQuery:{productID:"",showType:1,statusType:0},loading:!1,pickerBeginDateBefore:{disabledDate:function(t){var n=e.endDate;if(n)return t.getTime()>n}},pickerBeginDateAfter:{disabledDate:function(t){var n=e.startDate;if(n)return t.getTime()<n}}}},computed:r()({},Object(s.b)(["noteList","productInfo"])),watch:{productInfo:function(e,t){e.id!=t.id&&t.id&&(this.listQuery.productid=e.id,this.sizeChange(10))}},mounted:function(){var e=this;this.$nextTick(function(){e.listQuery.productid=e.productInfo.id,e.sizeChange(10),Object(i.e)().then(function(t){e.currentButton=t})})},methods:{resetForm:function(e){this.$refs[e].resetFields()},currentChange:function(e){this.select_query(e)},sizeChange:function(e){this.select_query(1,e)},select_query:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.listQuery.startDate=Object(i.g)(this.startDate||new Date((new Date).setDate((new Date).getDate()-7)))+" 00:00:00",this.listQuery.endDate=Object(i.g)(this.endDate||new Date)+" 23:59:59",this.listQuery.pageNum=e||this.noteList.pageNum,this.listQuery.pageSize=t||this.noteList.pageSize,this.$store.dispatch("reqUrl_SysData",{reqName:o.Zc,dataName:"noteList",data:this.listQuery})},handleAdd:function(){this.tag?this.addVisible=!0:this.isNull(this.selectData)&&(this.addForm=this.copy_obj(this.selectData[0]),this.addForm.noteTimeOut=this.selectData[0].noteTimeOut?this.selectData[0].noteTimeOut:"",this.addVisible=!0)},handleDelete:function(){var e=this;Object(i.i)(this.selectData,-1,o.Xb,function(){e.currentChange(e.delBackPage(e.noteList,e.selectData))})},saveAdd:function(){var e=this;this.$refs.addForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;if(!e.addForm.startDate&&!e.addForm.endDate||e.addForm.startDate&&e.addForm.endDate){e.loading=!0;var n=JSON.parse(Object(l.b)());e.addForm.productId=n.id;var a=e.copy_obj(e.addForm);0==a.buttonType&&(a.noteTimeOut=0),e.tag?Object(o.Ib)(a).then(function(t){e.$message.success("添加成功"),e.select_query(),e.addVisible=!1,e.loading=!1}).catch(function(t){e.loading=!1}):Object(o.jc)(a).then(function(t){e.$message.success("修改成功"),e.select_query(),e.addVisible=!1,e.loading=!1}).catch(function(t){e.loading=!1})}else e.$message.warning("请将有效期填写完整或清空则为永久有效")})},closeDialog:function(){var e=this;this.$nextTick(function(){e.$refs.addForm.resetFields(),e.loading=!1,e.addForm.uid="",e.addForm.topAgentId="",e.addForm.noteLevel="",e.addForm.noteTimeOut="",e.addForm.buttonType=0,e.addForm.userType=0,e.addForm.startDate="",e.addForm.endDate="",e.addForm.noteType="",e.addForm.show=!0,e.addForm.noteContent="",e.addForm.noteTitle="",e.addForm.noteToAgent=""})},selectUserId:function(e){this.addForm.uid=e},sendAgentinfo:function(e){this.addForm.uid=e.productAgentId},changeUserType:function(e){1==this.addForm.userType?(this.addForm.topAgentId="",this.getTopAgentList()):this.addForm.uid=""},handleChange:function(){},handleSelectionChange:function(e){this.selectData=e},btnClickHandle:function(e){switch(e){case"add":this.tag=!0,this.handleAdd();break;case"edit":this.tag=!1,this.handleAdd();break;case"del":this.handleDelete()}},getTopAgentList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.agentQuery.productID=JSON.parse(Object(l.b)()).id,Object(o.Ac)(this.agentQuery).then(function(n){e.productAgentList=n.rows,t&&t()}).catch(function(e){})},isNull:function(e){return 0==e.length?(this.$message.warning("没有选中任何数据"),!1):!(e.length>1)||(this.$message.warning("请选择一条数据"),!1)}},filters:{noteToAgentLabel:function(e){return 0===e?"商户":"代理商"},noteTypeLabel:function(e){return 1==e?"系统消息":2==e?"活动消息":"--"}}},p=(n("nfTo"),n("KHd+")),g=Object(p.a)(c,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"container"},[n("nav",[n("el-row",{staticClass:"el-row mr10"},[n("div",{staticClass:"nav-select"},[n("div",{staticClass:"nav-select-title"},[e._v("级别")]),e._v(" "),n("el-select",{staticClass:"handle-select select-w-2",attrs:{placeholder:"全部"},model:{value:e.listQuery.noteLevel,callback:function(t){e.$set(e.listQuery,"noteLevel",t)},expression:"listQuery.noteLevel"}},[n("el-option",{key:"",attrs:{label:"全部",value:0}}),e._v(" "),n("el-option",{key:"1",attrs:{label:"日常",value:1}}),e._v(" "),n("el-option",{key:"2",attrs:{label:"通知",value:2}}),e._v(" "),n("el-option",{key:"3",attrs:{label:"紧急",value:3}})],1)],1),e._v(" "),n("div",{staticClass:"nav-select"},[n("div",{staticClass:"nav-select-title"},[e._v("状态")]),e._v(" "),n("el-select",{staticClass:"handle-select select-w-3",attrs:{placeholder:"全部"},model:{value:e.listQuery.show,callback:function(t){e.$set(e.listQuery,"show",t)},expression:"listQuery.show"}},[n("el-option",{key:"0",attrs:{label:"全部",value:""}}),e._v(" "),n("el-option",{key:"true",attrs:{label:"显示",value:!0}}),e._v(" "),n("el-option",{key:"false",attrs:{label:"隐藏",value:!1}})],1)],1),e._v(" "),n("el-input",{staticClass:"nav-input font-w-2",attrs:{placeholder:"请输入内容"},model:{value:e.listQuery.noteContent,callback:function(t){e.$set(e.listQuery,"noteContent",t)},expression:"listQuery.noteContent"}},[n("template",{slot:"prepend"},[e._v("内容")])],2),e._v(" "),n("div",{staticClass:"nav-select"},[n("div",{staticClass:"nav-select-title mt1"},[e._v("时间")]),e._v(" "),n("el-date-picker",{attrs:{editable:!1,type:"date",placeholder:"开始日期","picker-options":e.pickerBeginDateBefore},model:{value:e.startDate,callback:function(t){e.startDate=t},expression:"startDate"}}),e._v(" -\n          "),n("el-date-picker",{attrs:{editable:!1,type:"date",placeholder:"结束日期","picker-options":e.pickerBeginDateAfter},model:{value:e.endDate,callback:function(t){e.endDate=t},expression:"endDate"}})],1),e._v(" "),n("el-button",{staticClass:"search margin-t-20",attrs:{type:"primary",icon:"search"},on:{click:function(t){e.sizeChange()}}},[e._v("查询")])],1)],1),e._v(" "),n("el-row",{staticClass:"margin-t-20"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.noteList&&e.noteList.loading,expression:"noteList && noteList.loading"}],attrs:{data:e.noteList&&e.noteList.list||[],"header-cell-style":{background:"#eef1f6",padding:"3px"},"cell-style":{padding:"3px"},"element-loading-text":"Loading",border:"",fit:"",stripe:"","highlight-current-row":""},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"45px"}}),e._v(" "),n("el-table-column",{attrs:{prop:"date",label:"标题",align:"center","min-width":"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.noteTitle))]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"name",label:"类型",align:"center","min-width":"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e._f("noteToAgentLabel")(t.row.noteToAgent))+"\n          ")]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"name",label:"消息类型",align:"center","min-width":"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e._f("noteTypeLabel")(t.row.noteType))+"\n          ")]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"name",label:"发送给",align:"center","min-width":"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-popover",{attrs:{trigger:"click",placement:"bottom"}},[n("div",{staticClass:"popover-w"},[0==t.row.noteToAgent?n("span",[e._v(e._s(0==t.row.userType?"全部商户":1==t.row.userType?"一级代理商全部商户":"指定商户"))]):n("span",[e._v(e._s(0==t.row.userType?"全部代理商":1==t.row.userType?"一级代理商全部代理商":"指定代理商"))]),e._v(" "),1==t.row.userType?n("span",[e._v(e._s(t.row.agentName)+"-"+e._s(t.row.agentMobile))]):e._e(),e._v(" "),2==t.row.userType?n("span",[e._v(e._s(t.row.name)+"-"+e._s(t.row.mobile))]):e._e()]),e._v(" "),n("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[n("el-button",{staticClass:"blue margin-all-0 padding-all-0 border-0 bgc-op-0 text-ellipsis"},[0==t.row.noteToAgent?n("span",[e._v(e._s(0==t.row.userType?"全部商户":1==t.row.userType?"一级代理商全部商户":"指定商户"))]):n("span",[e._v(e._s(0==t.row.userType?"全部代理商":1==t.row.userType?"一级代理商全部代理商":"指定代理商"))]),e._v(" "),1==t.row.userType?n("span",[e._v(e._s(t.row.agentName)+"-"+e._s(t.row.agentMobile))]):e._e(),e._v(" "),2==t.row.userType?n("span",[e._v(e._s(t.row.name)+"-"+e._s(t.row.mobile))]):e._e()])],1)])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"name",label:"级别",align:"center","min-width":"60px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(1==t.row.noteLevel?"日常":2==t.row.noteLevel?"通知":"紧急")+"\n          ")]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"show",label:"状态",align:"center","min-width":"60px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.show?"显示":"隐藏")+"\n          ")]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"buttonType",label:"按钮样式",align:"center","min-width":"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(3!=t.row.noteLevel?"--":0==t.row.noteTimeOut?"确定":"倒计时")+"\n          ")]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"address",label:"显示时间(s)",align:"center","min-width":"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(3!=t.row.noteLevel?"--":0==t.row.noteTimeOut?"--":t.row.noteTimeOut))]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"address",label:"有效期",align:"center","min-width":"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.startDate?n("span",[e._v("\n              "+e._s(t.row.startDate+"~"+t.row.endDate)+"\n            ")]):n("span",[e._v("--")])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"noteContent",label:"内容",align:"center","min-width":"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-popover",{attrs:{trigger:"click",placement:"bottom"}},[n("div",{staticClass:"popover-w"},[n("span",{attrs:{title:t.row.noteContent}},[e._v("\n                  "+e._s(t.row.noteContent)+"\n                ")])]),e._v(" "),n("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[n("el-button",{staticClass:"blue margin-all-0 padding-all-0 border-0 bgc-op-0 text-ellipsis"},[e._v(e._s(t.row.noteContent))])],1)])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"address",label:"添加时间",align:"center","min-width":"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.insertDate))]}}])})],1),e._v(" "),n("el-row",{staticClass:"leftBtnGroup"},e._l(e.currentButton,function(t,a){return n("el-button",{key:a,staticClass:"margin-t-20",attrs:{size:"mini",type:t.type},on:{click:function(n){e.btnClickHandle(t.flag)}}},[e._v(e._s(t.name))])}))],1),e._v(" "),n("div",{staticClass:"pagination-container text-right"},[n("el-pagination",{directives:[{name:"show",rawName:"v-show",value:(e.noteList&&e.noteList.total)>(e.noteList&&e.noteList.pageSize),expression:"\n          (noteList && noteList.total) > (noteList && noteList.pageSize)\n        "}],attrs:{"current-page":e.noteList&&e.noteList.pageNum,"page-sizes":[10,20,30,50],"page-size":e.noteList&&e.noteList.pageSize,total:e.noteList&&e.noteList.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.sizeChange,"current-change":e.currentChange}})],1)],1),e._v(" "),n("el-dialog",{attrs:{"close-on-click-modal":!1,"append-to-body":!0,visible:e.addVisible,title:e.tag?"添加消息":"编辑消息",width:"650px"},on:{"update:visible":function(t){e.addVisible=t},close:e.closeDialog}},[n("el-form",{ref:"addForm",attrs:{model:e.addForm,"label-width":"110px",rules:e.rules}},[n("el-form-item",{attrs:{label:"标题",prop:"noteTitle",rules:{required:!0,message:"请输入标题",trigger:"blur"}}},[n("el-input",{attrs:{placeholder:"请输入标题"},model:{value:e.addForm.noteTitle,callback:function(t){e.$set(e.addForm,"noteTitle","string"==typeof t?t.trim():t)},expression:"addForm.noteTitle"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"类型",prop:"noteToAgent",rules:{required:!0,message:"请输入类型",trigger:"change"}}},[n("el-select",{attrs:{placeholder:"请选择",disabled:!e.tag},model:{value:e.addForm.noteToAgent,callback:function(t){e.$set(e.addForm,"noteToAgent",t)},expression:"addForm.noteToAgent"}},[n("el-option",{key:"1",attrs:{label:"商户",value:0}}),e._v(" "),n("el-option",{key:"2",attrs:{label:"代理商",value:1}})],1)],1),e._v(" "),0===e.addForm.noteToAgent||1===e.addForm.noteToAgent?n("el-form-item",{attrs:{label:"发送给"}},[n("el-radio-group",{attrs:{disabled:!e.tag},on:{change:e.changeUserType},model:{value:e.addForm.userType,callback:function(t){e.$set(e.addForm,"userType",t)},expression:"addForm.userType"}},[n("el-radio",{attrs:{label:0}},[e._v(e._s(0==e.addForm.noteToAgent?"全部商户":"全部代理商"))]),e._v(" "),n("el-radio",{attrs:{label:1}},[e._v(e._s(0==e.addForm.noteToAgent?"一级代理商全部商户":"一级代理商全部代理商"))]),e._v(" "),n("el-radio",{attrs:{label:2}},[e._v(e._s(0==e.addForm.noteToAgent?"指定商户":"指定代理商"))])],1)],1):e._e(),e._v(" "),1==e.addForm.userType&&e.tag?n("el-form-item",{attrs:{label:"一级代理商",prop:"topAgentId",rules:{required:!0,message:"请选择一级代理商",trigger:"change"}}},[n("el-select",{staticClass:"handle-select select-w-5",attrs:{placeholder:"请选择代理商",filterable:"",clearable:!0},model:{value:e.addForm.topAgentId,callback:function(t){e.$set(e.addForm,"topAgentId",t)},expression:"addForm.topAgentId"}},e._l(e.productAgentList,function(e,t){return n("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1):e._e(),e._v(" "),e.tag?n("div",{staticStyle:{"margin-bottom":"20px"}},[0==e.addForm.noteToAgent&&2==e.addForm.userType?n("el-form-item",{attrs:{label:"发送给商户",prop:"uid",rules:{required:!0,message:"请选择商户",trigger:"change"}}},[n("filterBox",{attrs:{noTitle:!0},on:{selectUserId:e.selectUserId}})],1):e._e(),e._v(" "),1==e.addForm.noteToAgent&&2==e.addForm.userType?n("el-form-item",{attrs:{label:"发送给代理商",prop:"uid",rules:{required:!0,message:"请选择代理商",trigger:"change"}}},[n("agentDropDownList",{ref:"agentDropDownList",attrs:{noTitle:!0},on:{sendAgentinfo:e.sendAgentinfo}})],1):e._e()],1):0!=e.addForm.userType?n("div",{staticStyle:{"margin-bottom":"20px"}},[1==e.addForm.userType?n("el-form-item",{attrs:{label:"一级代理商"}},[n("el-input",{attrs:{disabled:!0},model:{value:e.addForm.agentName,callback:function(t){e.$set(e.addForm,"agentName","string"==typeof t?t.trim():t)},expression:"addForm.agentName"}})],1):n("el-form-item",{attrs:{label:0==e.addForm.noteToAgent?"发送给商户":"发送给代理商"}},[n("el-input",{attrs:{disabled:!0},model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name","string"==typeof t?t.trim():t)},expression:"addForm.name"}})],1)],1):e._e(),e._v(" "),n("el-form-item",{attrs:{label:"消息类型",prop:"noteType",rules:{required:!0,message:"请输入类型",trigger:"change"}}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addForm.noteType,callback:function(t){e.$set(e.addForm,"noteType",t)},expression:"addForm.noteType"}},[n("el-option",{key:"1",attrs:{label:"系统消息",value:1}}),e._v(" "),n("el-option",{key:"2",attrs:{label:"活动消息",value:2}})],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"级别",prop:"noteLevel",rules:{required:!0,message:"请输入级别",trigger:"change"}}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addForm.noteLevel,callback:function(t){e.$set(e.addForm,"noteLevel",t)},expression:"addForm.noteLevel"}},[n("el-option",{key:"1",attrs:{label:"日常",value:1}}),e._v(" "),n("el-option",{key:"2",attrs:{label:"通知",value:2}}),e._v(" "),n("el-option",{key:"3",attrs:{label:"紧急",value:3}})],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"状态",prop:"show",rules:{required:!0,message:"请选择是否显示",trigger:"change"}}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addForm.show,callback:function(t){e.$set(e.addForm,"show",t)},expression:"addForm.show"}},[n("el-option",{key:"1",attrs:{label:"显示",value:!0}}),e._v(" "),n("el-option",{key:"2",attrs:{label:"隐藏",value:!1}})],1),e._v(" "),n("div",{staticClass:"work-time"},[e._v("\n          显示时所有级别消息在APP消息列表中显示，级别为紧急时在APP中弹框显示；不显示时所有级别消在APP消息列表中不显示，级别为紧急时在APP中不弹框显示；\n        ")])],1),e._v(" "),n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:3==e.addForm.noteLevel,expression:"addForm.noteLevel == 3"}],attrs:{label:"按钮样式"}},[n("el-radio-group",{model:{value:e.addForm.buttonType,callback:function(t){e.$set(e.addForm,"buttonType",t)},expression:"addForm.buttonType"}},[n("el-radio",{attrs:{label:0}},[e._v("确定")]),e._v(" "),n("el-radio",{attrs:{label:1}},[e._v("倒计时")])],1)],1),e._v(" "),n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==e.addForm.buttonType&&3==e.addForm.noteLevel,expression:"addForm.buttonType == 1 && addForm.noteLevel == 3"}],attrs:{label:"显示时间(s)",prop:1==e.addForm.buttonType&&3==e.addForm.noteLevel?"noteTimeOut":"noteTimeOut1"}},[n("el-input",{attrs:{placeholder:"请输入显示时间"},model:{value:e.addForm.noteTimeOut,callback:function(t){e.$set(e.addForm,"noteTimeOut",e._n("string"==typeof t?t.trim():t))},expression:"addForm.noteTimeOut"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"有效期"}},[n("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"datetime",placeholder:"开始日期","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.addForm.startDate,callback:function(t){e.$set(e.addForm,"startDate",t)},expression:"addForm.startDate"}}),e._v(" -\n        "),n("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"datetime",placeholder:"结束日期","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.addForm.endDate,callback:function(t){e.$set(e.addForm,"endDate",t)},expression:"addForm.endDate"}}),e._v(" "),n("div",{staticClass:"work-time"},[e._v("不添加有效期则永久有效")])],1),e._v(" "),n("el-form-item",{attrs:{label:"内容",prop:"noteContent",rules:{required:!0,message:"请输入内容",trigger:"blur"}}},[n("el-input",{attrs:{type:"textarea",placeholder:"请输入内容"},model:{value:e.addForm.noteContent,callback:function(t){e.$set(e.addForm,"noteContent","string"==typeof t?t.trim():t)},expression:"addForm.noteContent"}})],1)],1),e._v(" "),n("span",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small"},on:{click:function(t){e.addVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{size:"small",type:"primary",loading:e.loading},nativeOn:{click:function(t){return t.preventDefault(),e.saveAdd(t)}}},[e._v("确 定")])],1)],1)],1)},[],!1,null,null,null);g.options.__file="message.vue";t.default=g.exports},AGlR:function(e,t,n){"use strict";var a=n("nAyC");n.n(a).a},B1Rt:function(e,t,n){(e.exports=n("I1BE")(!1)).push([e.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},"RU/L":function(e,t,n){n("Rqdy");var a=n("WEpk").Object;e.exports=function(e,t,n){return a.defineProperty(e,t,n)}},Rqdy:function(e,t,n){var a=n("Y7ZC");a(a.S+a.F*!n("jmDH"),"Object",{defineProperty:n("2faE").f})},SEkw:function(e,t,n){e.exports={default:n("RU/L"),__esModule:!0}},YEIV:function(e,t,n){"use strict";t.__esModule=!0;var a=function(e){return e&&e.__esModule?e:{default:e}}(n("SEkw"));t.default=function(e,t,n){return t in e?(0,a.default)(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},YZgg:function(e,t,n){"use strict";var a,r=n("QbLZ"),o=n.n(r),s=n("YEIV"),i=n.n(s),l=n("L2JU"),u=n("rY9o"),d=n("X4fA"),c={props:["listQuery","noTitle","sn"],data:function(){return{userList:[],userQuery:{pageNum:1,pageSize:50,productAgentID:"",productID:null,name:"",agentFindType:3,genre:1},userId:"",loading:!1}},watch:(a={userId:function(e){this.$emit("selectUserId",e)}},i()(a,"listQuery.productAgentId",function(e){this.userList=[],this.userId=""}),i()(a,"listQuery.productAgentid",function(e){this.userList=[],this.userId=""}),i()(a,"listQuery.agentFindType",function(e){this.userList=[],this.userId=""}),i()(a,"listQuery.productAgentID",function(e){this.userList=[],this.userId=""}),i()(a,"listQuery.userId",function(e){this.userId=e}),i()(a,"listQuery.userID",function(e){this.userId=e}),i()(a,"userQuery.genre",function(e){this.userQuery.name="",this.userList=[],this.userId=""}),a),computed:o()({},Object(l.b)([""])),mounted:function(){var e=this;this.$nextTick(function(){(e.$route.query.name||e.$route.query.userId)&&(e.userList=[{id:e.$route.query.userId,name:e.$route.query.name}])})},methods:{getUserList:function(e){var t=this,n=JSON.parse(Object(d.b)());this.userQuery.productID=n.id,this.userQuery.name=e,this.listQuery&&(this.userQuery.productAgentID=this.listQuery.productAgentid||this.listQuery.productAgentId||this.listQuery.productAgentID||"",this.userQuery.agentFindType=this.listQuery.agentFindType||3),Object(u.Hd)(this.userQuery).then(function(e){t.userList=e.rows})},getOkUserName:function(e){return e.name+(e.mobile?"-"+e.mobile:"")},remoteMethod:function(e){var t=this;this.loading=!0,this.isNumberic(e)?setTimeout(function(){t.loading=!1,t.getUserList(e)}):this.userList=[]},isNumberic:function(e){return null!=e.match(/[\u4E00-\u9FA5]/g)||(null!=e.match(/[0-9]/g)||void 0)}}},p=(n("oUfR"),n("KHd+")),g=Object(p.a)(c,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"nav-select"},[e.sn?n("div",{staticClass:"nav-select-title select-input-style"},[n("el-select",{staticClass:"handle-select select-w-4 big-small select-date-style",attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.userQuery.genre,callback:function(t){e.$set(e.userQuery,"genre",t)},expression:"userQuery.genre"}},[n("el-option",{attrs:{value:1,label:"商户名或手机号"}},[e._v("商户名或手机号")]),e._v(" "),n("el-option",{attrs:{value:2,label:"终端序列号"}},[e._v("终端序列号")])],1)],1):e.noTitle?e._e():n("div",{staticClass:"nav-select-title"},[e._v("商户名或手机号")]),e._v(" "),n("el-select",{staticClass:"handle-select select-w-8",attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入"+(1==e.userQuery.genre?"商户名或手机号":"终端序列号"),"remote-method":e.remoteMethod,clearable:!0,disabled:!(!e.listQuery||!e.listQuery.disabled)&&e.listQuery.disabled,loading:e.loading},model:{value:e.userId,callback:function(t){e.userId=t},expression:"userId"}},e._l(e.userList,function(t){return n("el-option",{key:t.id,attrs:{value:t.id,label:e.getOkUserName(t)}},[n("span",{staticStyle:{float:"left","font-size":"12px"}},[e._v(e._s(t.name))]),e._v(" "),n("span",{staticStyle:{float:"right","font-size":"12px"}},[n("span",{staticStyle:{color:"#8492a6"}},[e._v(e._s(t.mobile))]),e._v(" "),2==t.status?n("span",{staticClass:"blue"},[e._v("禁用")]):e._e(),e._v(" "),3==t.status?n("span",{staticClass:"tipText"},[e._v("删除")]):e._e()])])}))],1)])},[],!1,null,"ad3c348a",null);g.options.__file="filterBox.vue";t.a=g.exports},aI7T:function(e,t,n){var a=n("vn91");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n("SZ7m").default)("3ad94f3c",a,!0,{})},e4eP:function(e,t,n){(e.exports=n("I1BE")(!1)).push([e.i,"\n.work-time {\n  color: #b4b4b4;\n  font-size: 12px;\n  line-height: 18px;\n  margin-top: 5px;\n}\n",""])},nAyC:function(e,t,n){var a=n("B1Rt");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n("SZ7m").default)("dea19706",a,!0,{})},nfTo:function(e,t,n){"use strict";var a=n("9Eck");n.n(a).a},oUfR:function(e,t,n){"use strict";var a=n("aI7T");n.n(a).a},vn91:function(e,t,n){(e.exports=n("I1BE")(!1)).push([e.i,"\n.select-input-style[data-v-ad3c348a] .el-select .el-input__inner:focus {\r\n  border-color: rgba(0, 0, 0, 0);\n}\n.select-date-style[data-v-ad3c348a] .el-input__inner {\r\n  background-color: rgba(0, 0, 0, 0);\r\n  border: none;\n}\n.select-date-style[data-v-ad3c348a] .el-input__inner {\r\n  padding-right: 0px;\r\n  padding-left: 0px;\r\n  color: #909399;\n}\n.select-date-style[data-v-ad3c348a] .el-select__caret {\r\n  margin-right: -20px !important;\n}\r\n",""])}}]);