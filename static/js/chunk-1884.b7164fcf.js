(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1884"],{"4rrp":function(e,t,a){"use strict";a.r(t);var i=a("14Xm"),s=a.n(i),n=a("D3Ub"),l=a.n(n),r=a("YEIV"),u=a.n(r),c=a("QbLZ"),o=a.n(c),d=a("L2JU"),p=a("rY9o"),h=a("X4fA"),y=a("4Vms"),m=a("YZgg"),g=a("6Uqi"),v={name:"allocationQuery",components:{agentBox:y.a,filterBox:m.a,PageTable:g.a},data:function(){var e=this;return{pickerBeginDateBefore:{disabledDate:function(t){return!!e.listQuery.endDate&&(t.getTime()>new Date(e.listQuery.endDate).getTime()||t.getTime()>(new Date).getTime())}},pickerBeginDateAfter:{disabledDate:function(t){return!!e.listQuery.startDate&&(t.getTime()<new Date(e.listQuery.startDate).getTime()||t.getTime()>(new Date).getTime())}},tableList:[{label:"序号",name:"keyId",width:"80px",checked:!0},{label:"下拨批次号",name:"allocateBatchnumber",width:"160px",checked:!0},{label:"终端序列号",name:"sn",width:"210px",checked:!0},{label:"激活码",name:"activationCode",width:"120",checked:!0},{label:"商户名称",name:"userName",width:"160px",type:"terminal_allocation_username",checked:!0},{label:"所属代理商名称",name:"productAgentName",width:"150px",checked:!0},{label:"一级代理商名称",name:"topAgentName",width:"150px",checked:!0},{label:"厂商名称",name:"producerName",width:"100px",checked:!0},{label:"终端类型",name:"type",width:"100px",type:"stateMuch",stateMuch:{1:"无线POS终端",2:"扫码盒",3:"二维码"},checked:!0},{label:"终端型号",name:"model",width:"100px",checked:!0},{label:"终端状态",name:"bindingType",width:"100px",type:"stateMuch",stateMuch:{1:"入库",2:"下拨",3:"绑定",4:"下线"},checked:!0},{label:"激活状态",name:"isInit",width:"100px",type:"stateMuch",stateMuch:{1:"已激活",0:"未激活"},checked:!0},{label:"主秘钥类型",width:"100px",name:"posKeyType",checked:!0},{label:"出库时间",name:"orderDate",width:"170px",checked:!0},{label:"绑定时间",name:"insertDate",width:"170px",checked:!0},{label:"销售政策名称",name:"saleName",width:"170px",type:"terminal_allocation_salename",checked:!0}],tableData:{list:[],loading:!1,pageNum:1,pageSize:10,total:0},selectedData:[],currentButton:[],filterVisible:!1,userType:null,userList:[],bindingTypeList:[],vendorList:[],typeList:[],modelList:[],listQuery:{allocateBatchnumber:"",bindingType:3,endDate:null,isAll:1,lastId:"",modeID:"",operationNum:"",pageNum:1,pageSize:10,producerID:"",productAgentID:"",productId:"",sn:"",startDate:null,type:0,userID:"",isInit:-1},userQuery:{name:"",pageNum:0,pageSize:0,productAgentID:"",productID:null},vendorQuery:{producerName:"",producerNameForShort:"",productId:"",skip:1,take:100},modalQuery:{pageNum:1,pageSize:10,producer_id:"",productId:"",type:0},levelItem:null,bindDateName:"绑定"}},computed:o()({},Object(d.b)(["productInfo"])),watch:u()({productInfo:function(e,t){e.id!=t.id&&t.id&&this.mountedInit()}},"listQuery.bindingType",function(e){var t=this;if(0==e||1==e)this.bindDateName="入库";else{var a=this.bindingTypeList.find(function(e){return e.bindingType==t.listQuery.bindingType});this.bindDateName=a.bindingTypeName}this.tableList.map(function(e){"insertDate"==e.name&&(e.label=t.bindDateName+"时间")})}),mounted:function(){this.mountedInit()},methods:{mountedInit:function(){this.userType=Object(h.f)(),this.setProductID(),this.setActivePageParam(),this.getPageData()},setActivePageParam:function(){var e=JSON.parse(Object(h.e)()).productAgentid;e="000000000000000000000000"!==e?e:"",this.listQuery.productAgentID=1!==this.userType?e:"";var t=new Date,a=new Date,i=t.getFullYear()-3,s=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0"),l=a.getFullYear(),r=String(a.getMonth()+1).padStart(2,"0"),u=String(a.getDate()).padStart(2,"0");this.listQuery.startDate=i+"-"+s+"-"+n+" 00:00:00",this.listQuery.endDate=l+"-"+r+"-"+u+" 23:59:59","zdjh"==this.$route.query.jumpPage&&(this.levelItem={},this.listQuery.productAgentID=this.levelItem.id=this.$route.query.productAgentid,this.levelItem.agentFindType=this.$route.query.agentFindType,this.listQuery.bindingType=3,this.listQuery.isInit=-1,this.listQuery.startDate=this.$route.query.strDate+" 00:00:00",this.listQuery.endDate=this.$route.query.strDate+" 23:59:59")},setProductID:function(){var e=JSON.parse(Object(h.b)());this.userQuery.productID=e.id,this.vendorQuery.productId=e.id,this.modalQuery.productId=e.id,this.listQuery.productId=e.id},getPageData:function(){var e=this;return l()(s.a.mark(function t(){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=null,e.tableData.loading=!0,t.next=4,Object(p.qe)(e.vendorQuery);case 4:return a=t.sent,e.vendorList=a.rows,t.next=8,Object(p.Ic)();case 8:return a=t.sent,e.bindingTypeList=a.rows,t.next=12,Object(p.y)();case 12:return a=t.sent,e.typeList=a.rows,e.modalQuery.pageSize=1,t.next=17,Object(p.Rd)(e.modalQuery);case 17:return a=t.sent,e.modalQuery.pageSize=a.total,t.next=21,Object(p.Rd)(e.modalQuery);case 21:return a=t.sent,e.modelList=a.rows,t.next=25,Object(p.wd)(e.listQuery);case 25:a=t.sent,e.tableData.list=a.rows,e.tableData.total=a.total,e.tableData.loading=!1;case 29:case"end":return t.stop()}},t,e)}))()},getTerminalListData:function(){var e=this;this.tableData.loading=!0,Object(p.wd)(this.listQuery).then(function(t){e.tableData.list=t.rows,e.tableData.total=t.total,e.tableData.loading=!1}).catch(function(){return e.tableData.loading=!1})},getUserList:function(){var e=this;Object(p.Hd)(this.userQuery).then(function(t){return e.userList=t.rows})},getVendorList:function(){var e=this;Object(p.qe)(this.vendorQuery).then(function(t){return e.vendorList=t.rows})},getTypeList:function(){var e=this;Object(p.y)().then(function(t){return e.typeList=t.rows})},getTerminalType:function(){var e=this;this.modalQuery.pageSize=1,Object(p.Rd)(this.modalQuery).then(function(t){e.modalQuery.pageSize=t.total,Object(p.Rd)(e.modalQuery).then(function(t){return e.modelList=t.rows})})},resetUserList:function(){this.listQuery.userID="",this.userQuery.productAgentID=this.listQuery.productAgentID,this.getUserList()},resetSearchType:function(){this.modelList=[],this.listQuery.modeID="",this.modalQuery.producer_id=this.listQuery.producerID,this.modalQuery.type=this.listQuery.type,this.getTerminalType()},searchData:function(){this.listQuery.pageNum=1,this.listQuery.pageSize=10,this.tableData.pageNum=1,this.tableData.pageSize=10,this.listQuery.startDate+=this.listQuery.startDate.indexOf("00:00:00")>-1?"":" 00:00:00",this.listQuery.endDate+=this.listQuery.endDate.indexOf("23:59:59")>-1?"":" 23:59:59",this.getTerminalListData()},handleSelectionChange:function(e){this.selectedData=e},handleSizeChange:function(e){this.listQuery.pageNum=1,this.listQuery.pageSize=e,this.tableData.pageNum=1,this.tableData.pageSize=e,this.getTerminalListData()},handleCurrentChange:function(e){this.listQuery.pageNum=e,this.tableData.pageNum=e,this.getTerminalListData()},selectAgentFun:function(e,t,a){this.listQuery.productAgentID=e,this.listQuery.agentFindType=t,1===a&&this.getPageData()},clickedSaleNameHandle:function(e){e.saleName&&this.pushPage("agentManage/salesPerformance",{saleid:e.saleId,salename:e.saleName})},selectUserId:function(e){this.listQuery.userID=e}}},b=(a("Ux/W"),a("KHd+")),f=Object(b.a)(v,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("nav",[a("el-row",[a("agentBox",{attrs:{levelItem:{id:e.listQuery.productAgentID}},on:{selectAgentFun:e.selectAgentFun}}),e._v(" "),a("filterBox",{on:{selectUserId:e.selectUserId}}),e._v(" "),a("el-input",{staticClass:"nav-input font-w-5",attrs:{clearable:!0,placeholder:"请输入终端序列号"},model:{value:e.listQuery.sn,callback:function(t){e.$set(e.listQuery,"sn",t)},expression:"listQuery.sn"}},[a("template",{slot:"prepend"},[e._v("序列号")])],2),e._v(" "),a("div",{staticClass:"nav-select"},[a("div",{staticClass:"nav-select-title"},[e._v("厂商")]),e._v(" "),a("el-select",{staticClass:"handle-select select-w-3",attrs:{placeholder:"请选择"},on:{change:e.resetSearchType},model:{value:e.listQuery.producerID,callback:function(t){e.$set(e.listQuery,"producerID",t)},expression:"listQuery.producerID"}},[a("el-option",{key:-1,attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.vendorList,function(e,t){return a("el-option",{key:t,attrs:{value:e.id,label:e.producerName}})})],2)],1),e._v(" "),a("div",{staticClass:"nav-select"},[a("div",{staticClass:"nav-select-title"},[e._v("状态")]),e._v(" "),a("el-select",{staticClass:"handle-select select-w-3",attrs:{placeholder:"请选择"},model:{value:e.listQuery.bindingType,callback:function(t){e.$set(e.listQuery,"bindingType",t)},expression:"listQuery.bindingType"}},[a("el-option",{attrs:{label:"全部",value:0}}),e._v(" "),e._l(e.bindingTypeList,function(e,t){return a("el-option",{key:t,attrs:{label:e.bindingTypeName,value:e.bindingType}})})],2)],1),e._v(" "),3==e.listQuery.bindingType?a("div",{staticClass:"nav-select"},[a("div",{staticClass:"nav-select-title"},[e._v("激活状态")]),e._v(" "),a("el-select",{staticClass:"handle-select select-w-3",attrs:{placeholder:"请选择"},model:{value:e.listQuery.isInit,callback:function(t){e.$set(e.listQuery,"isInit",t)},expression:"listQuery.isInit"}},[a("el-option",{attrs:{label:"全部",value:-1}}),e._v(" "),a("el-option",{attrs:{label:"已激活",value:1}}),e._v(" "),a("el-option",{attrs:{label:"未激活",value:0}})],1)],1):e._e(),e._v(" "),a("div",{staticClass:"nav-select"},[a("div",{staticClass:"nav-select-title mt1"},[e._v(e._s(e.bindDateName)+"时间")]),e._v(" "),a("el-date-picker",{attrs:{editable:!1,type:"date","value-format":"yyyy-MM-dd",placeholder:"开始日期","picker-options":e.pickerBeginDateBefore},model:{value:e.listQuery.startDate,callback:function(t){e.$set(e.listQuery,"startDate",t)},expression:"listQuery.startDate"}}),e._v(" -\n        "),a("el-date-picker",{attrs:{editable:!1,type:"date","value-format":"yyyy-MM-dd",placeholder:"结束日期","picker-options":e.pickerBeginDateAfter},model:{value:e.listQuery.endDate,callback:function(t){e.$set(e.listQuery,"endDate",t)},expression:"listQuery.endDate"}})],1),e._v(" "),e.filterVisible?a("el-input",{staticClass:"nav-input font-w-5",attrs:{placeholder:"请输入下拨批次号"},model:{value:e.listQuery.allocateBatchnumber,callback:function(t){e.$set(e.listQuery,"allocateBatchnumber",t)},expression:"listQuery.allocateBatchnumber"}},[a("template",{slot:"prepend"},[e._v("批次号")])],2):e._e(),e._v(" "),e.filterVisible?a("div",{staticClass:"nav-select"},[a("div",{staticClass:"nav-select-title"},[e._v("类型")]),e._v(" "),a("el-select",{staticClass:"handle-select select-w-4",attrs:{placeholder:"请选择"},on:{change:e.resetSearchType},model:{value:e.listQuery.type,callback:function(t){e.$set(e.listQuery,"type",t)},expression:"listQuery.type"}},[a("el-option",{key:-1,attrs:{label:"全部",value:0}}),e._v(" "),e._l(e.typeList,function(e,t){return a("el-option",{key:t,attrs:{value:e.type,label:e.name}})})],2)],1):e._e(),e._v(" "),e.filterVisible?a("div",{staticClass:"nav-select"},[a("div",{staticClass:"nav-select-title"},[e._v("型号")]),e._v(" "),a("el-select",{staticClass:"handle-select select-w-3",attrs:{placeholder:"请选择"},model:{value:e.listQuery.modeID,callback:function(t){e.$set(e.listQuery,"modeID",t)},expression:"listQuery.modeID"}},[a("el-option",{key:-1,attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.modelList,function(e,t){return a("el-option",{key:t,attrs:{value:e.id,label:e.sysPosProducerName}})})],2)],1):e._e(),e._v(" "),a("el-button",{staticClass:"search margin-t-20",attrs:{type:"primary"},on:{click:e.searchData}},[e._v("查询")]),e._v(" "),a("div",{staticClass:"nav_screen",on:{click:function(t){e.filterVisible=!e.filterVisible}}},[e._v("\n        高级\n        "),a("i",{staticClass:"icon",class:e.filterVisible?"el-icon-caret-top":"el-icon-caret-bottom"})])],1)],1),e._v(" "),a("PageTable",{attrs:{noIndex:!0,tableList:e.tableList,tableData:e.tableData,currentButton:e.currentButton},on:{handleSelectionChange:e.handleSelectionChange,sizeChange:e.handleSizeChange,currentChange:e.handleCurrentChange,clickedSaleName:e.clickedSaleNameHandle}})],1)},[],!1,null,"1111cbee",null);f.options.__file="allocationQuery.vue";t.default=f.exports},7618:function(e,t,a){(e.exports=a("I1BE")(!1)).push([e.i,"\n.no-m-b[data-v-1111cbee] {\r\n  margin-bottom: 0;\n}\n.custom-err[data-v-1111cbee] {\r\n  font-size: 12px;\r\n  height: 16px;\r\n  line-height: 16px;\n}\r\n",""])},"RU/L":function(e,t,a){a("Rqdy");var i=a("WEpk").Object;e.exports=function(e,t,a){return i.defineProperty(e,t,a)}},Rqdy:function(e,t,a){var i=a("Y7ZC");i(i.S+i.F*!a("jmDH"),"Object",{defineProperty:a("2faE").f})},SEkw:function(e,t,a){e.exports={default:a("RU/L"),__esModule:!0}},"Ux/W":function(e,t,a){"use strict";var i=a("gbok");a.n(i).a},YEIV:function(e,t,a){"use strict";t.__esModule=!0;var i=function(e){return e&&e.__esModule?e:{default:e}}(a("SEkw"));t.default=function(e,t,a){return t in e?(0,i.default)(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},YZgg:function(e,t,a){"use strict";var i,s=a("QbLZ"),n=a.n(s),l=a("YEIV"),r=a.n(l),u=a("L2JU"),c=a("rY9o"),o=a("X4fA"),d={props:["listQuery","noTitle","sn"],data:function(){return{userList:[],userQuery:{pageNum:1,pageSize:50,productAgentID:"",productID:null,name:"",agentFindType:3,genre:1},userId:"",loading:!1}},watch:(i={userId:function(e){this.$emit("selectUserId",e)}},r()(i,"listQuery.productAgentId",function(e){this.userList=[],this.userId=""}),r()(i,"listQuery.productAgentid",function(e){this.userList=[],this.userId=""}),r()(i,"listQuery.agentFindType",function(e){this.userList=[],this.userId=""}),r()(i,"listQuery.productAgentID",function(e){this.userList=[],this.userId=""}),r()(i,"listQuery.userId",function(e){this.userId=e}),r()(i,"listQuery.userID",function(e){this.userId=e}),r()(i,"userQuery.genre",function(e){this.userQuery.name="",this.userList=[],this.userId=""}),i),computed:n()({},Object(u.b)([""])),mounted:function(){var e=this;this.$nextTick(function(){(e.$route.query.name||e.$route.query.userId)&&(e.userList=[{id:e.$route.query.userId,name:e.$route.query.name}])})},methods:{getUserList:function(e){var t=this,a=JSON.parse(Object(o.b)());this.userQuery.productID=a.id,this.userQuery.name=e,this.listQuery&&(this.userQuery.productAgentID=this.listQuery.productAgentid||this.listQuery.productAgentId||this.listQuery.productAgentID||"",this.userQuery.agentFindType=this.listQuery.agentFindType||3),Object(c.Hd)(this.userQuery).then(function(e){t.userList=e.rows})},getOkUserName:function(e){return e.name+(e.mobile?"-"+e.mobile:"")},remoteMethod:function(e){var t=this;this.loading=!0,this.isNumberic(e)?setTimeout(function(){t.loading=!1,t.getUserList(e)}):this.userList=[]},isNumberic:function(e){return null!=e.match(/[\u4E00-\u9FA5]/g)||(null!=e.match(/[0-9]/g)||void 0)}}},p=(a("oUfR"),a("KHd+")),h=Object(p.a)(d,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"nav-select"},[e.sn?a("div",{staticClass:"nav-select-title select-input-style"},[a("el-select",{staticClass:"handle-select select-w-4 big-small select-date-style",attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.userQuery.genre,callback:function(t){e.$set(e.userQuery,"genre",t)},expression:"userQuery.genre"}},[a("el-option",{attrs:{value:1,label:"商户名或手机号"}},[e._v("商户名或手机号")]),e._v(" "),a("el-option",{attrs:{value:2,label:"终端序列号"}},[e._v("终端序列号")])],1)],1):e.noTitle?e._e():a("div",{staticClass:"nav-select-title"},[e._v("商户名或手机号")]),e._v(" "),a("el-select",{staticClass:"handle-select select-w-8",attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入"+(1==e.userQuery.genre?"商户名或手机号":"终端序列号"),"remote-method":e.remoteMethod,clearable:!0,disabled:!(!e.listQuery||!e.listQuery.disabled)&&e.listQuery.disabled,loading:e.loading},model:{value:e.userId,callback:function(t){e.userId=t},expression:"userId"}},e._l(e.userList,function(t){return a("el-option",{key:t.id,attrs:{value:t.id,label:e.getOkUserName(t)}},[a("span",{staticStyle:{float:"left","font-size":"12px"}},[e._v(e._s(t.name))]),e._v(" "),a("span",{staticStyle:{float:"right","font-size":"12px"}},[a("span",{staticStyle:{color:"#8492a6"}},[e._v(e._s(t.mobile))]),e._v(" "),2==t.status?a("span",{staticClass:"blue"},[e._v("禁用")]):e._e(),e._v(" "),3==t.status?a("span",{staticClass:"tipText"},[e._v("删除")]):e._e()])])}))],1)])},[],!1,null,"ad3c348a",null);h.options.__file="filterBox.vue";t.a=h.exports},aI7T:function(e,t,a){var i=a("vn91");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a("SZ7m").default)("3ad94f3c",i,!0,{})},gbok:function(e,t,a){var i=a("7618");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a("SZ7m").default)("d16fe034",i,!0,{})},oUfR:function(e,t,a){"use strict";var i=a("aI7T");a.n(i).a},vn91:function(e,t,a){(e.exports=a("I1BE")(!1)).push([e.i,"\n.select-input-style[data-v-ad3c348a] .el-select .el-input__inner:focus {\r\n  border-color: rgba(0, 0, 0, 0);\n}\n.select-date-style[data-v-ad3c348a] .el-input__inner {\r\n  background-color: rgba(0, 0, 0, 0);\r\n  border: none;\n}\n.select-date-style[data-v-ad3c348a] .el-input__inner {\r\n  padding-right: 0px;\r\n  padding-left: 0px;\r\n  color: #909399;\n}\n.select-date-style[data-v-ad3c348a] .el-select__caret {\r\n  margin-right: -20px !important;\n}\r\n",""])}}]);