(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7174"],{"/h46":function(e,t,a){a("cHUd")("Map")},NrzK:function(e,t,a){var n=a("tU6j");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,a("SZ7m").default)("5867be5b",n,!0,{})},ODRq:function(e,t,a){e.exports={default:a("UDep"),__esModule:!0}},"RU/L":function(e,t,a){a("Rqdy");var n=a("WEpk").Object;e.exports=function(e,t,a){return n.defineProperty(e,t,a)}},Rqdy:function(e,t,a){var n=a("Y7ZC");n(n.S+n.F*!a("jmDH"),"Object",{defineProperty:a("2faE").f})},SEkw:function(e,t,a){e.exports={default:a("RU/L"),__esModule:!0}},UDep:function(e,t,a){a("wgeU"),a("FlQf"),a("bBy9"),a("g33z"),a("XLbu"),a("/h46"),a("dVTT"),e.exports=a("WEpk").Map},XINx:function(e,t,a){"use strict";var n={bind:function(e,t,a){var n=e.querySelector(".el-dialog__header"),i=e.querySelector(".el-dialog");n.style.cssText+=";cursor:move;",i.style.cssText+=";top:0px;";var s=window.document.currentStyle?function(e,t){return e.currentStyle[t]}:function(e,t){return getComputedStyle(e,!1)[t]};n.onmousedown=function(e){var t=e.clientX-n.offsetLeft,l=e.clientY-n.offsetTop,o=i.offsetWidth,r=i.offsetHeight,c=document.body.clientWidth,u=document.body.clientHeight,d=i.offsetLeft,m=c-i.offsetLeft-o,h=i.offsetTop,b=u-i.offsetTop-r,g=s(i,"left"),p=s(i,"top");g.includes("%")?(g=+document.body.clientWidth*(+g.replace(/\%/g,"")/100),p=+document.body.clientHeight*(+p.replace(/\%/g,"")/100)):(g=+g.replace(/\px/g,""),p=+p.replace(/\px/g,"")),document.onmousemove=function(e){var n=e.clientX-t,s=e.clientY-l;-n>d?n=-d:n>m&&(n=m),-s>h?s=-h:s>b&&(s=b),i.style.cssText+=";left:"+(n+g)+"px;top:"+(s+p)+"px;",a.child.$emit("dragDialog")},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null}}}},i=function(e){e.directive("el-drag-dialog",n)};window.Vue&&(window["el-drag-dialog"]=n,Vue.use(i)),n.install=i;t.a=n},XLbu:function(e,t,a){var n=a("Y7ZC");n(n.P+n.R,"Map",{toJSON:a("8iia")("Map")})},YEIV:function(e,t,a){"use strict";t.__esModule=!0;var n=function(e){return e&&e.__esModule?e:{default:e}}(a("SEkw"));t.default=function(e,t,a){return t in e?(0,n.default)(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},dVTT:function(e,t,a){a("aPfg")("Map")},eWaB:function(e,t,a){"use strict";a("L2JU");var n=a("rY9o"),i=a("X4fA"),s={props:["levelVisible","agentLevelData","agentInfo"],data:function(){return{newLevelVisible:!1,levelList:[],load_level:!1}},computed:{},watch:{levelVisible:function(e){this.newLevelVisible=e,e&&this.getUpAgentList()}},mounted:function(){this.$nextTick(function(){})},methods:{closeDialog:function(){this.newLevelVisible=!1,this.$emit("changeLevelVisible",!1,1)},getUpAgentList:function(){var e=this;this.load_level=!0,Object(n.Ad)({productAgentId:this.agentLevelData[this.agentInfo&&this.agentInfo.id||"id"],productId:JSON.parse(Object(i.b)()).id}).then(function(t){e.levelList=t.rows,e.load_level=!1}).catch(function(t){e.load_level=!1})},setAgentInfo:function(e){this.newLevelVisible=!1,this.$emit("changeLevelVisible",!1,2,e)}}},l=a("KHd+"),o=Object(l.a)(s,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{"close-on-click-modal":!1,"append-to-body":!0,title:e.agentLevelData[e.agentInfo&&e.agentInfo.name||"name"]+"代理商上级",width:"600px",visible:e.newLevelVisible},on:{close:e.closeDialog,"update:visible":function(t){e.newLevelVisible=t}}},[e.levelList&&0!=e.levelList.length?a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.load_level,expression:"load_level"}],staticClass:"text-center"},[e._l(e.levelList,function(t,n){return a("div",{key:n},[a("div",{on:{click:function(a){e.setAgentInfo(t)}}},[a("el-tag",{staticClass:"add-more",attrs:{type:"info"}},[e._v(e._s(n+1)+"-"+e._s(t.productAgentName)+"-"+e._s(t.mobile))])],1),e._v(" "),a("div",{staticStyle:{"font-size":"18px",margin:"5px",color:"#909399"}},[e._v("|")])])}),e._v(" "),a("div",{on:{click:function(t){e.setAgentInfo(e.agentLevelData)}}},[a("el-tag",{staticClass:"add-more"},[e._v(e._s(e.levelList.length+1)+"-"+e._s(e.agentLevelData[e.agentInfo&&e.agentInfo.name||"name"])+"-"+e._s(e.agentLevelData[e.agentInfo&&e.agentInfo.mobile||"mobile"]))])],1)],2):a("div",{staticClass:"text-center blue"},[e._v("暂无上级")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.newLevelVisible=!1}}},[e._v("关 闭")])],1)])],1)},[],!1,null,null,null);o.options.__file="agentLevelBox.vue";t.a=o.exports},g33z:function(e,t,a){"use strict";var n=a("Wu5q"),i=a("n3ko");e.exports=a("raTm")("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=n.getEntry(i(this,"Map"),e);return t&&t.v},set:function(e,t){return n.def(i(this,"Map"),0===e?0:e,t)}},n,!0)},"h+4h":function(e,t,a){"use strict";var n=a("NrzK");a.n(n).a},"tCs+":function(e,t,a){"use strict";a.r(t);var n=a("YEIV"),i=a.n(n),s=a("ODRq"),l=a.n(s),o=a("14Xm"),r=a.n(o),c=a("D3Ub"),u=a.n(c),d=a("QbLZ"),m=a.n(d),h=a("rY9o"),b=a("Yfch"),g=a("7Qib"),p=a("6Uqi"),y=a("L2JU"),f=a("X4fA"),v=a("eWaB"),_=a("wk8/"),F=a("caUn"),M={props:["title","comData"],directives:{elDragDialog:a("XINx").a},components:{PageTable:p.a,timeBox:F.a},data:function(){return{commissionVisible:!1,vloading:!1,comList:{list:[],loading:!1},table_list:[{label:"日期",name:"jySettleDate",checked:!0},{type:"money",label:"不可结算余额",name:"unSettleBalance",checked:!0}]}},computed:{},watch:{},mounted:function(){},methods:{select_query:function(){var e=this;this.comList.loading=!0,Object(_.h)(this.comData).then(function(t){e.comList=t.data,e.comList.list=t.data.responses,e.comList.loading=!1}).catch(function(t){e.comList.loading=!1})},openDialog:function(){this.commissionVisible=!0,this.select_query()},closeDialog:function(e){this.commissionVisible=!1}}},L=a("KHd+"),D=Object(L.a)(M,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{"close-on-click-modal":!1,"append-to-body":!0,visible:e.commissionVisible,title:e.title,width:"650px",closed:"closeDialog"},on:{"update:visible":function(t){e.commissionVisible=t}}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.vloading,expression:"vloading"}],staticStyle:{"margin-top":"-20px"}},[a("el-row",[a("div",{staticClass:"tip clearfix"},[a("div",{staticClass:"fl margin-r-30"},[e._v("\n            "+e._s(e.title)+"：\n            "),a("span",{staticClass:"color-blue"},[e._v(e._s(e._f("formatToYuan")(e.comList&&e.comList.balance)))]),e._v(" 元\n          ")]),e._v(" "),a("div",{staticClass:"fl margin-r-30"},[e._v("\n            可结算余额：\n            "),a("span",{staticClass:"color-blue"},[e._v(e._s(e._f("formatToYuan")(e.comList&&e.comList.maySettleBalanceSum)))]),e._v(" 元\n          ")]),e._v(" "),a("div",{staticClass:"fl margin-r-30"},[e._v("\n            不可结算余额：\n            "),a("span",{staticClass:"color-blue"},[e._v(e._s(e._f("formatToYuan")(e.comList&&e.comList.unSettleBalanceSum)))]),e._v(" 元\n          ")])])]),e._v(" "),a("PageTable",{attrs:{noSelection:!0,noIndex:!0,noSelect:!0,listWidth:!0,currentButton:[],tableList:e.table_list,tableData:e.comList}})],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.closeDialog}},[e._v("关 闭")])],1)])],1)},[],!1,null,null,null);D.options.__file="commissionDialog.vue";var w,x=D.exports,k=a("meRd"),U={name:"commissBalance",components:{PageTable:p.a,agentLevelBox:v.a,query:k.a,commissionDialog:x},data:function(){var e=this;return{config:null,uploadUrl:null,isDisabled:!1,productAgentidArr:[],statusTag:"",Settleable_amount:"",accountList:[],accountListQuery:{userId:""},tableData:[],inMoneyVisible:!1,addVisible:!1,centerDialogVisible:!1,searchForm:[{type:"agentBox"},{type:"input",text:"代理商名称",name:"name",length:5,show:!0},{type:"input",text:"手机号",name:"mobile",length:4,show:!0},{type:"select",text:"排序",array:[{value:1,text:"余额"},{value:2,text:"佣金余额"},{value:3,text:"达标奖励余额"},{value:4,text:"服务费代收余额"},{value:5,text:"已结算总额"},{value:6,text:"总收益"}],name:"type",length:5,show:!0},{type:"searchBtn",text:"查询",name:"searchBtn"}],table_list:[{label:"代理商名称",name:"userName",type:"click",width:"120px",checked:!0},{label:"手机号",name:"mobile",width:"120px",checked:!0},{label:"余额(元)",name:"balance",type:"commiss_money",width:"160px",checked:!0},{label:"佣金余额(元)",name:"balance_002",type:"balanceMoney",width:"160px",checked:!0},{label:"达标奖励余额(元)",name:"balance_003",type:"balanceMoney",width:"160px",checked:!0},{label:"服务费代收余额(元)",name:"balance_004",type:"balanceMoney",width:"160px",checked:!0},{label:"已结算总额(元)",name:"settlementMoney",type:"settlement_money",width:"160px",checked:!0},{label:"总收益(元)",name:"allMoney",type:"money",width:"160px",checked:!0}],orderOptionList:[{label:"余额",value:1,text:"余额"},{label:"佣金余额",value:2,text:"佣金余额"},{label:"达标奖励余额",value:3,text:"达标奖励余额"},{label:"服务费代收余额",value:4,text:"服务费代收余额"},{label:"已结算总额",value:5,text:"已结算总额"},{label:"总收益",value:6,text:"总收益"}],key:1,checked:{},inMoneyRules:{money:{pattern:/^(([1-9][0-9]*)|(([0]\.\d{1,2}|[1-9][0-9]*\.\d{1,2})))$/,message:"金额格式不对",required:!0},jyUserMoneyKey:{required:!0,message:"请选择账户",trigger:"change"}},rules:{money:[{required:!0,trigger:"blur",validator:function(t,a,n){""===a?n(new Error("请输入金额")):a-0>e.Settleable_amount-0?n(new Error("输入金额需小于可结算金额")):n()}},{pattern:/^(([1-9][0-9]*)|(([0]\.\d{1,2}|[1-9][0-9]*\.\d{1,2})))$/,message:"金额格式不对"}],type:{required:!0,message:"请选择类型",trigger:"change"},bankCardId:{required:!0,message:"请选择结算银行卡",trigger:"change"},jyUserMoneyKey:{required:!0,message:"请选择账户",trigger:"change"},invoicePhoto:{required:!1,message:"请上传发票照片",trigger:"change"}},levelItem:null,levelVisible:!1,agentLevelData:"",agentName:"",autoBalanceForm:{agentId:"",money:"",jyUserMoneyKey:"",bankCardId:""},userName:"",inMoneyForm:{type:1,money:"",jyUserMoneyKey:"",userId:"",content:""},dialogVisible:!1,dialogImageUrl:"",openAccountUrl_upload:{action:"http://localhost:80",fileList:[],multiple:!1},isTrueMoney:!0,balance_002:"",balance_003:"",balance_004:"",bankData:[],bankCardlist:[],banklistQuery:{userID:""},listQuery:{agentFindType:3,productAgentid:"",productid:"",name:"",mobile:"",type:1,pageNum:1,pageSize:10},listQuery2:{},table_data:{list:[],loading:!1,pageNum:1,pageSize:10},listLoading:!0,saveLoading:!1,total:0,select_cate:"",select_word:"",del_list:[],is_search:!1,editVisible:!1,form:{name:"",date:"",address:""},idx:-1,selectData:[],authGroupList:[],statusVisible:!1,balanceForm:{balance_002:!1,balance_003:!1,balance_004:!1},balanceNameObj:{},disabled002:!1,disabled003:!1,disabled004:!1,balanceRules:{},newbalanceForm:{},comTitle:"佣金余额",comData:{jyUserMoneyKey:"",productAgentId:""}}},computed:m()({},Object(y.b)(["agentList","user_list","productInfo","appConfig"])),watch:{"productInfo.id":function(e){this.getjyUserMoneyKey()}},mounted:function(){var e=this;this.$nextTick(function(){e.getjyUserMoneyKey(),e.$route.query.agentId&&(e.listQuery.productAgentid=e.$route.query.agentId,e.isDisabled=!1);JSON.parse(Object(f.b)());e.config=JSON.parse(Object(f.a)()),e.uploadUrl=e.config.imageUploadUrl})},methods:(w={pageLoad:function(){this.listQuery.productAgentid?this.isDisabled=!1:this.isDisabled=!0},handleChange:function(e){this.listQuery.productAgentid=e[e.length-1]||"",this.listQuery.productAgentid?this.isDisabled=!1:this.isDisabled=!0},selectAgentFun:function(e,t,a){this.listQuery.productAgentid=e,this.listQuery.agentFindType=t,1===a&&this.pageLoad()},getAccoutList:function(){var e=this;return u()(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=null,t.next=3,Object(h.Jd)(e.accountListQuery);case 3:a=t.sent,e.accountList=a.rows.filter(function(e,t){return"001"!=e.jyUserMoneyKey});case 5:case"end":return t.stop()}},t,e)}))()},getUserCardList:function(){var e=this;Object(h.Hc)(this.banklistQuery).then(function(t){for(var a in e.bankData=t.rows.filter(function(e,t){return"正常"==e.status&&"储蓄卡"==e.cardType}),e.bankData)e.bankCardlist=[],e.bankCardlist.push(e.bankData[a])}).catch(function(e){})},resetForm:function(e){this.$refs[e].resetFields()},beforeRemove1:function(e,t){return this.$confirm("确定移除 "+e.name+"？")},onRemove_openAccountUrl:function(e,t){var a=this;this.autoBalanceForm.invoicePhoto=[],t.forEach(function(e){return a.autoBalanceForm.invoicePhoto.push(e.url)})},handleOpenAccPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},getjyUserMoneyKey:function(){var e=this;Object(h.Q)({productId:JSON.parse(Object(f.b)()).id}).then(function(t){var a=t.rows,n=new l.a;a.map(function(t){e.table_list.map(function(e){e.name.indexOf(t.jyUserMoneyKey)>-1&&(e.label=t.jyUserMoneyName),n.set(t.jyUserMoneyKey,t.jyUserMoneyName)})}),e.searchForm.map(function(e){"type"==e.name&&(e.array=[{value:1,text:"余额"},{value:2,text:n.get("002")},{value:3,text:n.get("003")},{value:4,text:n.get("004")},{value:5,text:"已结算总额"},{value:6,text:"总收益"}])})}).catch(function(e){})},beforeUpload_openAccountUrl:function(e){var t=this,a=new FormData,n=(new Date,Object(g.g)(new Date)+".png");a.append("fileField",e.raw,n),this.$axios.post(this.uploadUrl,a,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){var a=e.data;0===a.code?(t.$message("图片上传成功"),t.autoBalanceForm.invoicePhoto=a.data,t.$refs.ref_pic.clearValidate()):t.$message(data.msg)}).catch(function(e){t.$message("图片上传至服务器失败,请重试！")})},getLevelList:function(e,t){this.levelVisible=!0,this.agentLevelData=t,this.agentLevelData.name=t.userName,this.agentLevelData.id=t.userId},changeLevelVisible:function(e,t,a){this.levelVisible=e,2==t&&(this.levelItem={id:a.userId||a.id})},changeTable:function(){var e=this.table_list.some(function(e){return"effectiveUserType"==e.name}),t=0;"cxPay"!=this.currentProductSign||e?"cxPay"!==this.currentProductSign&&e&&(this.table_list.map(function(e,a){"effectiveUserType"==e.name&&(t=a)}),this.table_list.splice(t,1)):this.table_list.push({type:"stateMuch",label:"是否为有效商户",name:"effectiveUserType",checked:!0,width:"150px",stateMuch:{1:"是",0:"否"}})},getMoney:function(e,t){for(var a in this.accountList)if(this.accountList[a].jyUserMoneyKey==this.autoBalanceForm.jyUserMoneyKey||this.accountList[a].jyUserMoneyKey==this.inMoneyForm.jyUserMoneyKey)switch(this.accountList[a].jyUserMoneyKey){case"002":this.Settleable_amount=this.balance_002;break;case"003":this.Settleable_amount=this.balance_003;break;case"004":this.Settleable_amount=this.balance_004}},setAmountMoney:function(){this.autoBalanceForm.money=this.Settleable_amount},getAuthGroupList:function(){var e=this;this.listLoading=!0,this.$store.dispatch("GetAuthGroup",{lastId:"",name:"",status:1,pageSize:10,pageNum:1,userType:-1}).then(function(t){e.authGroupList=t.rows,e.listLoading=!1})},getData:function(){0},getUserMoneyBalance:function(){var e=this;this.listLoading=!0,this.listQuery.productid=this.productInfo.id,Object(h.Kd)(this.listQuery).then(function(t){e.listLoading=!1,e.total=t.total,e.tableData=t.rows})},select_query:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.table_data.loading=!0;var n=JSON.parse(Object(f.b)());this.listQuery2.productid=n.id,this.listQuery2.productAgentid=this.listQuery.productAgentid,this.listQuery2.type=this.listQuery.type,this.listQuery2.mobile=this.listQuery.mobile,this.listQuery2.name=this.listQuery.name,this.listQuery2.agentFindType=this.listQuery.agentFindType,this.listQuery2.pageNum=t||this.table_data.pageNum,this.listQuery2.pageSize=a||this.table_data.pageSize,this.$store.dispatch("reqUrl_SysData",{reqName:h.Kd,data:this.listQuery2}).then(function(t){e.list=t.rows,e.table_data.list=t.rows,e.table_data.total=t.total,e.table_data.loading=!1,e.table_data.pageNum=e.listQuery2.pageNum,e.table_data.pageSize=e.listQuery2.pageSize,t.rows.length&&(e.balanceNameObj=t.rows[0])})},savePlatformData:function(){var e=this;this.$refs.autoBalanceForm.validate(function(t){if(t){e.saveLoading=!0;var a=e.copy_obj(e.autoBalanceForm);a.money=Object(b.w)(a.money),Object(h.be)(a).then(function(t){e.$message.success(t.msg),e.addVisible=!1,e.saveLoading=!1,e.select_query()}).catch(function(t){e.saveLoading=!1})}})},isTureMoney:function(){"2"==this.inMoneyForm.type&&this.inMoneyForm.money>Number(this.Settleable_amount)?(this.$message.warning("输入金额需小于账户余额"),this.isTrueMoney=!1,this.saveLoading=!1):"1"==this.inMoneyForm.type&&(this.isTrueMoney=!0)},saveInmoneyformData:function(){var e=this;this.$refs.inMoneyForm.validate(function(t){if(!t)return console.log("error submit!!"),e.saveLoading=!1,!1;e.saveLoading=!0;var a=e.copy_obj(e.inMoneyForm);a.money=Object(b.w)(a.money),Object(h.Cb)(a).then(function(t){"0"==t.code?(e.$message.success(t.msg),e.inMoneyVisible=!1,e.saveLoading=!1,e.select_query()):(e.$message.error(t.msg),e.saveLoading=!1)}).catch(function(t){return e.saveLoading=!1,!1})})},listQueryTypeChange:function(e){},search:function(){this.is_search=!0,this.select_query(1)},formatter:function(e,t){return e.address},filterTag:function(e,t){return t.tag===e},sizeChange:function(e){this.listQuery2=this.copy_obj(this.listQuery),this.select_query(1,e)},currentChange:function(e){this.listQuery.pageNum=e,this.select_query(e)},clickData:function(e,t,a,n){switch(a.name){case"userName":this.getLevelList(e,t);break;case"balance_002":case"balance_003":case"balance_004":this.comData.productAgentId=t.userId,"balance_002"==a.name?(this.comTitle="佣金余额",this.comData.jyUserMoneyKey="002"):"balance_003"==a.name?(this.comTitle="达标奖励余额",this.comData.jyUserMoneyKey="003"):(this.comTitle="服务费代收余额",this.comData.jyUserMoneyKey="004"),this.$refs.commission.openDialog();break;default:"2"==n?this.pushPage("agentManage/achievement",{agentId:t.userId,agentFindType:1}):this.pushPage("agentManage/agentTranDetail",{agentId:t.userId,agentFindType:1})}},jumpAgentList:function(){this.isNull(this.selectData)&&(this.$store.commit("SET_PTINFO",this.selectData[0]),this.pushPage("agentManage/agentList",{ptId:this.selectData[0].id}))},isNull:function(e){return 0==e.length?(this.$message.warning("没有选中任何数据"),!1):!(e.length>1)||(this.$message.warning("请选择一条数据"),!1)},formatToYuan:function(e){return void 0==e?(0).toFixed(2):((e-0)/100).toFixed(2)},inMoneyDailogForm:function(){this.isNull(this.selectData)&&(this.inMoneyVisible=!0,this.accountListQuery.userId=this.selectData[0].userId,this.inMoneyForm.userId=this.selectData[0].userId,this.userName=this.selectData[0].userName,this.getAccoutList(),this.balance_002=this.formatToYuan(this.selectData[0].balance_002),this.balance_003=this.formatToYuan(this.selectData[0].balance_003),this.balance_004=this.formatToYuan(this.selectData[0].balance_004))},autoBalanceDailogForm:function(){this.isNull(this.selectData)&&(0==this.selectData[0].balance_002&&0==this.selectData[0].balance_003&&0==this.selectData[0].balance_004?this.$message.warning("当前暂无可结算账户"):(this.accountListQuery.userId=this.selectData[0].userId,this.autoBalanceForm.agentId=this.selectData[0].userId,this.agentName=this.selectData[0].userName,this.banklistQuery.userID=this.selectData[0].userId,this.balance_002=this.formatToYuan(this.selectData[0].balance_002),this.balance_003=this.formatToYuan(this.selectData[0].balance_003),this.balance_004=this.formatToYuan(this.selectData[0].balance_004),this.getAccoutList(),this.getUserCardList(),this.addVisible=!0))}},i()(w,"resetForm",function(e){this.$refs[e].resetFields()}),i()(w,"closeAddDialog",function(){this.resetForm("autoBalanceForm")}),i()(w,"closeMoneyDialog",function(){this.resetForm("inMoneyForm"),this.saveLoading=!1}),i()(w,"handleSelectionChange",function(e){this.selectData=e}),i()(w,"saveEdit",function(){this.$set(this.tableData,this.idx,this.form),this.editVisible=!1,this.$message.success("修改第 "+(this.idx+1)+" 行成功")}),i()(w,"closeStatusDialog",function(){this.newbalanceForm&&this.balanceForm&&(this.newbalanceForm.balance_002==this.balanceForm.balance_002&&this.newbalanceForm.balance_003==this.balanceForm.balance_003&&this.newbalanceForm.balance_004==this.balanceForm.balance_004||this.select_query())}),i()(w,"changeBalanceValue",function(e){var t,a=this,n="";if(n="002"==e?"佣金余额":"003"==e?"达标奖励余额":"服务费代收余额",this["disabled"+e])this.$message.warning("当前账户余额暂无法操作");else{t=this.balanceForm["balance_"+e];var i={id:this.selectData[0]["id_"+e],status:t?1:0};this.$confirm(t?"确定解冻"+n+"吗":"确定冻结"+n+"吗").then(function(t){Object(h.Xd)(i).then(function(t){a.$message.success(t.msg),a.balanceForm["balance_"+e]=!a.balanceForm["balance_"+e]}).catch(function(e){})}).catch(function(e){})}}),i()(w,"btnClickHandle",function(e){switch(e){case"autoClear":this.autoBalanceDailogForm();break;case"inMoney":this.inMoneyDailogForm();break;case"off":if(this.isNull(this.selectData)){var t=this.selectData[0];0==t.id_002?(this.balanceForm.balance_002=!1,this.disabled002=!0):(this.balanceForm.balance_002=1!=t.status_002,this.disabled002=!1),0==t.id_003?(this.balanceForm.balance_003=!1,this.disabled003=!0):(this.balanceForm.balance_003=1!=t.status_003,this.disabled003=!1),0==t.id_004?(this.balanceForm.balance_004=!1,this.disabled004=!0):(this.balanceForm.balance_004=1!=t.status_004,this.disabled004=!1),this.statusVisible=!0,this.newbalanceForm=this.copy_obj(this.balanceForm)}}}),w)},j=(a("h+4h"),Object(L.a)(U,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"table"},[a("div",{staticClass:"container"},[a("query",{attrs:{page:"commissBalance",searchForm:e.searchForm,listQuery:e.listQuery,table_data:e.table_data,levelItem:e.levelItem},on:{handleFilter:e.sizeChange}})],1),e._v(" "),a("PageTable",{ref:"pageTable",attrs:{tableList:e.table_list,tableData:e.table_data,showSummary:!0},on:{clickData:e.clickData,handleSelectionChange:e.handleSelectionChange,sizeChange:e.sizeChange,currentChange:e.currentChange,btnClickHandle:e.btnClickHandle}})],1),e._v(" "),a("el-dialog",{staticClass:"dialog-large",attrs:{"close-on-click-modal":!1,"append-to-body":!0,visible:e.inMoneyVisible,width:"470px",title:"充值","modal-append-to-body":!1,center:""},on:{"update:visible":function(t){e.inMoneyVisible=t},close:e.closeMoneyDialog}},[a("el-form",{ref:"inMoneyForm",attrs:{rules:e.inMoneyRules,model:e.inMoneyForm,"label-width":"140px"}},[a("el-row",{attrs:{gutter:20}},[a("el-form-item",{attrs:{label:"代理商",prop:""}},[a("el-select",{attrs:{disabled:!0},model:{value:e.inMoneyForm.userId,callback:function(t){e.$set(e.inMoneyForm,"userId",t)},expression:"inMoneyForm.userId"}},[a("el-option",{key:"1",attrs:{label:e.userName,value:e.inMoneyForm.userId}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"充值类型",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.inMoneyForm.type,callback:function(t){e.$set(e.inMoneyForm,"type",t)},expression:"inMoneyForm.type"}},[a("el-option",{key:"0",attrs:{label:"充值",value:1}}),e._v(" "),a("el-option",{key:"1",attrs:{label:"扣款",value:2}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"用户账户",prop:"jyUserMoneyKey"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(t){e.getMoney(t,1)}},model:{value:e.inMoneyForm.jyUserMoneyKey,callback:function(t){e.$set(e.inMoneyForm,"jyUserMoneyKey",t)},expression:"inMoneyForm.jyUserMoneyKey"}},e._l(e.accountList,function(e){return a("el-option",{key:e.id,attrs:{value:e.jyUserMoneyKey,label:e.busChannelName}})}))],1),e._v(" "),e.inMoneyForm.jyUserMoneyKey?a("el-form-item",{attrs:{"label-width":"110px"}},[a("el-alert",{staticClass:"el_alert",attrs:{title:"当前账户金额:"+this.Settleable_amount+"元",type:"info","show-icon":"",closable:!1}})],1):e._e(),e._v(" "),e.inMoneyForm.type?a("el-form-item",{attrs:{label:(1==e.inMoneyForm.type?"充值":"扣款")+"金额",prop:"money"}},[a("el-input",{attrs:{placeholder:"请输入金额"},on:{change:function(t){e.isTureMoney()}},model:{value:e.inMoneyForm.money,callback:function(t){e.$set(e.inMoneyForm,"money","string"==typeof t?t.trim():t)},expression:"inMoneyForm.money"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"说明",prop:"content"}},[a("el-input",{attrs:{placeholder:"请输入说明"},model:{value:e.inMoneyForm.content,callback:function(t){e.$set(e.inMoneyForm,"content","string"==typeof t?t.trim():t)},expression:"inMoneyForm.content"}})],1)],1)],1),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",loading:e.saveLoading},on:{click:function(t){e.inMoneyVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",loading:e.saveLoading},on:{click:e.saveInmoneyformData}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{staticClass:"dialog-large",attrs:{"close-on-click-modal":!1,"append-to-body":!0,visible:e.addVisible,width:"470px",title:"手动结算","modal-append-to-body":!1,center:""},on:{"update:visible":function(t){e.addVisible=t},close:e.closeAddDialog}},[a("el-form",{ref:"autoBalanceForm",attrs:{rules:e.rules,model:e.autoBalanceForm,"label-width":"140px"}},[a("el-row",{attrs:{gutter:20}},[a("el-form-item",{attrs:{label:"代理商",prop:""}},[a("el-select",{attrs:{disabled:!0},model:{value:e.autoBalanceForm.agentId,callback:function(t){e.$set(e.autoBalanceForm,"agentId",t)},expression:"autoBalanceForm.agentId"}},[a("el-option",{key:"1",attrs:{label:e.agentName,value:e.autoBalanceForm.agentId}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"用户账户",prop:"jyUserMoneyKey"}},[a("el-select",{ref:"dataNum",attrs:{placeholder:"请选择","data-num":"21","data-user-money-key":"autoBalanceForm.jyUserMoneyKey"},on:{change:function(t){e.getMoney(t)}},model:{value:e.autoBalanceForm.jyUserMoneyKey,callback:function(t){e.$set(e.autoBalanceForm,"jyUserMoneyKey",t)},expression:"autoBalanceForm.jyUserMoneyKey"}},e._l(e.accountList,function(e){return a("el-option",{key:e.id,attrs:{value:e.jyUserMoneyKey,label:e.busChannelName}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"结算金额",prop:"money"}},[a("el-input",{attrs:{placeholder:"请输入结算金额"},model:{value:e.autoBalanceForm.money,callback:function(t){e.$set(e.autoBalanceForm,"money","string"==typeof t?t.trim():t)},expression:"autoBalanceForm.money"}})],1),e._v(" "),e.autoBalanceForm.jyUserMoneyKey?a("el-form-item",{attrs:{"label-width":"110px"}},[a("el-alert",{staticClass:"el_alert",attrs:{title:"当前可结算金额:"+this.Settleable_amount+"元",type:"info","show-icon":"",closable:!1}}),e._v(" "),a("a",{staticClass:"blue",staticStyle:{"padding-left":"2px"},on:{click:function(t){e.setAmountMoney()}}},[e._v("全部结算")])],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"结算卡",prop:"bankCardId"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.autoBalanceForm.bankCardId,callback:function(t){e.$set(e.autoBalanceForm,"bankCardId",t)},expression:"autoBalanceForm.bankCardId"}},e._l(e.bankCardlist,function(e){return a("el-option",{key:e.index,attrs:{value:e.id,label:e.cardNum}})}))],1)],1)],1),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",loading:e.saveLoading},on:{click:function(t){e.addVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",loading:e.saveLoading},on:{click:e.savePlatformData}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{"close-on-click-modal":!1,"append-to-body":!0,visible:e.dialogVisible,title:"图片预览",center:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("img",{attrs:{width:"100%",src:e._f("formatImg")(e.dialogImageUrl),alt:""}})]),e._v(" "),a("agentLevelBox",{attrs:{levelVisible:e.levelVisible,agentLevelData:e.agentLevelData},on:{changeLevelVisible:e.changeLevelVisible}}),e._v(" "),a("el-dialog",{attrs:{"close-on-click-modal":!1,"append-to-body":!0,visible:e.statusVisible,width:"470px",title:"冻结余额"},on:{"update:visible":function(t){e.statusVisible=t},close:e.closeStatusDialog}},[a("el-form",{ref:"balanceForm",staticClass:"balance",attrs:{model:e.balanceForm,rules:e.balanceRules,"label-width":"200px"}},[a("el-form-item",{attrs:{label:e.balanceNameObj.jyUserMoneyName002,prop:"balance_002"}},[a("el-switch",{staticClass:"switch_style",attrs:{disabled:""},nativeOn:{click:function(t){t.preventDefault(),e.changeBalanceValue("002")}},model:{value:e.balanceForm.balance_002,callback:function(t){e.$set(e.balanceForm,"balance_002",t)},expression:"balanceForm.balance_002"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.balanceNameObj.jyUserMoneyName003,prop:"balance_003"}},[a("el-switch",{staticClass:"switch_style",attrs:{disabled:""},nativeOn:{click:function(t){t.preventDefault(),e.changeBalanceValue("003")}},model:{value:e.balanceForm.balance_003,callback:function(t){e.$set(e.balanceForm,"balance_003",t)},expression:"balanceForm.balance_003"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.balanceNameObj.jyUserMoneyName004,prop:"balance_004"}},[a("el-switch",{staticClass:"switch_style",attrs:{disabled:""},nativeOn:{click:function(t){t.preventDefault(),e.changeBalanceValue("004")}},model:{value:e.balanceForm.balance_004,callback:function(t){e.$set(e.balanceForm,"balance_004",t)},expression:"balanceForm.balance_004"}})],1),e._v(" "),a("div",{staticClass:"tipText",staticStyle:{"margin-left":"200px","font-size":"12px"}},[e._v("*开启为冻结，关闭为解冻")])],1),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.statusVisible=!1}}},[e._v("关 闭")])],1)],1),e._v(" "),a("commissionDialog",{ref:"commission",attrs:{comData:e.comData,title:e.comTitle}})],1)},[],!1,null,null,null));j.options.__file="commissBalance.vue";t.default=j.exports},tU6j:function(e,t,a){(e.exports=a("I1BE")(!1)).push([e.i,"\n.blockMoney {\r\n  height: 100px !important;\n}\n.blockMoney span {\r\n  display: inline-block;\r\n  height: 50px;\n}\n.el_alert {\r\n  background-color: rgba(245, 246, 249, 0.05);\r\n  display: inline;\n}\n.switch_style {\r\n  opacity: 1 !important;\n}\n.switch_style .el-switch__core {\r\n  cursor: pointer !important;\n}\r\n",""])},"wk8/":function(e,t,a){"use strict";a.d(t,"b",function(){return i}),a.d(t,"c",function(){return s}),a.d(t,"d",function(){return l}),a.d(t,"f",function(){return o}),a.d(t,"a",function(){return r}),a.d(t,"e",function(){return c}),a.d(t,"g",function(){return u}),a.d(t,"h",function(){return d});var n=a("t3Un");function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n.a)({url:"/api/User/GetProductAgentRewardCXP",method:"post",data:e})}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n.a)({url:"/api/User/GetProductAgentRewardCXYF",method:"post",data:e})}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n.a)({url:"/api/User/GetProductAgentRewardYFT",method:"post",data:e})}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n.a)({url:"/api/User/getBankElementsLogList",method:"post",data:e})}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n.a)({url:"/api/User/GetAgentTask_Combox",method:"post",data:e})}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n.a)({url:"/api/User/GetUserTaskStatistics",method:"post",data:e})}function u(e){return Object(n.a)({url:"/api/User/getUserCouponCount",method:"post",data:e})}function d(e){return Object(n.a)({url:"/api/User/getUserMoneySettleBalance",method:"post",data:e})}}}]);