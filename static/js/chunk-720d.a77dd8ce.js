(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-720d"],{"13zf":function(t,e,a){"use strict";var i=a("v8Sv");a.n(i).a},"22Uh":function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,"\n.margin-l-r-auto[data-v-23d7711a] {\n  margin-left: auto;\n  margin-right: auto;\n}\n.margin-t-20[data-v-23d7711a] {\n  margin-top: 20px;\n}\n.m-t-20[data-v-23d7711a] {\n  margin-top: -20px;\n}\n.margin-b-0[data-v-23d7711a] {\n  margin-bottom: 0 !important;\n}\n.checkbox[data-v-23d7711a] {\n  margin-top: 8px;\n}\n",""])},"2LLf":function(t,e,a){"use strict";a.r(e);var i=a("jWXv"),s=a.n(i),n=a("m1cH"),o=a.n(n),r=a("GQeE"),l=a.n(r),u=a("14Xm"),d=a.n(u),c=a("D3Ub"),p=a.n(c),m=a("QbLZ"),h=a.n(m),y=a("YEIV"),v=a.n(y),f=a("L2JU"),k=a("5pIb"),g=a("7Qib"),b=(a("Yfch"),a("rY9o")),w=a("F0l/"),T=a("X4fA"),F=a("6Uqi"),_=a("PapT"),S={name:"salePerformanceDialog",components:{taskPane:_.a},data:function(){var t=this;return{productAgentList:[],editFormVisibleNew:!1,couponQuery:{productId:"",couponType:0},agentQuery:{productID:"",showType:1,statusType:0},zdCouponList:[],rateZdCouponList:[],posEdit:!1,save_status:!1,listLoading:!1,load_info:!1,tableData:[],selectData:[],dialogTitle:"",saleDataNew:{},taskTypeStatus:{btnTypeStatus:!1,activeStatus:!0},table_data:{list:[],loading:!1,pageNum:1,pageSize:10,total:0},startDate:new Date,endDate:new Date((new Date).setFullYear((new Date).getFullYear()+10)),pickerBeginDateBefore:{disabledDate:function(e){var a=t.endDate;if(a)return e.getTime()>a||e.getTime()<new Date((new Date).setDate((new Date).getDate()-1)).getTime()}},pickerBeginDateAfter:{disabledDate:function(e){var a=t.startDate;if(a)return e.getTime()<a}},tasksmProp:{messionActiveName:"",taskNameArr:[]},editForm:{agentMoney:"",couponCount:"",originalPrice:"",posMoney:"",productAgentid:"",rateZdCouponid:"",saleName:"",zdCouponid:"",posMoneyType:0,posMoneyTaskType:0,descContent:"",activationCardType:"",taskList:[{taskType:1,activationType:"",agentRewardMoney:"",taskDay:"",taskMoney:"",taskName:"第一阶段",taskOnePayMoney:"",taskPayCount:"",userRewardMoney:"",taskOKType:"",rewardType:"",rewardMoney:""}]},taskStatus:1,couponStatus:!1,sign:"",oldUser:0,editRules:{productAgentid:{required:!0,message:"请选择代理商",trigger:"change"},saleName:{required:!0,message:"请输入销售政策名称",trigger:"blur"},couponCount:{validator:this.validatorCouponCount,trigger:"blur"},activationCardType:{required:!0,message:"不能为空",trigger:"change"},posMoney:{required:!0,validator:this.validatorPosPrice,trigger:"blur"},originalPrice:{validator:this.validatorOriginalPrice,trigger:"blur"},agentMoney:{validator:this.validatorAgentMoney,trigger:"blur"},payReward:{validator:this.validatorPayReward,trigger:"blur"},zdCouponid:{validator:this.validatorZdCouponid,trigger:"change"},payRewardType:{validator:this.validatorpayRewardType,trigger:"change"}}}},props:["editFormVisible","saleData","showType","addAgentId"],computed:h()({},Object(f.b)(["agentList","productInfo"]),{parallelStatus:function(){return!!this.editForm.taskList.length&&2==this.editForm.taskList[0].activationType}}),watch:{editFormVisible:function(t,e){var a=this;this.editFormVisibleNew=t,1===this.showType?(this.taskStatus=1,this.dialogTitle="添加销售政策",this.editForm.taskList.length||this.editForm.taskList.push({agentRewardMoney:"",taskDay:"",taskMoney:"",taskName:"第一阶段",taskOnePayMoney:"",taskPayCount:"",userRewardMoney:"",taskOKType:"",rewardType:"",rewardMoney:""}),this.tasksmProp.messionActiveName=this.editForm.taskList[0].taskName,this.tasksmProp.taskNameArr=[],this.tasksmProp.taskNameArr=this.editForm.taskList.map(function(t){return t.taskName}),this.addAgentId&&(this.editForm.productAgentid=this.addAgentId)):(this.oldUser=this.saleData.oldUser,2===this.showType?this.dialogTitle=this.saleData.saleName+"-编辑":this.dialogTitle=this.saleData.saleName+"-详情",t&&(this.saleData.originalPrice=this.saleData.originalPrice?this.fromFormatToYuan(this.saleData.originalPrice):3===this.showType?"--":"",this.saleData.posMoney=this.saleData.posMoney?this.fromFormatToYuan(this.saleData.posMoney):"0.00",this.saleData.agentMoney=this.saleData.agentMoney?this.fromFormatToYuan(this.saleData.agentMoney):"0.00",this.saleData.zdCouponid=this.saleData.zdCouponid?this.saleData.zdCouponid:3===this.showType?"--":"",-1==this.saleData.couponCount&&(this.couponStatus=!0),this.saleData.couponCount=this.saleData.couponCount?-1==this.saleData.couponCount?3===this.showType?"--":"":this.saleData.couponCount:3===this.showType?"--":"",this.saleData.rateZdCouponid=this.saleData.rateZdCouponid?this.saleData.rateZdCouponid:3===this.showType?"--":"",this.startDate=this.saleData.startDate?new Date(this.saleData.startDate.split(" ")[0]):"",this.endDate=this.saleData.endDate?new Date(this.saleData.endDate.split(" ")[0]):"",this.saleData.taskList&&this.saleData.taskList.length?this.taskStatus=1:this.taskStatus=0,this.saleData.taskList.map(function(t){t.rewardMoney=t.agentRewardMoney?a.formatToYuan(t.agentRewardMoney):a.formatToYuan(t.userRewardMoney),t.taskMoney=a.formatToYuan(t.taskMoney),t.taskOnePayMoney=a.formatToYuan(t.taskOnePayMoney),t.rewardType=t.userRewardMoney?2:1}),this.editForm=this.copy_obj(this.saleData))),t&&this.getPageData()},productInfo:function(t,e){t.id!=e.id&&e.id&&(this.setProductID(),this.getPageData())},saleDataNew:{deep:!0,handler:function(t,e){2===this.showType?this.dialogTitle=t.saleName+"-编辑":3===this.showType&&(this.dialogTitle=t.saleName+"-详情")}}},mounted:function(){var t=this;this.$nextTick(function(){t.setProductID()})},methods:{resetForm:function(t){var e=this;this.$emit("close"),this.taskTypeStatus.btnTypeStatus=!1,this.taskTypeStatus.activeStatus=!0,this.taskStatus=1,this.dialogTitle="",this.editForm.agentMoney="",this.editForm.couponCount="",this.editForm.posMoney="",this.editForm.originalPrice="",this.editForm.productAgentid="",this.editForm.rateZdCouponid="",this.editForm.saleName="",this.editForm.zdCouponid="",this.editForm.posMoneyType=0,this.editForm.posMoneyTaskType=0,this.editForm.descContent="",this.editForm.taskList=[],this.editForm.activationCardType="",this.startDate=new Date,this.endDate=new Date((new Date).setFullYear((new Date).getFullYear()+10)),this.$nextTick(function(){e.$refs[t].clearValidate()})},formatToYuan:function(t){return void 0==t?(0).toFixed(2):((t-0)/100).toFixed(2)},toFormatToYuan:function(t){return t?100*(t-0):""},fromFormatToYuan:function(t){return t?((t-0)/100).toFixed(2):""},FeeMultiply10000:function(t){return parseFloat((1e4*t).toPrecision(12))},setProductID:function(){var t=JSON.parse(Object(T.b)());this.agentQuery.productID=t.id,this.couponQuery.productId=t.id,this.sign=t.sign},addTask:function(){if(this.editForm.taskList.length){var t=this.editForm.taskList[0].taskDay,e=this.editForm.taskList.length,a=this.editForm.taskList[0].rewardType;if(!this.editForm.taskList[0].taskDay&&this.parallelStatus)this.tasksmProp.messionActiveName="第一阶段",this.$message.warning("请添写奖励期限");else if(this.editForm.taskList[0].rewardType){var i=this.toChinesNum(e+1);this.editForm.taskList.push({agentRewardMoney:"",taskDay:this.parallelStatus?t:"",taskMoney:"",taskName:"第"+i+"阶段",taskOnePayMoney:"",taskPayCount:"",userRewardMoney:"",taskOKType:"",activationType:"",rewardType:a,rewardMoney:""}),this.tasksmProp.messionActiveName="第"+i+"阶段"}else this.tasksmProp.messionActiveName="第一阶段",this.$message.warning("请选择奖励对象")}else this.editForm.taskList.push({agentRewardMoney:"",taskDay:"",taskMoney:"",taskName:"第一阶段",taskOnePayMoney:"",taskPayCount:"",userRewardMoney:"",taskOKType:"",activationType:"",rewardType:"",rewardMoney:""}),this.tasksmProp.activeName="第一阶段",this.taskStatus=1,this.$message.warning("任务已开启"),this.taskTypeStatus.btnTypeStatus=!1,this.taskTypeStatus.activeStatus=!0;this.tasksmProp.taskNameArr=this.editForm.taskList.map(function(t){return t.taskName})},deleteTask:function(){var t=this;if(1==this.editForm.taskList.length)this.editForm.taskList=[],this.taskStatus=0,this.$message.warning("任务已关闭");else{for(var e=this.editForm.taskList,a=0,i=0;i<e.length;i++)e[i].taskName==this.tasksmProp.messionActiveName&&(a=i,this.editForm.taskList.splice(i,1));this.editForm.taskList.map(function(e,a){e.taskName="第"+t.toChinesNum(a+1)+"阶段"}),this.tasksmProp.messionActiveName=a>1?"第"+this.toChinesNum(a)+"阶段":"第一阶段"}},getPageData:function(){var t=this;return p()(d.a.mark(function e(){var a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=null,e.next=3,Object(k.e)(t.couponQuery);case 3:return a=e.sent,t.zdCouponList=a.rows.filter(function(t){return t.couponMoney>0}),t.rateZdCouponList=a.rows.filter(function(t){return t.couponFee>0}),e.next=8,Object(b.Ac)(t.agentQuery);case 8:a=e.sent,t.productAgentList=a.rows.filter(function(t){return 0!=t.saleType});case 10:case"end":return e.stop()}},e,t)}))()},changetaskStatus:function(t){this.addStatus=!0,this.taskStatus=t,t?(!this.editForm.taskList.length&&this.editForm.taskList.push({agentRewardMoney:"",taskDay:"",taskMoney:"",taskName:"第一阶段",taskOnePayMoney:"",taskPayCount:"",userRewardMoney:"",taskOKType:"",activationType:"",rewardType:"",rewardMoney:""}),this.tasksmProp.messionActiveName="第一阶段",this.taskStatus=1,this.tasksmProp.taskNameArr=this.editForm.taskList.map(function(t){return t.taskName})):this.editForm.taskList=[]},openSubmitPrompt:function(){var t=this;this.$refs.editForm.validate(function(e,a){if(e){t.save_status=!0;var i=t.copy_obj(t.editForm);if(i.agentMoney=t.toFormatToYuan(t.editForm.agentMoney),i.posMoney=t.toFormatToYuan(t.editForm.posMoney),i.originalPrice=t.toFormatToYuan(t.editForm.originalPrice),i.couponCount=t.couponStatus?-1:t.editForm.couponCount-0,t.taskStatus){var n=t.editForm.taskList[0].taskOKType,r="";r=3==n?1:t.editForm.taskList[0].activationType,i.taskList=t.editForm.taskList.map(function(e){return h()({},e,{taskOKType:n,activationType:r,agentRewardMoney:1==e.rewardType?t.toFormatToYuan(e.rewardMoney):0,taskMoney:t.toFormatToYuan(e.taskMoney),taskOnePayMoney:t.toFormatToYuan(e.taskOnePayMoney),userRewardMoney:2==e.rewardType?t.toFormatToYuan(e.rewardMoney):0})})}else i.taskList=[];i.startDate=Object(g.g)(t.startDate)+" 00:00:00",i.endDate=Object(g.g)(t.endDate)+" 23:59:59",i.descContent=t.editForm.descContent,1===t.showType?(i.productid=t.productInfo.id,Object(w.a)(i).then(function(e){t.$emit("refresh"),t.$message.success("添加成功"),t.editFormVisibleNew=!1,t.tasksmProp.taskNameArr=[],t.save_status=!1}).catch(function(e){t.save_status=!1})):2===t.showType&&(i.id=t.saleData.id,Object(w.k)(i).then(function(e){t.$message.success("编辑成功"),t.tasksmProp.taskNameArr=[],t.editFormVisibleNew=!1,t.save_status=!1,t.$emit("refresh")}).catch(function(e){t.save_status=!1}))}else{var u=[];l()(a).map(function(t){var e=t.split(".");e.length>1&&u.push(e[1])}),u.length&&((u=[].concat(o()(new s.a(u)))).sort(function(t,e){return t-e}),t.tasksmProp.messionActiveName=t.tasksmProp.taskNameArr[u[0]])}})},moneyCouponChange:function(t){t||this.$refs.editForm.clearValidate(["couponCount"]),"--"===this.editForm.couponCount&&(this.editForm.couponCount="")},productAgentChange:function(t){var e=this.productAgentList.filter(function(e){return e.value==t});e.length>0&&(this.oldUser=e[0].oldUser)},validatorAgentMoney:function(t,e,a){if(e&&"0"!==e){return/^(([1-9][0-9]*)|(([0]\.\d{1,2}|[1-9][0-9]*\.\d{1,2})))$/.test(e)?a():a(new Error("金额格式不正确"))}a()},validatorPosPrice:function(t,e,a){return e&&"0"!==e?/^(([1-9][0-9]*)|(([0]\.\d{1,2}|[1-9][0-9]*\.\d{1,2})))$/.test(e)&&this.editForm.originalPrice?this.editForm.originalPrice-0-(e-0)>=0?a():a(new Error("POS现价要小于等于POS原价")):a():e?a():a(new Error("请输入POS服务费"))},validatorOriginalPrice:function(t,e,a){this.editForm.posMoney;return e&&"0"!==e?/^(([1-9][0-9]*)|(([0]\.\d{1,2}|[1-9][0-9]*\.\d{1,2})))$/.test(e)?e-0-(this.editForm.posMoney-0)>=0?a():a(new Error("POS原价要大于等于POS现价")):a(new Error("金额格式不正确")):a()},validatorCouponCount:function(t,e,a){return this.editForm.zdCouponid&&!this.couponStatus?e?/^[0-9]*[1-9][0-9]*$/.test(e)?a():a(new Error("请输入大于0的正整数")):a(new Error("请输入优惠券数量")):e?/^[0-9]*[1-9][0-9]*$/.test(e)?a():a(new Error("请输入大于0的正整数")):a()},ValidatorCardType:function(t,e,a){return""===e?a(new Error("请选择限制卡类型")):a()},validatorMoney:function(t,e,a){if(this.taskStatus){var i=t.fullField.split(".")[1],s="";return this.tasksmProp.taskNameArr.map(function(t,e){e==i&&(s=t)}),e||"0"===e?/^(([1-9][0-9]*)|(([0]\.\d{1,2}|[1-9][0-9]*\.\d{1,2})))$/.test(e)||"0"===e?a():(this.tasksmProp.messionActiveName=s,a(new Error("金额格式不正确"))):(this.tasksmProp.messionActiveName=s,a(new Error("不能为空")))}return a()},validatorZdCouponid:function(t,e,a){return this.editForm.couponCount||this.couponStatus?e?a():a(new Error("请选择优惠券")):a()}}},D=(a("duSy"),a("KHd+")),x=Object(D.a)(S,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{"close-on-click-modal":!1,"append-to-body":!0,visible:t.editFormVisibleNew,title:t.dialogTitle,width:"1080px"},on:{"update:visible":function(e){t.editFormVisibleNew=e},close:function(e){t.resetForm("editForm")}}},[a("el-form",{ref:"editForm",staticClass:"saleFrom",attrs:{model:t.editForm,"label-width":"160px","element-loading-text":"Loading",rules:t.editRules}},[a("el-row",{staticClass:"margin-l-r-auto",attrs:{gutter:24}},[a("el-col",{attrs:{xs:12,sm:12}},[a("el-form-item",{attrs:{label:"代理商",prop:"productAgentid"}},[a("el-select",{staticClass:"handle-select select-w-2",attrs:{placeholder:"请选择代理商",disabled:2===t.showType||3===t.showType,filterable:""},on:{change:t.productAgentChange},model:{value:t.editForm.productAgentid,callback:function(e){t.$set(t.editForm,"productAgentid",e)},expression:"editForm.productAgentid"}},t._l(t.productAgentList,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),a("el-col",{attrs:{xs:12,sm:12}},[a("el-form-item",{attrs:{label:"销售政策名称",prop:"saleName"}},[a("el-input",{attrs:{placeholder:"请输入销售政策名称",width:"180px",disabled:3===t.showType},model:{value:t.editForm.saleName,callback:function(e){t.$set(t.editForm,"saleName","string"==typeof e?e.trim():e)},expression:"editForm.saleName"}})],1)],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"有效期",rules:[{required:!0,trigger:"blur"}]}},[a("el-date-picker",{attrs:{editable:!1,type:"date",placeholder:"开始日期","picker-options":t.pickerBeginDateBefore,clearable:!1,width:"80px",disabled:3===t.showType,format:"yyyy-MM-dd"},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}}),t._v(" -\n        "),a("el-date-picker",{attrs:{editable:!1,type:"date",placeholder:"结束日期","picker-options":t.pickerBeginDateAfter,clearable:!1,width:"80px",disabled:3===t.showType,format:"yyyy-MM-dd"},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1),t._v(" "),a("el-row",{staticClass:"margin-l-r-auto border-t margin-t-0",attrs:{gutter:24}},[a("el-col",{attrs:{xs:12,sm:12}},[a("el-form-item",{attrs:{label:"预付POS服务费",prop:"posMoneyType"}},[a("el-radio-group",{staticStyle:{width:"195px"},attrs:{disabled:3===t.showType},model:{value:t.editForm.posMoneyType,callback:function(e){t.$set(t.editForm,"posMoneyType",e)},expression:"editForm.posMoneyType"}},[a("el-radio",{attrs:{label:1}},[t._v("是")]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v("否")])],1)],1),t._v(" "),1==t.oldUser?a("el-form-item",{attrs:{label:"POS服务费原价(元)",prop:"originalPrice"}},[a("el-input",{attrs:{placeholder:"请输入POS服务费原价",disabled:3===t.showType,width:"180px"},model:{value:t.editForm.originalPrice,callback:function(e){t.$set(t.editForm,"originalPrice","string"==typeof e?e.trim():e)},expression:"editForm.originalPrice"}}),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"el-upload__tip"},[t._v("    注:已线下支付")])],1):t._e(),t._v(" "),1==t.oldUser?a("el-form-item",{attrs:{label:"代理商佣金(元)",prop:"agentMoney"}},[a("el-input",{attrs:{placeholder:"请输入代理商佣金(选填)",disabled:3===t.showType},model:{value:t.editForm.agentMoney,callback:function(e){t.$set(t.editForm,"agentMoney","string"==typeof e?e.trim():e)},expression:"editForm.agentMoney "}})],1):t._e()],1),t._v(" "),a("el-col",{attrs:{xs:12,sm:12}},[a("el-form-item",{attrs:{label:"刷卡任务含POS服务费",prop:"posMoneyTaskType"}},[a("el-radio-group",{staticStyle:{width:"195px"},attrs:{disabled:3===t.showType},model:{value:t.editForm.posMoneyTaskType,callback:function(e){t.$set(t.editForm,"posMoneyTaskType",e)},expression:"editForm.posMoneyTaskType"}},[a("el-radio",{attrs:{label:1}},[t._v("是")]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v("否")])],1)],1),t._v(" "),1==t.oldUser?a("el-form-item",{attrs:{label:"POS服务费现价(元)",prop:"posMoney"}},[a("el-input",{attrs:{placeholder:"请输入POS服务费现价",disabled:3===t.showType,width:"180px"},model:{value:t.editForm.posMoney,callback:function(e){t.$set(t.editForm,"posMoney","string"==typeof e?e.trim():e)},expression:"editForm.posMoney"}})],1):t._e()],1)],1),t._v(" "),"cxPay"!=t.sign?a("el-row",{staticClass:"margin-l-r-auto border-t margin-t-0",attrs:{gutter:24}},[a("el-col",{attrs:{xs:12,sm:12}},[a("el-form-item",{attrs:{label:"代付优惠券名称",prop:"zdCouponid"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:3===t.showType},on:{change:t.moneyCouponChange},model:{value:t.editForm.zdCouponid,callback:function(e){t.$set(t.editForm,"zdCouponid",e)},expression:"editForm.zdCouponid"}},[a("el-option",{key:-1,attrs:{value:"",label:"请选择"}}),t._v(" "),t._l(t.zdCouponList,function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.title+"   "+t.formatToYuan(e.couponMoney)+"元   "+e.useDay+"天"}})})],2)],1),t._v(" "),a("el-form-item",{attrs:{label:"费率优惠券名称"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:3===t.showType},model:{value:t.editForm.rateZdCouponid,callback:function(e){t.$set(t.editForm,"rateZdCouponid",e)},expression:"editForm.rateZdCouponid"}},[a("el-option",{key:-1,attrs:{value:"",label:"请选择"}}),t._v(" "),t._l(t.rateZdCouponList,function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.title+"   "+t.FeeMultiply10000(e.couponFee)+"‱   "+e.useDay+"天"}})})],2)],1)],1),t._v(" "),a("el-col",{attrs:{xs:9,sm:9}},[a("el-form-item",{attrs:{label:"代付优惠券数量",prop:"couponCount"}},[a("el-input",{attrs:{placeholder:"请输入优惠券数量",disabled:3===t.showType||t.couponStatus},model:{value:t.editForm.couponCount,callback:function(e){t.$set(t.editForm,"couponCount","string"==typeof e?e.trim():e)},expression:"editForm.couponCount"}})],1)],1),t._v(" "),a("el-col",{attrs:{xs:2,sm:2}},[a("el-checkbox",{staticClass:"checkbox",model:{value:t.couponStatus,callback:function(e){t.couponStatus=e},expression:"couponStatus"}},[t._v("不限制数量")])],1)],1):t._e(),t._v(" "),a("taskPane",{attrs:{messionLoading:!1,lengthStatus:!1,taskProp:t.tasksmProp,taskObj:t.editForm,showType:t.showType,editStatus:!0,taskStatus:t.taskStatus,taskTypeStatus:t.taskTypeStatus}},[a("template",{slot:"agentTask"},[a("el-row",{staticClass:"border-t",attrs:{gutter:24}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"任务数量"}},[a("el-input",{attrs:{placeholder:"",width:"200px",disabled:""},model:{value:t.editForm.taskList.length,callback:function(e){t.$set(t.editForm.taskList,"length","string"==typeof e?e.trim():e)},expression:"editForm.taskList.length"}})],1)],1),t._v(" "),3!==t.showType?a("el-col",{attrs:{span:6}},[a("el-button",{attrs:{size:"small",type:"primary",disabled:t.taskTypeStatus.btnTypeStatus},on:{click:t.addTask}},[t._v("添加")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary",disabled:0==t.editForm.taskList.length||t.taskTypeStatus.btnTypeStatus},on:{click:t.deleteTask}},[t._v("删除")])],1):t._e(),t._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",[a("el-switch",{attrs:{"active-text":"任务开启","inactive-text":"任务关闭","active-value":1,"inactive-value":0,disabled:3===t.showType},on:{change:t.changetaskStatus},model:{value:t.taskStatus,callback:function(e){t.taskStatus=e},expression:"taskStatus"}})],1)],1)],1),t._v(" "),t.taskStatus?a("el-row",{attrs:{span:24}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"限制卡类型",prop:"activationCardType"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:3===t.showType},model:{value:t.editForm.activationCardType,callback:function(e){t.$set(t.editForm,"activationCardType",e)},expression:"editForm.activationCardType"}},[a("el-option",{key:0,attrs:{value:0,label:"POS所有人所有类型银行卡"}}),t._v(" "),a("el-option",{key:4,attrs:{value:4,label:"POS本人认证的信用卡"}}),t._v(" "),a("el-option",{key:5,attrs:{value:5,label:"所有交易类型所有人所有类型银行卡"}})],1)],1)],1)],1):t._e()],1)],2),t._v(" "),a("el-row",{staticClass:"margin-l-r-auto border-t margin-t-20",attrs:{gutter:24}},[a("el-col",{attrs:{xs:24,sm:24}},[a("el-form-item",{attrs:{label:"奖励规则"}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入奖励规则",disabled:3===t.showType},model:{value:t.editForm.descContent,callback:function(e){t.$set(t.editForm,"descContent",e)},expression:"editForm.descContent"}})],1)],1)],1)],1),t._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[3===t.showType?a("el-button",{attrs:{size:"small"},on:{click:function(e){t.resetForm("editForm")}}},[t._v("关 闭")]):t._e(),t._v(" "),1===t.showType||2===t.showType?a("el-button",{attrs:{size:"small"},on:{click:function(e){t.resetForm("editForm")}}},[t._v("取 消")]):t._e(),t._v(" "),1===t.showType||2===t.showType?a("el-button",{attrs:{size:"small",type:"primary",loading:t.save_status},on:{click:t.openSubmitPrompt}},[t._v("确 定")]):t._e()],1)],1)],1)},[],!1,null,"23d7711a",null);x.options.__file="index.vue";var C=x.exports,O={name:"salesPerformance",components:{PageTable:F.a,salePerformanceDialog:C,taskPane:_.a},data:function(){var t,e=this;return t={listQuery:{productAgentid:"",pageSize:10,pageNum:1,saleName:"",status:1,productid:"",startDate:"",endDate:""},startDate:new Date((new Date).setFullYear((new Date).getFullYear()-3)),endDate:new Date,pickerBeginDateBefore:{disabledDate:function(t){var a=e.endDate;if(a)return t.getTime()>a||t.getTime()>(new Date).getTime()}},pickerBeginDateAfter:{disabledDate:function(t){var a=e.startDate;if(a)return t.getTime()<a||t.getTime()>(new Date).getTime()}},currentButton:[],productAgentList:[],editForm_visible:!1,couponQuery:{productId:"",couponType:0},agentQuery:{productID:"",showType:1,statusType:0},zdCouponList:[],rateZdCouponList:[],isEdit:!0,sale_data:{},posEdit:!1,save_status:!1,listLoading:!1,load_info:!1,DetailStatus:!1,tableData:[],selectData:[],dialogTitle:"",addStatus:!1,table_data:{list:[],loading:!1,pageNum:1,pageSize:10,total:0},editForm:{inviteCountReward:"",inviteZdcouponid:"",inviteStatus:0,inviteCountReward_ext:"",inviteZdcouponid_ext:"",invite_extStatus:0,inviteAllMoney:0,inviteExDay:0,inviteRewardType:"",inviteRewardType_ext:"",inviteRewardMoney:"",inviteRewardMoney_ext:""},table_list:[{label:"代理商名称",name:"productAgentName",width:"130px",checked:!0},{type:"tel",label:"手机号",name:"mobile",width:"120px",checked:!0},{type:"",label:"销售政策名称",name:"saleName",width:"120px",checked:!0},{label:"状态",name:"status",type:"stateMuch",stateMuch:{1:"启用",2:"禁用"},width:"115px",checked:!0},{label:"默认销售政策",name:"isDefault",type:"stateMuch",stateMuch:{1:"是",0:"否"},width:"115px",checked:!0},{label:"POS服务费(元)",name:"posMoney",type:"money",width:"150px",checked:!0},{label:"POS服务费原价(元)",name:"originalPrice",type:"moneyZero",width:"150px",checked:!0},{label:"刷卡任务含POS服务费",name:"posMoneyTaskType",type:"stateMuch",stateMuch:{1:"是",0:"否"},width:"150px",checked:!0},{label:"代理商佣金(元)",name:"agentMoney",type:"money",width:"150px",checked:!0},{type:"couponPage",label:"优惠券名称",name:"",width:"250px",checked:!0},{label:"代付优惠券数量",name:"couponCount",width:"110px",checked:!1},{label:"任务数量",type:"taskCount",name:"taskNum",width:"130px",checked:!0},{type:"popover",label:"奖励规则",name:"descContent",width:"200px",checked:!1},{label:"有效期",type:"validityDate",name:"",width:"200px",checked:!1},{label:"添加时间",type:"date",name:"insertDate",width:" 200px",checked:!1}],show_type:1,agentListAfter:!1,addAgent_id:"",reward_visible:!1,setreward_visible:!1,dialogRewardTitle:"",dialogSetRewardTitle:"",multipleTable:[],task_visible:!1,taskNameArr:[],editTaskForm:{saleId:"",taskList:[],activationCardType:""},tasksmProp:{messionActiveName:"",taskNameArr:[]},messionLoading:!1,sign:""},v()(t,"couponQuery",{couponPayType:-1,endDat:null,endPric:0,id:0,lastId:"",pageNum:1,pageSize:10,productId:"",startDate:null,startPrice:0,status:-1,title:""}),v()(t,"sale_table_list",[{label:"商品名称",name:"title",width:"130px",checked:!0},{label:"价格(元)",name:"couponMoney",width:"130px",type:"couponFormatYuan",checked:!0},{label:"费率(万分之)",name:"couponFee",width:"130px",type:"couponFormatWan",checked:!0},{label:"使用条件(元)",name:"minPayMoney",width:"130px",type:"couponFormatYuan",checked:!0},{label:"有效期(天)",name:"useDay",width:"130px",checked:!0}]),v()(t,"coupon_visible",!1),v()(t,"couponButton",[]),v()(t,"sale_table_data",{list:[]}),v()(t,"taskTypeStatus",{btnTypeStatus:!1,activeStatus:!0}),v()(t,"editStatus",!1),v()(t,"editRules",{inviteCountReward:{validator:this.numValidator1,trigger:"blur"},inviteZdcouponid:{validator:this.couponValidator1,trigger:"blur"},inviteStatus:{validator:this.inviteStatusValidator,trigger:"change"},inviteCountReward_ext:{validator:this.numValidator2,trigger:"change"},inviteRewardMoney:{validator:this.inviteRewardMoneyValidator,trigger:"blur"},inviteRewardMoney_ext:{validator:this.inviteRewardMoneyValidator2,trigger:"blur"},inviteZdcouponid_ext:{validator:this.couponValidator2,trigger:"blur"},inviteRewardType:{validator:this.inviteRewardTypeValidator,trigger:"blur"},inviteRewardType_ext:{validator:this.inviteRewardTypeValidator2,trigger:"blur"},inviteAllMoney:[{required:!0,validator:this.inviteAllMoneyValidator,trigger:"blur"}],inviteExDay:{required:!0,validator:this.inviteExDayValidator,trigger:"blur"}}),t},computed:h()({},Object(f.b)(["agentList","productInfo"])),watch:{productInfo:function(t,e){t.id!=e.id&&e.id&&(this.listQuery.productAgentid="",this.agentListAfter=!1,this.setProductID(),this.getAgentPulldownFoo(),this.removeButtonList())}},mounted:function(){var t=this;this.$nextTick(function(){t.setProductID(),t.$route.query.agentId&&(t.listQuery.productAgentid=t.$route.query.agentId,t.agentListAfter=!0),t.$route.query.saleid&&(t.listQuery.id=t.$route.query.saleid),t.$route.query.salename&&(t.listQuery.saleName=t.$route.query.salename),t.getAgentPulldownFoo(),t.removeButtonList()})},methods:{resetForm:function(t){this.$refs[t].resetFields(),this.editForm.agentMoney="",this.editForm.couponCount="",this.editForm.payReward="",this.editForm.payRewardDay="",this.editForm.payRewardSumMoney="",this.editForm.payRewardType=0,this.editForm.posMoney="",this.editForm.productAgentid="",this.editForm.rateZdCouponid="",this.editForm.saleName="",this.editForm.zdCouponid="",this.editForm.isGive=0,this.posEdit=!1,this.DetailStatus=!1},formatToYuan:function(t){return void 0==t?(0).toFixed(2):((t-0)/100).toFixed(2)},toFormatToYuan:function(t){return t?100*(t-0):""},fromFormatToYuan:function(t){return t?((t-0)/100).toFixed(2):""},FeeMultiply10000:function(t){return parseFloat((1e4*t).toPrecision(12))},search:function(){this.table_data.pageNum=this.listQuery.pageNum=1,this.getListData()},getListData:function(){var t=this;this.table_data.loading=this.listLoading=!0,this.listQuery.startDate=Object(g.g)(this.startDate)+" 00:00:00",this.listQuery.endDate=Object(g.g)(this.endDate)+" 23:59:59",Object(w.y)(this.listQuery).then(function(e){t.listQuery.id="",t.tableData=e.rows,t.table_data.list=e.rows,t.table_data.total=t.total=e.total,t.table_data.loading=t.listLoading=!1,!e.rows.length&&t.agentListAfter&&t.add(t.listQuery.productAgentid),t.agentListAfter=!1}).catch(function(e){t.table_data.loading=t.listLoading=!1}),this.selectData=[]},handleSizeChange:function(t){this.table_data.pageSize=this.listQuery.pageSize=t,this.getListData()},handleCurrentChange:function(t){this.table_data.pageNum=this.listQuery.pageNum=t,this.getListData()},changeTaskDay:function(t,e){0==e&&2==this.editTaskForm.taskList[0].activationType&&this.editTaskForm.taskList.map(function(e){e.taskDay=t})},setProductID:function(){var t=JSON.parse(Object(T.b)());this.agentQuery.productID=t.id,this.couponQuery.productId=t.id,this.listQuery.productid=t.id,this.sign=t.sign},removeButtonList:function(){var t=this;Object(g.e)().then(function(e){t.currentButton=e,t.currentButton=t.currentButton.filter(function(t){return"edit"!=t.url}),"cxPay"==t.sign&&(t.currentButton=t.currentButton.filter(function(t){return"setInviteReward"!=t.url}))})},getPageData:function(){var t=this;return p()(d.a.mark(function e(){var a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=null,e.next=3,Object(k.e)(t.couponQuery);case 3:a=e.sent,t.zdCouponList=a.rows.filter(function(t){return t.couponMoney>0}),t.rateZdCouponList=a.rows.filter(function(t){return t.couponFee>0});case 6:case"end":return e.stop()}},e,t)}))()},getZDCouponList:function(t,e){var a=this;this.couponQuery.id=e,this.couponQuery.productId=t.productId,Object(k.f)(this.couponQuery).then(function(t){a.coupon_visible=!0,a.sale_table_data.list=t.rows}).catch(function(t){})},getAgentPulldownFoo:function(){var t=this;Object(b.Ac)(this.agentQuery).then(function(e){t.productAgentList=e.rows.filter(function(t){return 0!=t.saleType}),t.listQuery.productAgentid=t.listQuery.productAgentid?t.listQuery.productAgentid:t.productAgentList[0].value,t.search()}).catch(function(t){})},btnClickHandle:function(t){switch(t){case"add":this.add("");break;case"edit":this.moreDetails(2,"edit");break;case"del":this.changeStatus(3);break;case"on":this.changeStatus(1,"启用");break;case"off":this.changeStatus(2,"禁用");break;case"setInviteReward":this.inviteRewordFoo();break;case"detail":this.moreDetails(3,"detail");break;case"editTask":this.getSaleTaskListDetail();break;case"setDefault":this.setDefault()}},setDefault:function(){var t=this;1==this.selectData.length?this.$confirm("确定将该条数据设为默认吗？").then(function(e){Object(w.T)({id:t.selectData[0].id}).then(function(e){t.$message.success("设置默认成功"),t.search()}).catch(function(t){})}).catch():this.selectData.length>1?this.$message.warning("请选择一条数据"):this.$message.warning("没有选中任何一条数据")},add:function(t){this.addAgent_id=t,this.show_type=1,this.editForm_visible=!0},closeEditFormDialog:function(){this.editForm_visible=!1},closeRewardDialog:function(){this.$refs.editForm.resetFields()},cancleRewordDialog:function(){this.$refs.editForm.resetFields(),this.setreward_visible=!1},changeStatus:function(t,e){var a=this;if(this.selectData.length){var i=[];if(!this.selectData.every(function(t){return 1===t.isUse})||2!==t&&3!==t){if(this.selectData.map(function(t){i.push(t.id)}),1==this.selectData.length&&this.selectData[0].status==t)return void this.$message.warning("已"+e+",不能再"+e);if(this.selectData.length>1&&this.selectData.some(function(e){return e.status==t}))return void this.$message.warning("存在已经"+e+"的数据,请不要勾选"+e+"的数据");this.$store.dispatch("reqUrl_Status",{selectData:this.selectData,statusName:"确定"+(1===t?"启用":2===t?"禁用":"删除")+"吗？",status:t,reqName:w.Q,showFromRes:!0}).then(function(t){a.getListData()}).catch(function(t){})}else this.$message.warning("选中的条目正在使用中，不能进行操作")}else this.$message.warning("没有选中任何数据")},inviteRewordFoo:function(){var t=this;if(this.isNull(this.selectData)){this.setreward_visible=!0,this.getPageData();var e={saleId:this.selectData[0].id};this.dialogSetRewardTitle="邀请奖励-"+this.selectData[0].saleName,Object(w.G)(e).then(function(e){var a=e.data;t.editForm.inviteCountReward=a.inviteCountReward,t.editForm.inviteCountReward_ext=a.inviteCountReward_ext,t.editForm.inviteZdcouponid=1==a.inviteRewardType?a.inviteZdcouponid:"",t.editForm.inviteZdcouponid_ext=1==a.inviteRewardType_ext?a.inviteZdcouponid_ext:"",t.editForm.inviteRewardMoney=2==a.inviteRewardType?t.fromFormatToYuan(a.inviteRewardMoney):"",t.editForm.inviteRewardMoney_ext=2==a.inviteRewardType_ext?t.fromFormatToYuan(a.inviteRewardMoney_ext):"",t.editForm.inviteStatus=a.inviteStatus,t.editForm.invite_extStatus=a.invite_extStatus,t.editForm.inviteAllMoney=t.fromFormatToYuan(a.inviteAllMoney),t.editForm.inviteExDay=a.inviteExDay?a.inviteExDay:"",t.editForm.inviteRewardType=a.inviteRewardType,t.editForm.inviteRewardType_ext=a.inviteRewardType_ext}).catch(function(t){})}},editInviteRewordSave:function(){var t=this;this.$refs.editForm.validate(function(e){if(!e)return!1;t.save_status=!0;var a={id:t.selectData[0].id,inviteCountReward:t.editForm.inviteCountReward,inviteCountReward_ext:t.editForm.inviteCountReward_ext,inviteStatus:t.editForm.inviteStatus,inviteZdcouponid:1==t.editForm.inviteRewardType?t.editForm.inviteZdcouponid:"",inviteZdcouponid_ext:1==t.editForm.inviteRewardType_ext?t.editForm.inviteZdcouponid_ext:"",invite_extStatus:t.editForm.invite_extStatus,inviteExDay:Number(t.editForm.inviteExDay),inviteAllMoney:t.toFormatToYuan(t.editForm.inviteAllMoney),inviteRewardMoney:2==t.editForm.inviteRewardType?t.toFormatToYuan(t.editForm.inviteRewardMoney):"",inviteRewardMoney_ext:2==t.editForm.inviteRewardType_ext?t.toFormatToYuan(t.editForm.inviteRewardMoney_ext):"",inviteRewardType:t.editForm.inviteRewardType,inviteRewardType_ext:t.editForm.inviteRewardType_ext};Object(w.U)(a).then(function(e){t.$message.success("编辑成功"),t.setreward_visible=!1,t.save_status=!1}).catch(function(e){t.save_status=!1})})},changeInvite_extStatus:function(t){t&&!this.editForm.inviteStatus&&(this.editForm.inviteStatus=1)},changeInviteStatus:function(t){!t&&this.editForm.invite_extStatus&&(this.editForm.invite_extStatus=0)},handleSelectionChange:function(t){this.selectData=t},selectionChange:function(t){this.selectData=t},editInviteReword:function(){this.setreward_visible=!0},isGiveChange:function(t){t?(this.posEdit=!0,this.editForm.posMoney="",this.$refs.editForm.clearValidate(["posMoney"])):this.posEdit=!1},handleDetail:function(t,e,a){"couponPage"===a?this.getZDCouponList(t,e):(this.editStatus=!0,this.getSaleTaskList(t.productAgentid,t.id))},getSaleTaskList:function(t,e){var a=this;this.messionLoading=!0,Object(w.J)({productAgentId:t,saleId:e}).then(function(t){if(a.task_visible=!0,a.messionLoading=!1,t.rows.length){var e=t.rows.filter(function(t){return t.userRewardMoney>0}).length,i=1;i=e>0?2:1,t.rows.map(function(t){t.rewardMoney=t.agentRewardMoney?a.formatToYuan(t.agentRewardMoney):a.formatToYuan(t.userRewardMoney),t.taskMoney=a.formatToYuan(t.taskMoney),t.taskOnePayMoney=a.formatToYuan(t.taskOnePayMoney),t.rewardType=i}),a.editTaskForm.taskList=t.rows,a.editTaskForm.activationCardType=t.rows[0].activationCardType,a.tasksmProp.messionActiveName=a.editTaskForm.taskList[0].taskName,a.tasksmProp.taskNameArr=a.editTaskForm.taskList.map(function(t){return t.taskName}),3==a.editTaskForm.taskList[0].taskOKType?a.taskTypeStatus.activeStatus=!0:a.taskTypeStatus.activeStatus=!1}else a.editTaskForm.taskList=[];a.addStatus=!1}).catch(function(t){a.messionLoading=!1})},getSaleTaskListDetail:function(){this.isNull(this.selectData)&&(this.selectData[0].taskNum?(this.editStatus=!1,this.getSaleTaskList(this.selectData[0].productAgentid,this.selectData[0].id)):this.$message.warning("没有任务的销售政策暂不能编辑任务"))},moreDetails:function(t,e){var a=this;this.isNull(this.selectData)&&("edit"==e&&!this.selectData[0].isUse||"detail"==e?Object(w.z)({id:this.selectData[0].id}).then(function(e){a.show_type=t,a.editForm_visible=!0,a.sale_data=e.data}).catch(function(t){}):"edit"==e&&this.selectData[0].isUse&&this.$message.warning("正在使用不可编辑"))},moneyCouponChange:function(t){t||this.$refs.editForm.clearValidate(["couponCount"])},changeTaskType:function(t,e){this.taskTypeStatus.activeStatus=3==t},editTaskMakeSure:function(){var t=this;this.$refs.editTaskForm.validate(function(e,a){if(e){t.save_status=!0;var i=t.copy_obj(t.editTaskForm);i.saleId=t.selectData[0].id,t.editTaskForm.taskList.length?i.taskList=t.editTaskForm.taskList.map(function(e){return h()({},e,{agentRewardMoney:1==e.rewardType?t.toFormatToYuan(e.rewardMoney):0,taskMoney:t.toFormatToYuan(e.taskMoney),taskOnePayMoney:t.toFormatToYuan(e.taskOnePayMoney),userRewardMoney:2==e.rewardType?t.toFormatToYuan(e.rewardMoney):0,activationCardType:t.editTaskForm.activationCardType})}):i.taskList=[],Object(w.l)(i).then(function(e){t.$message.success("编辑成功"),t.task_visible=!1,t.save_status=!1}).catch(function(e){t.save_status=!1})}else{var n=[];l()(a).map(function(t){var e=t.split(".");e.length>1&&n.push(e[1])}),n.length&&((n=[].concat(o()(new s.a(n)))).sort(function(t,e){return t-e}),t.tasksmProp.messionActiveName=t.tasksmProp.taskNameArr[n[0]])}})},addTask:function(){if(this.editTaskForm.taskList.length){var t=this.editTaskForm.taskList[0].taskDay,e=this.editTaskForm.taskList.length,a=this.toChinesNum(e+1),i=this.editTaskForm.taskList[0].activationType,s=this.editTaskForm.taskList[0].rewardType,n=this.editTaskForm.taskList[0].activationType;this.editTaskForm.taskList.push({agentRewardMoney:"",taskDay:1==i?"":t,taskMoney:"",taskName:"第"+a+"阶段",taskOnePayMoney:"",taskPayCount:"",userRewardMoney:"",taskOKType:"",activationType:n,rewardType:s,rewardMoney:""}),this.tasksmProp.messionActiveName="第"+a+"阶段",this.addStatus=!0}else this.editTaskForm.taskList.push({agentRewardMoney:"",taskDay:"",taskMoney:"",taskName:"第一阶段",taskOnePayMoney:"",taskPayCount:"",userRewardMoney:"",taskOKType:"",activationType:"",rewardType:"",rewardMoney:""}),this.tasksmProp.messionActiveName="第一阶段";this.tasksmProp.taskNameArr=this.editTaskForm.taskList.map(function(t){return t.taskName})},deleteTask:function(){var t=this;if(this.addStatus=!0,1==this.editTaskForm.taskList.length)this.editTaskForm.taskList=[];else{for(var e=this.editTaskForm.taskList,a=0,i=0;i<e.length;i++)e[i].taskName==this.tasksmProp.messionActiveName&&(a=i,this.editTaskForm.taskList.splice(i,1));this.editTaskForm.taskList.map(function(e,a){e.taskName="第"+t.toChinesNum(a+1)+"阶段"}),this.tasksmProp.messionActiveName=a>1?"第"+this.toChinesNum(a)+"阶段":"第一阶段"}},numValidator1:function(t,e,a){return this.editForm.inviteStatus?e||"0"==e?/^[0-9]*[1-9][0-9]*$/.test(e)?a():a(new Error("请输入正整数")):""===e?a(new Error("请输入邀请基数")):void 0:e?/^[0-9]*[1-9][0-9]*$/.test(e)?a():a(new Error("请输入正整数")):a()},numValidator2:function(t,e,a){return this.editForm.invite_extStatus?e||"0"==e?/^[0-9]*[1-9][0-9]*$/.test(e)?a():a(new Error("请输入正整数")):""===e?a(new Error("请输入每满邀请基数")):void 0:e?/^[0-9]*[1-9][0-9]*$/.test(e)?a():a(new Error("请输入正整数")):a()},inviteStatusValidator:function(t,e,a){return this.editForm.invite_extStatus&&!e?a(new Error("请开启基础奖励")):a()},couponValidator1:function(t,e,a){return this.editForm.inviteStatus&&1==this.editForm.inviteRewardType?e?a():a(new Error("请选择费率优惠券")):a()},couponValidator2:function(t,e,a,i,s){return this.editForm.invite_extStatus&&1==this.editForm.inviteRewardType_ext?e?a():a(new Error("请选择额外费率优惠券")):a()},inviteRewardTypeValidator:function(t,e,a){return this.editForm.inviteStatus&&!e?a(new Error("请选择奖励方式")):a()},inviteRewardTypeValidator2:function(t,e,a){return this.editForm.invite_extStatus&&!e?a(new Error("请选择奖励方式")):a()},inviteRewardMoneyValidator:function(t,e,a){if(this.editForm.inviteStatus&&2==this.editForm.inviteRewardType){if(e&&"0"!=e){return/^(([1-9][0-9]*)|(([0]\.\d{1,2}|[1-9][0-9]*\.\d{1,2})))$/.test(e)?a():a(new Error("金额格式不正确"))}return"0"==e?a():a(new Error("请输入奖励金额"))}return a()},inviteRewardMoneyValidator2:function(t,e,a){if(this.editForm.invite_extStatus&&2==this.editForm.inviteRewardType_ext){if(e&&"0"!=e){return/^(([1-9][0-9]*)|(([0]\.\d{1,2}|[1-9][0-9]*\.\d{1,2})))$/.test(e)?a():a(new Error("金额格式不正确"))}return"0"==e?a():a(new Error("请输入奖励金额"))}return a()},inviteAllMoneyValidator:function(t,e,a){if(e&&"0"!=e){return/^(([1-9][0-9]*)|(([0]\.\d{1,2}|[1-9][0-9]*\.\d{1,2})))$/.test(e)?a():a(new Error("金额格式不正确"))}return"0"==e?a():a(new Error("请输入邀请激活金额"))},inviteExDayValidator:function(t,e,a){return e&&"0"!=e?/^[0-9]*[1-9][0-9]*$/.test(e)?a():a(new Error("请输入正整数")):"0"==e?a():a(new Error("请输入邀请激活时间"))},isNull:function(t){return 0==t.length?(this.$message.warning("没有选中任何数据"),!1):!(t.length>1)||(this.$message.warning("请选择一条数据"),!1)}}},M=(a("13zf"),Object(D.a)(O,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table"},[a("div",{staticClass:"app-container"},[a("nav",[a("div",{staticClass:"el-row mr10"},[a("div",{staticClass:"nav-select"},[a("div",{staticClass:"nav-select-title"},[t._v("代理商")]),t._v(" "),a("el-select",{staticClass:"handle-select select-w-6",attrs:{placeholder:"请选择代理商",filterable:""},model:{value:t.listQuery.productAgentid,callback:function(e){t.$set(t.listQuery,"productAgentid",e)},expression:"listQuery.productAgentid"}},t._l(t.productAgentList,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-input",{staticClass:"nav-input font-w-7",attrs:{placeholder:"请输入销售政策名称",clearable:!0},model:{value:t.listQuery.saleName,callback:function(e){t.$set(t.listQuery,"saleName",e)},expression:"listQuery.saleName"}},[a("template",{slot:"prepend"},[t._v("销售政策名称")])],2),t._v(" "),a("div",{staticClass:"nav-select"},[a("div",{staticClass:"nav-select-title"},[t._v("状态")]),t._v(" "),a("el-select",{staticClass:"handle-select select-w-4",attrs:{placeholder:"全部"},model:{value:t.listQuery.status,callback:function(e){t.$set(t.listQuery,"status",e)},expression:"listQuery.status"}},[a("el-option",{key:"0",attrs:{label:"全部",value:0}}),t._v(" "),a("el-option",{key:"1",attrs:{label:"启用",value:1}}),t._v(" "),a("el-option",{key:"2",attrs:{label:"禁用",value:2}})],1)],1),t._v(" "),a("div",{staticClass:"nav-select"},[a("div",{staticClass:"nav-select-title"},[t._v("添加时间")]),t._v(" "),a("el-date-picker",{attrs:{editable:!1,type:"date",placeholder:"开始日期","picker-options":t.pickerBeginDateBefore},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}}),t._v(" -\n          "),a("el-date-picker",{attrs:{editable:!1,type:"date",placeholder:"结束日期","picker-options":t.pickerBeginDateAfter},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1),t._v(" "),a("el-button",{staticClass:"margin-t-20 search",attrs:{type:"primary",icon:"search"},on:{click:t.search}},[t._v("查询")])],1)]),t._v(" "),a("PageTable",{attrs:{indexID:!0,noIndex:!0,tableList:t.table_list,tableData:t.table_data,currentButton:t.currentButton},on:{handleSelectionChange:t.handleSelectionChange,sizeChange:t.handleSizeChange,currentChange:t.handleCurrentChange,btnClickHandle:t.btnClickHandle,clickData:t.handleDetail}})],1),t._v(" "),a("salePerformanceDialog",{attrs:{editFormVisible:t.editForm_visible,showType:t.show_type,saleData:t.sale_data,addAgentId:t.addAgent_id},on:{refresh:t.search,close:t.closeEditFormDialog}}),t._v(" "),a("el-dialog",{attrs:{"close-on-click-modal":!1,visible:t.setreward_visible,title:t.dialogSetRewardTitle,width:"1100px"},on:{"update:visible":function(e){t.setreward_visible=e},close:t.closeRewardDialog}},[a("el-form",{ref:"editForm",attrs:{model:t.editForm,"label-width":"130px","element-loading-text":"Loading",rules:t.editRules}},[a("el-row",{staticClass:"margin-l-r-auto",attrs:{gutter:20}},[a("el-col",{attrs:{xs:24,sm:24}},[a("div",{staticClass:"margin-b-10"},[t._v("激活规则")])]),t._v(" "),a("el-col",{attrs:{xs:8,sm:8}},[a("el-form-item",{attrs:{label:"刷卡金额(元)",prop:"inviteAllMoney"}},[a("el-input",{attrs:{placeholder:"请输入金额"},model:{value:t.editForm.inviteAllMoney,callback:function(e){t.$set(t.editForm,"inviteAllMoney","string"==typeof e?e.trim():e)},expression:"editForm.inviteAllMoney"}})],1)],1),t._v(" "),a("el-col",{attrs:{xs:9,sm:9}},[a("el-form-item",{attrs:{label:"时间(天)",prop:"inviteExDay"}},[a("el-input",{attrs:{placeholder:"请输入时间"},model:{value:t.editForm.inviteExDay,callback:function(e){t.$set(t.editForm,"inviteExDay","string"==typeof e?e.trim():e)},expression:"editForm.inviteExDay"}})],1)],1)],1),t._v(" "),a("el-row",{staticClass:"margin-l-r-auto border-t",attrs:{gutter:20}},[a("el-col",{attrs:{xs:24,sm:24}},[a("div",{staticClass:"margin-b-10"},[t._v("基础邀请奖励规则")])]),t._v(" "),a("el-col",{attrs:{xs:8,sm:8}},[a("el-form-item",{attrs:{label:"邀请基数(人)",prop:"inviteCountReward"}},[a("el-input",{attrs:{placeholder:"请输入邀请基数(人)"},model:{value:t.editForm.inviteCountReward,callback:function(e){t.$set(t.editForm,"inviteCountReward","string"==typeof e?e.trim():e)},expression:"editForm.inviteCountReward"}})],1),t._v(" "),1==t.editForm.inviteRewardType?a("el-form-item",{attrs:{label:"费率优惠券",prop:"inviteZdcouponid"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.editForm.inviteZdcouponid,callback:function(e){t.$set(t.editForm,"inviteZdcouponid",e)},expression:"editForm.inviteZdcouponid"}},[a("el-option",{key:0,attrs:{value:0,label:"请选择"}}),t._v(" "),t._l(t.rateZdCouponList,function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.title+"   "+t.FeeMultiply10000(e.couponFee)+"‱   "+e.useDay+"天"}})})],2)],1):2==t.editForm.inviteRewardType?a("el-form-item",{attrs:{label:"奖励金额",prop:"inviteRewardMoney"}},[a("el-input",{attrs:{placeholder:"请输入奖励金额"},model:{value:t.editForm.inviteRewardMoney,callback:function(e){t.$set(t.editForm,"inviteRewardMoney","string"==typeof e?e.trim():e)},expression:"editForm.inviteRewardMoney"}})],1):t._e()],1),t._v(" "),a("el-col",{attrs:{xs:9,sm:9}},[a("el-form-item",{attrs:{label:"奖励类型",prop:"inviteRewardType"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.editForm.inviteRewardType,callback:function(e){t.$set(t.editForm,"inviteRewardType",e)},expression:"editForm.inviteRewardType"}},[a("el-option",{key:0,attrs:{value:0,label:"请选择"}}),t._v(" "),a("el-option",{key:1,attrs:{value:1,label:"优惠券"}},[t._v("优惠券")]),t._v(" "),a("el-option",{key:2,attrs:{value:2,label:"奖励金"}},[t._v("奖励金")])],1)],1)],1),t._v(" "),a("el-col",{staticClass:"switchStyle",attrs:{xs:7,sm:7}},[a("el-form-item",{attrs:{prop:"inviteStatus"}},[a("el-switch",{attrs:{"active-text":"开启","inactive-text":"关闭","active-value":1,"inactive-value":0},on:{change:t.changeInviteStatus},model:{value:t.editForm.inviteStatus,callback:function(e){t.$set(t.editForm,"inviteStatus",e)},expression:"editForm.inviteStatus"}})],1)],1)],1),t._v(" "),a("el-row",{staticClass:"margin-l-r-auto border-t",attrs:{gutter:20}},[a("el-col",{attrs:{xs:24,sm:24}},[a("div",{staticClass:"margin-b-10"},[t._v("额外邀请奖励规则")])]),t._v(" "),a("el-col",{attrs:{xs:8,sm:8}},[a("el-form-item",{attrs:{label:"每满邀请基数(人)",prop:"inviteCountReward_ext"}},[a("el-input",{attrs:{placeholder:"请输入每满邀请基数(人)"},model:{value:t.editForm.inviteCountReward_ext,callback:function(e){t.$set(t.editForm,"inviteCountReward_ext","string"==typeof e?e.trim():e)},expression:"editForm.inviteCountReward_ext"}})],1),t._v(" "),1==t.editForm.inviteRewardType_ext?a("el-form-item",{attrs:{label:"额外费率优惠券",prop:"inviteZdcouponid_ext"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.moneyCouponChange},model:{value:t.editForm.inviteZdcouponid_ext,callback:function(e){t.$set(t.editForm,"inviteZdcouponid_ext",e)},expression:"editForm.inviteZdcouponid_ext"}},[a("el-option",{key:0,attrs:{value:0,label:"请选择"}}),t._v(" "),t._l(t.rateZdCouponList,function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.title+"   "+t.FeeMultiply10000(e.couponFee)+"‱   "+e.useDay+"天"}})})],2)],1):2==t.editForm.inviteRewardType_ext?a("el-form-item",{attrs:{label:"奖励金额",prop:"inviteRewardMoney_ext"}},[a("el-input",{attrs:{placeholder:"请输入奖励金额"},model:{value:t.editForm.inviteRewardMoney_ext,callback:function(e){t.$set(t.editForm,"inviteRewardMoney_ext","string"==typeof e?e.trim():e)},expression:"editForm.inviteRewardMoney_ext"}})],1):t._e()],1),t._v(" "),a("el-col",{attrs:{xs:9,sm:9}},[a("el-form-item",{attrs:{label:"奖励类型",prop:"inviteRewardType_ext"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.editForm.inviteRewardType_ext,callback:function(e){t.$set(t.editForm,"inviteRewardType_ext",e)},expression:"editForm.inviteRewardType_ext"}},[a("el-option",{key:0,attrs:{value:0,label:"请选择"}}),t._v(" "),a("el-option",{key:1,attrs:{value:1,label:"优惠券"}},[t._v("优惠券")]),t._v(" "),a("el-option",{key:2,attrs:{value:2,label:"奖励金"}},[t._v("奖励金")])],1)],1)],1),t._v(" "),a("el-col",{staticClass:"switchStyle",attrs:{xs:7,sm:7}},[a("el-form-item",{attrs:{prop:"invite_extStatus"}},[a("el-switch",{attrs:{"active-text":"开启","inactive-text":"关闭","active-value":1,"inactive-value":0},on:{change:t.changeInvite_extStatus},model:{value:t.editForm.invite_extStatus,callback:function(e){t.$set(t.editForm,"invite_extStatus",e)},expression:"editForm.invite_extStatus"}})],1)],1)],1)],1),t._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"margin-t-20",attrs:{size:"small",type:"primary",loading:t.save_status},on:{click:t.editInviteRewordSave}},[t._v("保存")]),t._v(" "),a("el-button",{staticClass:"margin-t-20",attrs:{size:"small",type:""},on:{click:t.cancleRewordDialog}},[t._v("取消")])],1)],1),t._v(" "),a("el-dialog",{attrs:{"close-on-click-modal":!1,visible:t.task_visible,title:"任务显示",width:"1100px"},on:{"update:visible":function(e){t.task_visible=e}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.messionLoading,expression:"messionLoading"}],ref:"editTaskForm",attrs:{model:t.editTaskForm,"label-width":"150px","element-loading-text":"Loading"}},[a("taskPane",{attrs:{messionLoading:!1,lengthStatus:!1,taskObj:t.editTaskForm,taskProp:t.tasksmProp,showType:2,editStatus:!0,taskTypeStatus:t.taskTypeStatus,activationTypeStatus:!1,addStatus:t.addStatus}},[a("template",{slot:"agentTask"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{xs:12,sm:12}},[a("el-form-item",{attrs:{label:"任务数量"}},[a("el-input",{attrs:{placeholder:"",width:"200px",disabled:""},model:{value:t.editTaskForm.taskList.length,callback:function(e){t.$set(t.editTaskForm.taskList,"length","string"==typeof e?e.trim():e)},expression:"editTaskForm.taskList.length"}})],1)],1),t._v(" "),a("el-col",{attrs:{xs:12,sm:12}},[t.editStatus?t._e():a("el-button",{attrs:{size:"small",type:"primary",disabled:t.taskTypeStatus.btnTypeStatus},on:{click:t.addTask}},[t._v("添加")]),t._v(" "),t.editStatus?t._e():a("el-button",{attrs:{size:"small",type:"primary",disabled:t.editTaskForm.taskList.length<2},on:{click:t.deleteTask}},[t._v("删除")])],1)],1),t._v(" "),a("el-row",{attrs:{span:24}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"限制卡类型",prop:"activationCardType",rules:[{required:!0,trigger:"change",message:"不能为空"}]}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.editTaskForm.activationCardType,callback:function(e){t.$set(t.editTaskForm,"activationCardType",e)},expression:"editTaskForm.activationCardType"}},[a("el-option",{key:0,attrs:{value:0,label:"POS所有人所有类型银行卡"}}),t._v(" "),a("el-option",{key:4,attrs:{value:4,label:"POS本人认证的信用卡"}}),t._v(" "),a("el-option",{key:5,attrs:{value:5,label:"所有交易类型所有人所有类型银行卡"}})],1)],1)],1)],1)],1)],2)],1),t._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[t.editStatus?a("el-button",{attrs:{size:"small"},on:{click:function(e){t.task_visible=!1}}},[t._v("关 闭")]):t._e(),t._v(" "),t.editStatus?t._e():a("el-button",{attrs:{size:"small"},on:{click:function(e){t.task_visible=!1}}},[t._v("取 消")]),t._v(" "),t.editStatus?t._e():a("el-button",{attrs:{size:"small",type:"primary",loading:t.save_status},on:{click:t.editTaskMakeSure}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{"close-on-click-modal":!1,visible:t.coupon_visible,title:"优惠券",width:"1100px","append-to-body":!0},on:{"update:visible":function(e){t.coupon_visible=e}}},[a("PageTable",{attrs:{tableList:t.sale_table_list,tableData:t.sale_table_data,noButton:!0,indexID:!0,noIndex:!0,noSelection:!0}}),t._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.coupon_visible=!1}}},[t._v("关 闭")])],1)],1)],1)},[],!1,null,"434bdfe6",null));M.options.__file="salesPerformance.vue";e.default=M.exports},"5pIb":function(t,e,a){"use strict";a.d(e,"a",function(){return s}),a.d(e,"b",function(){return n}),a.d(e,"c",function(){return o}),a.d(e,"d",function(){return r}),a.d(e,"e",function(){return l}),a.d(e,"f",function(){return u}),a.d(e,"g",function(){return d}),a.d(e,"h",function(){return c}),a.d(e,"i",function(){return p}),a.d(e,"j",function(){return m}),a.d(e,"k",function(){return h}),a.d(e,"l",function(){return y}),a.d(e,"m",function(){return v});var i=a("t3Un");function s(t){return Object(i.a)({url:"/api/Shop/AddZDCoupon",method:"post",data:t})}function n(t){return Object(i.a)({url:"/api/Shop/AddZDCouponPayType",method:"post",data:t})}function o(t){return Object(i.a)({url:"/api/Shop/DeleteZDCoupon",method:"post",data:t})}function r(t){return Object(i.a)({url:"/api/Shop/DeleteZDCouponPayType",method:"post",data:t})}function l(t){return Object(i.a)({url:"/api/Shop/GetZDCouponCombo",method:"post",data:t})}function u(t){return Object(i.a)({url:"/api/Shop/GetZDCouponList",method:"post",data:t})}function d(t){return Object(i.a)({url:"/api/Shop/GetZDCouponPayTypeCombo",method:"post",data:t})}function c(t){return Object(i.a)({url:"/api/Shop/GetZDCouponPayTypeList",method:"post",data:t})}function p(t){return Object(i.a)({url:"/api/Shop/SetStatusZDCoupon",method:"post",data:t})}function m(t){return Object(i.a)({url:"/api/Shop/SetStatusZDCouponPayType",method:"post",data:t})}function h(t){return Object(i.a)({url:"/api/Shop/UpdateZDCoupon",method:"post",data:t})}function y(t){return Object(i.a)({url:"/api/Shop/UpdateZDCouponPayType",method:"post",data:t})}function v(t){return Object(i.a)({url:"/api/Shop/getZDCouponPullList",method:"post",data:t})}},"6yXn":function(t,e,a){var i=a("22Uh");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a("SZ7m").default)("10a9fc9e",i,!0,{})},"7IsT":function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,"\n.margin-l-r-auto[data-v-434bdfe6] {\n  margin-left: auto;\n  margin-right: auto;\n}\n.margin-t-20[data-v-434bdfe6] {\n  margin-top: 20px;\n}\n.margin-b-10[data-v-434bdfe6] {\n  margin-bottom: 10px;\n}\n.border-t[data-v-434bdfe6] {\n  border-top: 1px solid #b4d7ff;\n  padding-top: 20px;\n  /* padding-bottom: 20px; */\n}\n.switchStyle[data-v-434bdfe6] {\n  height: 34px !important;\n  line-height: 34px !important;\n}\n",""])},"7cVu":function(t,e,a){"use strict";var i=a("M6kW");a.n(i).a},"F0l/":function(t,e,a){"use strict";a.d(e,"O",function(){return n}),a.d(e,"e",function(){return o}),a.d(e,"n",function(){return r}),a.d(e,"h",function(){return l}),a.d(e,"K",function(){return u}),a.d(e,"E",function(){return d}),a.d(e,"I",function(){return c}),a.d(e,"o",function(){return p}),a.d(e,"B",function(){return m}),a.d(e,"g",function(){return h}),a.d(e,"b",function(){return y}),a.d(e,"V",function(){return v}),a.d(e,"p",function(){return f}),a.d(e,"N",function(){return k}),a.d(e,"kb",function(){return g}),a.d(e,"D",function(){return b}),a.d(e,"c",function(){return w}),a.d(e,"R",function(){return T}),a.d(e,"C",function(){return F}),a.d(e,"S",function(){return _}),a.d(e,"M",function(){return S}),a.d(e,"L",function(){return D}),a.d(e,"y",function(){return x}),a.d(e,"z",function(){return C}),a.d(e,"a",function(){return O}),a.d(e,"k",function(){return M}),a.d(e,"T",function(){return L}),a.d(e,"x",function(){return P}),a.d(e,"F",function(){return j}),a.d(e,"Q",function(){return R}),a.d(e,"J",function(){return A}),a.d(e,"u",function(){return N}),a.d(e,"f",function(){return $}),a.d(e,"q",function(){return E}),a.d(e,"j",function(){return Z}),a.d(e,"t",function(){return B}),a.d(e,"d",function(){return I}),a.d(e,"i",function(){return Y}),a.d(e,"m",function(){return Q}),a.d(e,"r",function(){return z}),a.d(e,"s",function(){return V}),a.d(e,"G",function(){return U}),a.d(e,"U",function(){return G}),a.d(e,"l",function(){return q}),a.d(e,"A",function(){return K}),a.d(e,"w",function(){return H}),a.d(e,"P",function(){return J}),a.d(e,"jb",function(){return W}),a.d(e,"Y",function(){return X}),a.d(e,"db",function(){return tt}),a.d(e,"Z",function(){return et}),a.d(e,"ib",function(){return at}),a.d(e,"v",function(){return it}),a.d(e,"gb",function(){return st}),a.d(e,"eb",function(){return nt}),a.d(e,"X",function(){return ot}),a.d(e,"W",function(){return rt}),a.d(e,"lb",function(){return lt}),a.d(e,"ab",function(){return ut}),a.d(e,"cb",function(){return dt}),a.d(e,"fb",function(){return ct}),a.d(e,"H",function(){return pt}),a.d(e,"hb",function(){return mt}),a.d(e,"bb",function(){return ht});var i=a("t3Un"),s="SysData";function n(t){return Object(i.a)({url:"/api/"+s+"/GetZDBankList",method:"post",data:t})}function o(t){return Object(i.a)({url:"/api/"+s+"/AddZDBank",method:"post",data:t})}function r(t){return Object(i.a)({url:"/api/"+s+"/EditZDBank",method:"post",data:t})}function l(t){return Object(i.a)({url:"/api/"+s+"/DelZDBank",method:"post",data:t})}function u(t){return Object(i.a)({url:"/api/"+s+"/GetSysBusChannel",method:"post",data:t})}function d(t){return Object(i.a)({url:"/api/"+s+"/GetBusChannelList",method:"post",data:t})}function c(t){return Object(i.a)({url:"/api/"+s+"/GetProductZDBusChannel",method:"post",data:t})}function p(t){return Object(i.a)({url:"/api/"+s+"/EditZDBankBusChannel",method:"post",data:t})}function m(t){return Object(i.a)({url:"/api/"+s+"/GetBannerSettingList",method:"post",data:t})}function h(t){return Object(i.a)({url:"/api/"+s+"/DelBannerSetting",method:"post",data:t})}function y(t){return Object(i.a)({url:"/api/"+s+"/AddBannerSetting",method:"post",data:t})}function v(t){return Object(i.a)({url:"/api/"+s+"/UpdateBannerSetting",method:"post",data:t})}function f(t){return Object(i.a)({url:"/api/"+s+"/EditZDBankBusChannelStatus",method:"post",data:t})}function k(t){return Object(i.a)({url:"/api/"+s+"/GetZDBankByID",method:"post",data:t})}function g(t){return Object(i.a)({url:"/api/"+s+"/getZDBusTranType ",method:"post",data:t})}function b(t){return Object(i.a)({url:"/api/"+s+"/GetBlackBankCardList",method:"post",data:t})}function w(t){return Object(i.a)({url:"/api/"+s+"/AddBlackBankCard",method:"post",data:t})}function T(t){return Object(i.a)({url:"/api/"+s+"/SetBlackBankCard",method:"post",data:t})}function F(t){return Object(i.a)({url:"/api/"+s+"/GetBlackBankCardById",method:"post",data:t})}function _(t){return Object(i.a)({url:"/api/"+s+"/SetBlackBankCardStatus",method:"post",data:t})}function S(t){return Object(i.a)({url:"/api/"+s+"/GetSysProvinceList",method:"post",data:t})}function D(t){return Object(i.a)({url:"/api/"+s+"/GetSysCityList",method:"post",data:t})}function x(t){return Object(i.a)({url:"/api/"+s+"/GetAgentSaleTplList",method:"post",data:t})}function C(t){return Object(i.a)({url:"/api/"+s+"/GetAgentSaleTplOne",method:"post",data:t})}function O(t){return Object(i.a)({url:"/api/"+s+"/AddAgentSaleTpl",method:"post",data:t})}function M(t){return Object(i.a)({url:"/api/"+s+"/EditAgentSaleTpl",method:"post",data:t})}function L(t){return Object(i.a)({url:"/api/"+s+"/SetDefaultAgentSaleTpl",method:"post",data:t})}function P(t){return Object(i.a)({url:"/api/"+s+"/GetAgentSaleTpl",method:"post",data:t})}function j(t){return Object(i.a)({url:"/api/"+s+"/GetCustSaleTpl",method:"post",data:t})}function R(t){return Object(i.a)({url:"/api/"+s+"/SetAgentSaleTplStatus",method:"post",data:t})}function A(t){return Object(i.a)({url:"/api/"+s+"/GetSaleTaskList",method:"post",data:t})}function N(t){return Object(i.a)({url:"/api/"+s+"/FindZDConfig",method:"post",data:t})}function $(t){return Object(i.a)({url:"/api/"+s+"/AddZDConfig",method:"post",data:t})}function E(t){return Object(i.a)({url:"/api/"+s+"/EditZDConfig",method:"post",data:t})}function Z(t){return Object(i.a)({url:"/api/"+s+"/DeleteZDConfig",method:"post",data:t})}function B(t){return Object(i.a)({url:"/api/"+s+"/FindUserPayConfig",method:"post",data:t})}function I(t){return Object(i.a)({url:"/api/"+s+"/AddUserPayConfig ",method:"post",data:t})}function Y(t){return Object(i.a)({url:"/api/"+s+"/DeleteUserPayConfig",method:"post",data:t})}function Q(t){return Object(i.a)({url:"/api/"+s+"/EditUserPayConfig",method:"post",data:t})}function z(){return Object(i.a)({url:"/api/"+s+"/FindAllConfigKey",method:"post"})}function V(t){return Object(i.a)({url:"/api/"+s+"/FindContent",method:"post",data:t})}function U(t){return Object(i.a)({url:"/api/"+s+"/GetInvitationAward",method:"post",data:t})}function G(t){return Object(i.a)({url:"/api/"+s+"/SetInvitationAward",method:"post",data:t})}function q(t){return Object(i.a)({url:"/api/"+s+"/EditSaleTask",method:"post",data:t})}function K(t){return Object(i.a)({url:"/api/"+s+"/GetAgentUsableSale_Combox",method:"post",data:t})}function H(t){return Object(i.a)({url:"/api/"+s+"/GetAgentSaleTaskList",method:"post",data:t})}function J(t){return Object(i.a)({url:"/api/"+s+"/SetAgentSaleTask",method:"post",data:t})}function W(t){return Object(i.a)({url:"/api/"+s+"/getPOSCollectionLimit",method:"post",data:t})}function X(t){return Object(i.a)({url:"/api/"+s+"/addPOSCollectionLimit",method:"post",data:t})}function tt(t){return Object(i.a)({url:"/api/"+s+"/editPOSCollectionLimit",method:"post",data:t})}function et(t){return Object(i.a)({url:"/api/"+s+"/deletePOSCollectionLimit",method:"post",data:t})}function at(t){return Object(i.a)({url:"/api/"+s+"/getPOSCheckAccount",method:"post",data:t})}function it(t){return Object(i.a)({url:"/api/"+s+"/GetAgentSaleAllocate_Combox",method:"post",data:t})}function st(t){return Object(i.a)({url:"/api/"+s+"/getBusinessList",method:"post",data:t})}function nt(t){return Object(i.a)({url:"/api/"+s+"/editjhBusiness",method:"post",data:t})}function ot(t){return Object(i.a)({url:"/api/"+s+"/addOnejhBusiness",method:"post",data:t})}function rt(t){return Object(i.a)({url:"/api/"+s+"/addManyjhBusiness",method:"post",data:t})}function lt(t){return Object(i.a)({url:"/api/"+s+"/openjhBusiness",method:"post",data:t})}function ut(t){return Object(i.a)({url:"/api/"+s+"/deljhBusiness",method:"post",data:t})}function dt(t){return Object(i.a)({url:"/api/"+s+"/editJHBusinessShowType",method:"post",data:t})}function ct(t){return Object(i.a)({url:"/api/"+s+"/findDropDown",method:"post",data:t})}function pt(t){return Object(i.a)({url:"/api/"+s+"/GetInviteDataNew",method:"post",data:t})}function mt(t){return Object(i.a)({url:"/api/"+s+"/getCheckAccountSettleList",method:"post",data:t})}function ht(t){return Object(i.a)({url:"/api/"+s+"/editCheckResult",method:"post",data:t})}},HkCA:function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,"\n.no-margin[data-v-77e40ad3] {\n  margin-bottom: 0 !important;\n}\n.select100[data-v-77e40ad3] {\n  width: 100% !important;\n}\n",""])},M6kW:function(t,e,a){var i=a("HkCA");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a("SZ7m").default)("5b0ee4d4",i,!0,{})},PapT:function(t,e,a){"use strict";var i={name:"taskPane",data:function(){return{}},props:{messionLoading:{default:!1},taskObj:{default:function(){return{taskList:[]}}},taskProp:{default:{messionActiveName:"第一阶段",taskNameArr:[]}},editStatus:{default:!0},userStatus:{default:!0},customerShow:{default:!1},taskListListL:{default:1},showType:{default:1},taskStatus:{default:1},taskTypeStatus:{default:{btnTypeStatus:!1,activeStatus:!1}},dialog:{default:!0},activationTypeStatus:{default:!0},addStatus:{defailt:!1}},watch:{"taskObj.taskList":function(t){2!=this.showType&&3!=this.showType||!t.length||(!this.addStatus&&(this.taskProp.messionActiveName=this.taskObj.taskList[0].taskName),this.taskObj.taskList.length&&(this.taskProp.taskNameArr=this.taskObj.taskList.map(function(t){return t.taskName})),t.length&&(2==t[0].taskOKType||4==t[0].taskOKType)||1==t[0].taskOKType?(this.taskTypeStatus.btnTypeStatus=!1,this.taskTypeStatus.activeStatus=!1):(this.taskTypeStatus.btnTypeStatus=!0,this.taskTypeStatus.activeStatus=!0))}},mounted:function(){2!=this.showType&&3!=this.showType||!this.taskObj.taskList.length||(this.taskProp.messionActiveName=this.taskObj.taskList[0].taskName,this.taskObj.taskList.length&&2==this.taskObj.taskList[0].taskOKType||4==this.taskObj.taskList[0].taskOKType||1==this.taskObj.taskList[0].taskOKType?(this.taskTypeStatus.btnTypeStatus=!1,this.taskTypeStatus.activeStatus=!1):(this.taskTypeStatus.btnTypeStatus=!0,this.taskTypeStatus.activeStatus=!0),this.taskProp.taskNameArr=this.taskObj.taskList.map(function(t){return t.taskName}))},methods:{changeTaskType:function(t,e){if(3==t?(this.taskTypeStatus.btnTypeStatus=!0,this.taskTypeStatus.activeStatus=!0):(this.taskTypeStatus.btnTypeStatus=!1,this.taskTypeStatus.activeStatus=!1),this.taskObj.taskList[e].rewardType=2==t||4==t?2:"",3==t&&this.taskObj.taskList.length>1){var a=this.taskObj.taskList.filter(function(t){return"第一阶段"==t.taskName});a.length?this.taskObj.taskList=a:this.taskObj.taskList=this.taskObj.taskList[0],this.taskProp.messionActiveName=this.taskObj.taskList[0].taskName,this.taskProp.taskNameArr=this.taskObj.taskList.map(function(t){return t.taskName})}this.taskObj.taskList.map(function(e){e.taskOKType=t})},taskDayInput:function(t){if(2==this.taskObj.taskList[0].activationType){var e=this.taskObj.taskList[0].taskDay;this.taskObj.taskList.map(function(t){t.taskDay=e})}},formatToYuan:function(t){return void 0==t?(0).toFixed(2):((t-0)/100).toFixed(2)},toFormatToYuan:function(t){return t?100*(t-0):""},fromFormatToYuan:function(t){return t?((t-0)/100).toFixed(2):""},FeeMultiply10000:function(t){return parseFloat((1e4*t).toPrecision(12))},validatorPayRewardDay:function(t,e,a){return this.taskStatus?e||"0"==e?/^[0-9]*[1-9][0-9]*$/.test(e)||"0"==e?a():a(new Error("请输入正整数")):a(new Error("不能为空")):a()},validatorMoney:function(t,e,a){return this.taskStatus?e||"0"===e?/^(([1-9][0-9]*)|(([0]\.\d{1,2}|[1-9][0-9]*\.\d{1,2})))$/.test(e)||"0"===e?a():a(new Error("金额格式不正确")):a(new Error("不能为空")):a()},validatorPayRewardCount:function(t,e,a){return this.taskStatus?e||"0"==e?/^[0-9]*[1-9][0-9]*$/.test(e)||"0"==e?a():a(new Error("请输入正整数")):a(new Error("不能为空")):a()},changeRewardType:function(t){var e=this;this.taskObj.taskList.map(function(t){t.rewardType=e.taskObj.taskList[0].rewardType})},changeActiveType:function(t){if(2==t){var e=this.taskObj.taskList[0].taskDay;this.taskObj.taskList.map(function(t){t.taskDay=e})}},changeTaskDay:function(t,e){0==e&&this.taskObj.taskList.map(function(e){e.taskDay=t}),0==e&&2==this.taskObj.taskList[0].activationType&&this.taskObj.taskList.map(function(e){e.taskDay=t})}}},s=(a("7cVu"),a("KHd+")),n=Object(s.a)(i,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._t("taskLength"),t._v(" "),t._t("agentTask"),t._v(" "),t.taskStatus?a("div",[a("el-tabs",{attrs:{type:"border-card"},model:{value:t.taskProp.messionActiveName,callback:function(e){t.$set(t.taskProp,"messionActiveName",e)},expression:"taskProp.messionActiveName"}},t._l(t.taskObj.taskList,function(e,i){return a("el-tab-pane",{key:i,attrs:{label:e.taskName,name:e.taskName}},[0==i?a("el-row",{class:{"no-margin":!t.dialog},attrs:{gutter:20}},[a("el-col",{attrs:{xs:12,sm:12}},[a("el-form-item",{attrs:{label:"任务类型",prop:"taskList."+i+".taskOKType",rules:[{required:!0,trigger:"change",message:"不能为空"}]}},[a("el-select",{staticClass:"select100",attrs:{placeholder:"请选择",disabled:3===t.showType},on:{change:function(e){t.changeTaskType(e,i)}},model:{value:e.taskOKType,callback:function(a){t.$set(e,"taskOKType",a)},expression:"item.taskOKType"}},[a("el-option",{key:1,attrs:{value:1,label:"常规返现任务"}},[t._v("常规返现任务")]),t._v(" "),a("el-option",{key:2,attrs:{value:2,label:"服务费返现任务(未达标奖励给所属代理商)"}},[t._v("服务费返现任务(未达标奖励给所属代理商)")]),t._v(" "),a("el-option",{key:3,attrs:{value:3,label:"无限次数任务"}},[t._v("无限次数任务")]),t._v(" "),a("el-option",{key:4,attrs:{value:4,label:"服务费返现任务(未达标奖励给一级代理商)"}},[t._v("服务费返现任务(未达标奖励给一级代理商)")])],1)],1)],1),t._v(" "),t.taskTypeStatus.activeStatus?t._e():a("el-col",{attrs:{xs:12,sm:12}},[a("el-form-item",{attrs:{label:"后续任务激活方式",prop:"taskList."+i+".activationType",rules:[{required:!0,trigger:"change",message:"不能为空"}]}},[a("el-select",{staticClass:"select100",attrs:{placeholder:"请选择",disabled:3===t.showType||!t.activationTypeStatus},on:{change:t.changeActiveType},model:{value:e.activationType,callback:function(a){t.$set(e,"activationType",a)},expression:"item.activationType"}},[a("el-option",{key:1,attrs:{value:1,label:"到期激活"}},[t._v("到期激活")]),t._v(" "),a("el-option",{key:2,attrs:{value:2,label:"并行任务"}},[t._v("并行任务")])],1)],1)],1)],1):t._e(),t._v(" "),a("el-row",{staticClass:"margin-l-r-auto",attrs:{gutter:20}},[a("el-col",{attrs:{xs:12,sm:12}},[a("el-form-item",{attrs:{label:"奖励期限(天)",prop:"taskList."+i+".taskDay",rules:[{required:!0,trigger:"blur",validator:t.validatorPayRewardDay}]}},[a("el-input",{attrs:{placeholder:"请输入奖励期限",width:"200px",disabled:3===t.showType||i>0&&2==t.taskObj.taskList[0].activationType},on:{input:function(e){t.changeTaskDay(e,i)}},model:{value:e.taskDay,callback:function(a){t.$set(e,"taskDay","string"==typeof a?a.trim():a)},expression:"item.taskDay"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"累计金额条件(元)",prop:"taskList."+i+".taskMoney",rules:[{required:!0,trigger:"blur",validator:t.validatorMoney}]}},[a("el-input",{attrs:{placeholder:"请输入累计金额条件",width:"200px",disabled:3===t.showType},model:{value:e.taskMoney,callback:function(a){t.$set(e,"taskMoney","string"==typeof a?a.trim():a)},expression:"item.taskMoney"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"奖励对象",prop:"taskList."+i+".rewardType",rules:[{required:!0,trigger:"change",message:"不能为空"}]}},[a("el-select",{staticClass:"select100",attrs:{placeholder:"请选择",disabled:3===t.showType||0!==i||2==e.taskOKType||4==e.taskOKType},on:{change:t.changeRewardType},model:{value:e.rewardType,callback:function(a){t.$set(e,"rewardType",a)},expression:"item.rewardType"}},[a("el-option",{key:1,attrs:{value:1,label:"代理商"}}),t._v(" "),a("el-option",{key:2,attrs:{value:2,label:"商户"}})],1)],1)],1),t._v(" "),a("el-col",{attrs:{xs:12,sm:12}},[a("el-form-item",{attrs:{label:"单笔金额条件(元)",prop:"taskList."+i+".taskOnePayMoney",rules:[{required:!0,trigger:"blur",validator:t.validatorMoney}]}},[a("el-input",{attrs:{placeholder:"请输入单笔金额条件",width:"200px",disabled:3===t.showType},model:{value:e.taskOnePayMoney,callback:function(a){t.$set(e,"taskOnePayMoney","string"==typeof a?a.trim():a)},expression:"item.taskOnePayMoney"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"累计次数条件(次)",prop:"taskList."+i+".taskPayCount",rules:[{required:!0,trigger:"blur",validator:t.validatorPayRewardCount}]}},[a("el-input",{attrs:{placeholder:"请输入累计次数条件",width:"200px",disabled:3===t.showType},model:{value:e.taskPayCount,callback:function(a){t.$set(e,"taskPayCount","string"==typeof a?a.trim():a)},expression:"item.taskPayCount"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"奖励金额(元)",prop:"taskList."+i+".rewardMoney",rules:[{required:!0,trigger:"blur",validator:t.validatorMoney}]}},[a("el-input",{attrs:{placeholder:"请输入奖励金额",width:"200px",disabled:t.editStatus?3===t.showType:t.editStatus},model:{value:e.rewardMoney,callback:function(a){t.$set(e,"rewardMoney","string"==typeof a?a.trim():a)},expression:"item.rewardMoney"}}),t._v(" "),t.editStatus?t._e():a("div",{staticClass:"red-small"},[t._v("最大不能超过"+t._s(t._f("formatToYuan")(e.agentRewardMaxMoney)))])],1)],1)],1)],1)}))],1):a("div",[a("el-row",{attrs:{gutter:20}},[a("el-col",{staticClass:"text-center margin-t-20",attrs:{xs:24}},[t._v("没有任务")])],1)],1)],2)},[],!1,null,"77e40ad3",null);n.options.__file="index.vue";e.a=n.exports},"RU/L":function(t,e,a){a("Rqdy");var i=a("WEpk").Object;t.exports=function(t,e,a){return i.defineProperty(t,e,a)}},Rqdy:function(t,e,a){var i=a("Y7ZC");i(i.S+i.F*!a("jmDH"),"Object",{defineProperty:a("2faE").f})},SEkw:function(t,e,a){t.exports={default:a("RU/L"),__esModule:!0}},YEIV:function(t,e,a){"use strict";e.__esModule=!0;var i=function(t){return t&&t.__esModule?t:{default:t}}(a("SEkw"));e.default=function(t,e,a){return e in t?(0,i.default)(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}},duSy:function(t,e,a){"use strict";var i=a("6yXn");a.n(i).a},v8Sv:function(t,e,a){var i=a("7IsT");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a("SZ7m").default)("5bb3c018",i,!0,{})}}]);