(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-a316"],{AWdR:function(t,e,n){"use strict";var a=n("b0uZ");n.n(a).a},EE8g:function(t,e,n){"use strict";n.r(e);var a=n("L2JU"),r=n("QbLZ"),o=n.n(r),i=n("rY9o"),l=n("xMja"),u=(n("X4fA"),n("XINx")),s=n("Yfch"),c={name:"chengxiangPlus",props:["productId"],directives:{elDragDialog:u.a},data:function(){return{type:1,rewardList:[],oneCardContinuitySubmit:null,loading:!1,addLoading:!1,cxPlusVisible:!1,cxForm:{oneCardContinuitySubmit:0,productId:""},copecxForm:{},activeTab:"",rewardForm:{busChannelid:"",currentData:[]},rewardCount:[],tranCount:[],feeLevel:[],busChannels:[],busChannelsId:[]}},computed:o()({},Object(a.b)([""])),mounted:function(){var t=this;this.$nextTick(function(){t.pageLoad()})},methods:{pageLoad:function(){this.GetProductCustDataCXPL()},GetProductCustDataCXPL:function(){var t=this;this.loading=!0,Object(i.J)({id:this.productId}).then(function(e){t.loading=!1,t.rewardCount=[],t.tranCount=[],t.feeLevel=[],t.rewardList=e.data.custData;var n={};for(var a in e.data.custData.直推奖励)(n={}).count=e.data.custData.直推奖励[a].count,n.rate="",n.serviceFee="",t.rewardCount.push(n);for(var a in e.data.custData.交易奖励)n={},t.tranCount.push(Object(s.v)(e.data.custData.交易奖励[a].paymoneysum));for(var a in e.data.custData.CXPLSetting)t.feeLevel.push(e.data.custData.CXPLSetting[a].level);t.oneCardContinuitySubmit=e.data.oneCardContinuitySubmit,t.cxForm.oneCardContinuitySubmit=t.oneCardContinuitySubmit}).catch(function(e){t.loading=!1})},getTransductiveBusChannelList:function(){var t=this,e={productID:this.productId};Object(l.y)(e).then(function(e){e.rows&&e.rows.length&&(t.busChannels=e.rows)}).catch(function(t){})},getChannelList:function(t,e){var n=this;this.addLoading=!0,t({productID:this.productId}).then(function(t){n.addLoading=!1,t.rows&&t.rows.length?(n.busChannels=t.rows,n.openAddFoo()):n.$message.warning("没有可以添加的通道"),e&&e()}).catch(function(t){n.addLoading=!1})},tabClick:function(t){t.index},openAdd:function(t){this.type=t,1==t?this.getChannelList(l.y):2==t?this.getChannelList(l.w):this.getChannelList(l.t)},openAddFoo:function(){if(this.cxPlusVisible=!0,this.rewardForm.busChannelid="",this.rewardForm.currentData=[],1==this.type)this.rewardForm.currentData=this.rewardCount;else if(2==this.type)for(var t in this.tranCount){var e={};e.paymoneysum=this.tranCount[t],e.rate="",e.serviceFee="",this.rewardForm.currentData.push(e)}else if(3==this.type)for(var n in this.feeLevel){var a={};a.level=this.feeLevel[n],a.rate="",a.serviceFee="",this.rewardForm.currentData.push(a)}},addMakeSure:function(){1==this.type?this.addChannel(l.r):2==this.type?this.addChannel(l.q):3==this.type&&this.addChannel(l.p)},setUpdateFee:function(){var t=this;this.$refs.cxForm.validate(function(e){e&&(t.cxForm.productId=t.productId,t.loading=!0,Object(i.ub)(t.cxForm).then(function(e){t.$message.success(e.msg),t.loading=!1}).catch(function(e){t.loading=!1}))})},reset:function(){this.cxForm.oneCardContinuitySubmit=this.oneCardContinuitySubmit},closeDialog:function(){this.cxPlusVisible=!1,this.$refs.rewardForm.resetFields()},addChannel:function(t){var e=this;this.$refs.rewardForm.validate(function(n){if(n){e.loading=!0;var a=e.rewardForm.currentData.map(function(t){var n={};return 1!=e.type&&2!=e.type||(n.serviceFee=t.serviceFee?Object(s.w)(t.serviceFee):0,n.rate=t.rate?Object(s.i)(t.rate):0),1==e.type?n.count=t.count:2==e.type&&(n.paymoneysum=Object(s.w)(t.paymoneysum)),3==e.type&&(n.billRate=t.billRate?Object(s.i)(t.billRate):0,n.level=t.level,n.singleRate=t.singleRate?Object(s.w)(t.singleRate):0),n}),r={};r=1==e.type||2==e.type?{id:e.productId,busChannelid:e.rewardForm.busChannelid,rateInfos:a}:{id:e.productId,busChannelid:e.rewardForm.busChannelid,rates:a},t(r).then(function(t){e.loading=!1,e.$message.success("添加成功"),e.cxPlusVisible=!1,e.GetProductCustDataCXPL()}).catch(function(t){e.cxPlusVisible=!1,e.loading=!1})}})},validatorAgentMoney:function(t,e,n){if(e&&""!==e){if(0==e)return n();return/^(([1-9][0-9]*)|(([0]\.\d{1,2}|[1-9][0-9]*\.\d{1,2})))$/.test(e)?n():n(new Error("格式不正确"))}n(new Error((3==this.type?"结算手续费":"手续费")+"不能为空"))},validatorIntFee:function(t,e,n){if(e&&""!==e){if(0==e)return n();return/^(([1-9][0-9]*)|(([0]\.\d{1,2}|[1-9][0-9]*\.\d{1,2})))$/.test(e)?e<1e4?n():n(new Error((3==this.type?"收款":"")+"费率只能小于10000")):n(new Error("请输入正确的"+(3==this.type?"收款":"")+"费率"))}n(new Error((3==this.type?"收款费率":"费率")+"不能为空"))},btnClickHandle:function(t){t}}},d=(n("AWdR"),n("KHd+")),p=Object(d.a)(c,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"table"},[n("el-row",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[n("el-tabs",{staticClass:"margin-t-20",attrs:{type:"border-card"},on:{"tab-click":t.tabClick}},[n("el-tab-pane",{attrs:{label:"直推奖励"}},[n("el-row",[n("el-button",{attrs:{type:"primary",size:"mini",loading:t.addLoading},on:{click:function(e){t.openAdd(1)}}},[t._v("添加")])],1),t._v(" "),n("el-table",{attrs:{data:t.rewardList.直推奖励,border:""}},[n("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-table",{staticClass:"table-width",attrs:{data:e.row.rateInfo,border:""}},[n("el-table-column",{attrs:{label:"通道名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.busChannelName))]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"费率(万分之)",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("formatEmptyValue")(e.row.rate)))]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"服务费(元)",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.serviceFee||0==e.row.serviceFee?n("span",[t._v(t._s(t._f("formatToYuan")(e.row.serviceFee)))]):n("span",[t._v("--")])]}}])})],1)]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"直推人数",prop:"busChannelid"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.count))]}}])})],1)],1),t._v(" "),n("el-tab-pane",{attrs:{label:"交易奖励"}},[n("el-row",[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.openAdd(2)}}},[t._v("添加")])],1),t._v(" "),n("el-table",{attrs:{data:t.rewardList.交易奖励,border:""}},[n("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-table",{staticClass:"table-width",attrs:{data:e.row.rateInfo,border:""}},[n("el-table-column",{attrs:{label:"通道名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.busChannelName))]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"费率(万分之)",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("formatEmptyValue")(e.row.rate)))]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"服务费(元)",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.serviceFee||0==e.row.serviceFee?n("span",[t._v(t._s(t._f("formatToYuan")(e.row.serviceFee)))]):n("span",[t._v("--")])]}}])})],1)]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"交易金额(元)",prop:"rateInfo"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("formatToYuan")(e.row.paymoneysum)))]}}])})],1)],1),t._v(" "),n("el-tab-pane",{attrs:{label:"费率模板"}},[n("el-row",[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.openAdd(3)}}},[t._v("添加")])],1),t._v(" "),n("el-table",{attrs:{data:t.rewardList.CXPLSetting,border:""}},[n("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-table",{staticClass:"table-width",attrs:{data:e.row.rate,border:""}},[n("el-table-column",{attrs:{label:"通道名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.busChannelName))]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"收款费率(万分之)",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("formatEmptyValue")(e.row.billRate)))]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"结算手续费(元)",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.singleRate||0==e.row.singleRate?n("span",[t._v(t._s(t._f("formatToYuan")(e.row.singleRate)))]):n("span",[t._v("--")])]}}])})],1)]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"等级",prop:"level"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.level))]}}])})],1)],1),t._v(" "),n("el-tab-pane",{attrs:{label:"其它设置"}},[n("el-form",{ref:"cxForm",attrs:{"auto-complete":"off",model:t.cxForm}},[n("el-form-item",{attrs:{label:"同一张卡是否连续提交收款计划"}},[n("el-radio-group",{model:{value:t.cxForm.oneCardContinuitySubmit,callback:function(e){t.$set(t.cxForm,"oneCardContinuitySubmit",e)},expression:"cxForm.oneCardContinuitySubmit"}},[n("el-radio",{attrs:{label:0}},[t._v("是")]),t._v(" "),n("el-radio",{attrs:{label:1}},[t._v("否")])],1)],1)],1),t._v(" "),n("div",{staticStyle:{"margin-left":"100px"}},[n("el-button",{attrs:{size:"small"},on:{click:t.reset}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{size:"small",type:"primary",loading:t.loading},on:{click:t.setUpdateFee}},[t._v("确 定")])],1)],1)],1)],1),t._v(" "),n("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{"close-on-click-modal":!1,"append-to-body":!0,visible:t.cxPlusVisible,title:"添加"+(1==t.type?"直推奖励":2==t.type?"交易奖励":"费率模板")+"通道",width:"800px"},on:{"update:visible":function(e){t.cxPlusVisible=e},close:t.closeDialog}},[n("div",[n("el-form",{ref:"rewardForm",attrs:{model:t.rewardForm,"label-width":"140px"}},[n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"通道",prop:"busChannelid",rules:[{required:!0,message:"请选择通道",trigger:"change"}]}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:t.rewardForm.busChannelid,callback:function(e){t.$set(t.rewardForm,"busChannelid",e)},expression:"rewardForm.busChannelid"}},t._l(t.busChannels,function(t){return n("el-option",{key:t.busChannelid,attrs:{label:t.busChannelName,value:t.busChannelid}})}))],1)],1)],1),t._v(" "),n("div",t._l(t.rewardForm.currentData,function(e,a){return n("el-row",{key:a},[n("el-col",[1==t.type?n("div",{staticClass:"reward-title"},[t._v(t._s(e.count)+"人")]):t._e(),t._v(" "),2==t.type?n("div",{staticClass:"reward-title"},[t._v(t._s(t._f("formatToYuan")(e.paymoneysum))+"元")]):t._e(),t._v(" "),3==t.type?n("div",{staticClass:"reward-title"},[t._v(t._s(e.level)+"级")]):t._e()]),t._v(" "),1==t.type||2==t.type?n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"费率(万分之)",prop:"currentData."+a+".rate",rules:[{required:!0,trigger:"blur",validator:t.validatorIntFee}]}},[n("el-input",{attrs:{placeholder:"请输入费率"},model:{value:e.rate,callback:function(n){t.$set(e,"rate","string"==typeof n?n.trim():n)},expression:"item.rate"}})],1)],1):t._e(),t._v(" "),1==t.type||2==t.type?n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"手续费(元)",prop:"currentData."+a+".serviceFee",rules:[{required:!0,trigger:"blur",validator:t.validatorAgentMoney}]}},[n("el-input",{attrs:{placeholder:"请输入手续费"},model:{value:e.serviceFee,callback:function(n){t.$set(e,"serviceFee","string"==typeof n?n.trim():n)},expression:"item.serviceFee"}})],1)],1):t._e(),t._v(" "),3==t.type?n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"收款费率(万分之)",prop:"currentData."+a+".billRate",rules:[{required:!0,trigger:"blur",validator:t.validatorIntFee}]}},[n("el-input",{attrs:{placeholder:"收款费率"},model:{value:e.billRate,callback:function(n){t.$set(e,"billRate","string"==typeof n?n.trim():n)},expression:"item.billRate"}})],1)],1):t._e(),t._v(" "),3==t.type?n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"结算手续费(元)",prop:"currentData."+a+".singleRate",rules:[{required:!0,trigger:"blur",validator:t.validatorAgentMoney}]}},[n("el-input",{attrs:{placeholder:"请输入结算手续费"},model:{value:e.singleRate,callback:function(n){t.$set(e,"singleRate","string"==typeof n?n.trim():n)},expression:"item.singleRate"}})],1)],1):t._e()],1)}))],1)],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small"},on:{click:function(e){t.closeDialog()}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{size:"small",type:"primary",loading:t.loading},on:{click:function(e){t.addMakeSure()}}},[t._v("确 定")])],1)])],1)},[],!1,null,"7590caca",null);p.options.__file="chengxiangPlus.vue";var f={name:"rewardFeeList",components:{chengxiangPlus:p.exports},data:function(){return{tag:"",productId:""}},mounted:function(){var t=this;this.$nextTick(function(){t.pageLoad()})},methods:{pageLoad:function(){this.tag=this.$route.query.tag,this.productId=this.$route.query.productId}}},m=Object(d.a)(f,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"app-container"},["cxPlus"==this.tag?e("chengxiangPlus",{attrs:{productId:this.productId}}):e("div",[this._v("暂无配置")])],1)},[],!1,null,null,null);m.options.__file="rewardFeeList.vue";e.default=m.exports},XINx:function(t,e,n){"use strict";var a={bind:function(t,e,n){var a=t.querySelector(".el-dialog__header"),r=t.querySelector(".el-dialog");a.style.cssText+=";cursor:move;",r.style.cssText+=";top:0px;";var o=window.document.currentStyle?function(t,e){return t.currentStyle[e]}:function(t,e){return getComputedStyle(t,!1)[e]};a.onmousedown=function(t){var e=t.clientX-a.offsetLeft,i=t.clientY-a.offsetTop,l=r.offsetWidth,u=r.offsetHeight,s=document.body.clientWidth,c=document.body.clientHeight,d=r.offsetLeft,p=s-r.offsetLeft-l,f=r.offsetTop,m=c-r.offsetTop-u,b=o(r,"left"),h=o(r,"top");b.includes("%")?(b=+document.body.clientWidth*(+b.replace(/\%/g,"")/100),h=+document.body.clientHeight*(+h.replace(/\%/g,"")/100)):(b=+b.replace(/\px/g,""),h=+h.replace(/\px/g,"")),document.onmousemove=function(t){var a=t.clientX-e,o=t.clientY-i;-a>d?a=-d:a>p&&(a=p),-o>f?o=-f:o>m&&(o=m),r.style.cssText+=";left:"+(a+b)+"px;top:"+(o+h)+"px;",n.child.$emit("dragDialog")},document.onmouseup=function(t){document.onmousemove=null,document.onmouseup=null}}}},r=function(t){t.directive("el-drag-dialog",a)};window.Vue&&(window["el-drag-dialog"]=a,Vue.use(r)),a.install=r;e.a=a},b0uZ:function(t,e,n){var a=n("hZ3g");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,n("SZ7m").default)("e4ab6c98",a,!0,{})},hZ3g:function(t,e,n){(t.exports=n("I1BE")(!1)).push([t.i,"\n.border[data-v-7590caca] {\r\n  border: 1px solid #eee;\r\n  width: 220px;\r\n  padding: 0 10px;\n}\n.el-icon[data-v-7590caca] {\r\n  margin-top: 0px !important;\n}\n.table-width[data-v-7590caca] {\r\n  width: 800px;\n}\n.reward-title[data-v-7590caca] {\r\n  /* padding-left: 20px;\r\n  font-size: 16px;\r\n  margin-top: 15px; */\r\n  height: 34px;\r\n  line-height: 34px;\r\n  padding-left: 50px;\n}\n.busChannel-box[data-v-7590caca] el-col {\r\n  margin-bottom: 0 !important;\n}\r\n",""])},xMja:function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"f",function(){return o}),n.d(e,"i",function(){return i}),n.d(e,"a",function(){return l}),n.d(e,"t",function(){return u}),n.d(e,"y",function(){return s}),n.d(e,"w",function(){return c}),n.d(e,"r",function(){return d}),n.d(e,"q",function(){return p}),n.d(e,"p",function(){return f}),n.d(e,"d",function(){return m}),n.d(e,"k",function(){return b}),n.d(e,"v",function(){return h}),n.d(e,"u",function(){return v}),n.d(e,"x",function(){return g}),n.d(e,"s",function(){return y}),n.d(e,"n",function(){return _}),n.d(e,"m",function(){return C}),n.d(e,"c",function(){return w}),n.d(e,"j",function(){return x}),n.d(e,"l",function(){return P}),n.d(e,"g",function(){return F}),n.d(e,"o",function(){return S}),n.d(e,"h",function(){return L}),n.d(e,"e",function(){return k});var a=n("t3Un");function r(t){return Object(a.a)({url:"/api/Product/CopyProductSmsConfig",method:"post",data:t})}function o(t){return Object(a.a)({url:"/api/Product/GetProductSmsConfig",method:"post",data:t})}function i(t){return Object(a.a)({url:"/api/Product/SetProductSmsConfig",method:"post",data:t})}function l(t){return Object(a.a)({url:"/api/Product/AddProductSmsConfig",method:"post",data:t})}function u(t){return Object(a.a)({url:"/api/Product/getCXPLSettingBusChannelList",method:"post",data:t})}function s(t){return Object(a.a)({url:"/api/Product/getTransductiveBusChannelList",method:"post",data:t})}function c(t){return Object(a.a)({url:"/api/Product/getDealBusChannelList",method:"post",data:t})}function d(t){return Object(a.a)({url:"/api/Product/addTransductiveBusChannel",method:"post",data:t})}function p(t){return Object(a.a)({url:"/api/Product/addDealBusChannel",method:"post",data:t})}function f(t){return Object(a.a)({url:"/api/Product/addCXPLSettingBusChannel",method:"post",data:t})}function m(t){return Object(a.a)({url:"/api/Product/GetProductDQUrl",method:"post",data:t})}function b(t){return Object(a.a)({url:"/api/Product/UpdateProductDQUrl",method:"post",data:t})}function h(t){return Object(a.a)({url:"/api/Product/getCXYFLevelUpLogList",method:"post",data:t})}function v(t){return Object(a.a)({url:"/api/Product/getCXYFLevelUpLogDetails",method:"post",data:t})}function g(t){return Object(a.a)({url:"/api/Product/getProductOtherSettingDetail",method:"post",data:t})}function y(t){return Object(a.a)({url:"/api/Product/editProductOtherSetting",method:"post",data:t})}function _(t){return Object(a.a)({url:"/api/Product/UpdateProductInviteUrl",method:"post",data:t})}function C(t){return Object(a.a)({url:"/api/Product/UpdateProductInviteImg",method:"post",data:t})}function w(t){return Object(a.a)({url:"/api/Product/DelProductInviteImg",method:"post",data:t})}function x(t){return Object(a.a)({url:"/api/Product/UpdateBusChannelProfitType",method:"post",data:t})}function P(t){return Object(a.a)({url:"/api/Product/UpdateProductExtInviteUrl",method:"post",data:t})}function F(t){return Object(a.a)({url:"/api/Product/GetProductUserMoneyKey",method:"post",data:t})}function S(t){return Object(a.a)({url:"/api/Product/UpdateProductUserMoneyKey",method:"post",data:t})}function L(t){return Object(a.a)({url:"/api/Product/SetProductIsCheckRate",method:"post",data:t})}function k(t){return Object(a.a)({url:"/api/Product/GetProductIsCheckRate",method:"post",data:t})}}}]);