(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7b4a"],{LNyU:function(e,t,a){"use strict";a.r(t);var s=a("QbLZ"),i=a.n(s),n=a("rY9o"),r=a("L2JU"),l=(a("7Qib"),a("X4fA"),a("6Uqi")),o=(a("caUn"),a("YZgg")),u={name:"POSOrderCache",components:{PageTable:l.a,filterBox:o.a},data:function(){return{listQuery:{userId:""},selectData:[],listQuery2:{},table_list:[{label:"交易流水号",width:"120px",name:"jyPosPayOrderId",checked:!0},{label:"商户号",width:"120px",name:"merId",checked:!0},{type:"tel",label:"用户手机号",width:"120px",name:"mobile",checked:!0},{type:"money",label:"交易金额",width:"120px",name:"money",checked:!0},{label:"终端号",width:"120px",name:"terminalid",checked:!0},{label:"银行大商户名",width:"120px",name:"unionPayMerName",checked:!0},{label:"银行大商户ID",width:"120px",name:"unionPayMid",checked:!0},{label:"银行商户终端ID",width:"120px",name:"unionPayTerminalid",checked:!0},{label:"用户id",width:"120px",name:"userID",checked:!0},{label:"用户名称",width:"120px",name:"userName",checked:!0},{type:"date",label:"插入时间",name:"insertDate",width:"120px",checked:!0}],dialogStatus:!1,insertForm:{authCode:"",batchNo:"",cardNo:"",referNo:"",signUrl:"",status:1,respCode:"",settleDate:""},rules2:{cardNo:[{required:!0,message:"请输入银行卡",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"change"}],respCode:[{required:!0,message:"请选择状态码",trigger:"change"}],settleDate:[{required:!0,message:"请选择时间",trigger:"change"}]},statusResult:{list:[],total:0}}},computed:i()({},Object(r.b)(["POSOrderCache"])),mounted:function(){var e=this;this.$nextTick(function(){e.pageLoad()})},methods:{pageLoad:function(){this.sizeChange(10)},currentChange:function(e){this.select_query(e)},sizeChange:function(e){this.listQuery2=this.copy_obj(this.listQuery),this.select_query(1,e)},select_query:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.$store.dispatch("reqUrl_SysData",{reqName:n.O,dataName:"POSOrderCache",data:this.listQuery2})},handleSelectionChange:function(e){this.selectData=e},selectUserId:function(e){this.listQuery.userId=e},getStatusValue:function(e){var t=this;this.$store.dispatch("reqUrl_SysData",{reqName:n.fd,data:{status:e}}).then(function(e){t.statusResult.list=e.rows,t.statusResult.total=e.total}).catch(function(){t.statusResult.list=[],t.statusResult.total=0,t.insertForm.status=1})},closedDialog:function(e){this.$refs[e].resetFields()},btnClickHandle:function(e){switch(e){case"insert":switch(this.selectData.length,this.selectData.length){case 1:this.dialogStatus=!0,this.getStatusValue(1);break;default:this.$message.warning("请选择一条数据")}break;default:this.$message.warning("暂未开启")}},insertDatabase:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var a=t.selectData[0],s=t.insertForm,i={authCode:s.authCode,batchNo:s.batchNo,cardNo:s.cardNo,jyPosPayOrderId:a.jyPosPayOrderId,referNo:s.referNo,respCode:s.respCode,settleDate:1==s.status?s.settleDate:"",signUrl:1==s.status?s.signUrl:"",userId:a.userID};t.$store.dispatch("reqUrl_SysData",{reqName:n.U,data:i}).then(function(e){t.$message.success(e.msg),t.dialogStatus=!1,t.sizeChange()})}})}}},d=a("KHd+"),c=Object(d.a)(u,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"table"},[a("div",{staticClass:"container"},[a("nav",[a("el-row",[a("filterBox",{attrs:{listQuery:e.listQuery},on:{selectUserId:e.selectUserId}}),e._v(" "),a("el-button",{staticClass:"search margin-t-20",attrs:{type:"primary",icon:"search"},on:{click:function(t){e.sizeChange(10)}}},[e._v("查询")])],1)],1),e._v(" "),a("PageTable",{attrs:{tableList:e.table_list,tableData:e.POSOrderCache,noPagination:!0},on:{handleSelectionChange:e.handleSelectionChange,sizeChange:e.sizeChange,currentChange:e.currentChange,btnClickHandle:e.btnClickHandle}}),e._v(" "),a("el-dialog",{attrs:{"close-on-click-modal":!1,"append-to-body":!0,title:"插入数据库",visible:e.dialogStatus,width:"470px"},on:{"update:visible":function(t){e.dialogStatus=t},closed:function(t){e.closedDialog("insertForm")}}},[a("el-form",{ref:"insertForm",attrs:{rules:e.rules2,model:e.insertForm,"label-width":"140px","element-loading-text":"Loading"}},[a("el-form-item",{attrs:{label:"授权码",prop:"authCode"}},[a("el-input",{attrs:{placeholder:"请输入授权码"},model:{value:e.insertForm.authCode,callback:function(t){e.$set(e.insertForm,"authCode","string"==typeof t?t.trim():t)},expression:"insertForm.authCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"批次号",prop:"batchNo"}},[a("el-input",{attrs:{placeholder:"请输入批次号"},model:{value:e.insertForm.batchNo,callback:function(t){e.$set(e.insertForm,"batchNo","string"==typeof t?t.trim():t)},expression:"insertForm.batchNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"银行卡",prop:"cardNo"}},[a("el-input",{attrs:{placeholder:"请输入银行卡"},model:{value:e.insertForm.cardNo,callback:function(t){e.$set(e.insertForm,"cardNo","string"==typeof t?t.trim():t)},expression:"insertForm.cardNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"中心流水号",prop:"referNo"}},[a("el-input",{attrs:{placeholder:"请输入中心流水号"},model:{value:e.insertForm.referNo,callback:function(t){e.$set(e.insertForm,"referNo","string"==typeof t?t.trim():t)},expression:"insertForm.referNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"status",gutter:20}},[a("el-select",{staticClass:"select-w-4",attrs:{placeholder:"请选择"},on:{change:e.getStatusValue},model:{value:e.insertForm.status,callback:function(t){e.$set(e.insertForm,"status",t)},expression:"insertForm.status"}},[a("el-option",{key:"1",attrs:{label:"成功",value:1}}),e._v(" "),a("el-option",{key:"2",attrs:{label:"失败",value:2}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"状态码",prop:"respCode"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.insertForm.respCode,callback:function(t){e.$set(e.insertForm,"respCode",t)},expression:"insertForm.respCode"}},e._l(e.statusResult.list,function(e){return a("el-option",{key:e.id,attrs:{value:e.respCode,label:e.respMsg}})}))],1),e._v(" "),1==e.insertForm.status?a("el-form-item",{attrs:{label:"POS交易签名URL",prop:"signUrl"}},[a("el-input",{attrs:{placeholder:"请输入POS交易签名URL"},model:{value:e.insertForm.signUrl,callback:function(t){e.$set(e.insertForm,"signUrl","string"==typeof t?t.trim():t)},expression:"insertForm.signUrl"}})],1):e._e(),e._v(" "),1==e.insertForm.status?a("el-form-item",{attrs:{label:"清算时间",prop:"settleDate"}},[a("el-date-picker",{attrs:{editable:!1,type:"date","value-format":"yyyy-MM-dd",placeholder:"清算时间"},model:{value:e.insertForm.settleDate,callback:function(t){e.$set(e.insertForm,"settleDate",t)},expression:"insertForm.settleDate"}})],1):e._e()],1),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogStatus=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},nativeOn:{click:function(t){t.preventDefault(),e.insertDatabase("insertForm")}}},[e._v("确 定")])],1)],1)],1)])])},[],!1,null,null,null);c.options.__file="POSOrderCache.vue";t.default=c.exports},RQWr:function(e,t,a){var s=a("snek");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);(0,a("SZ7m").default)("28ef560a",s,!0,{})},"RU/L":function(e,t,a){a("Rqdy");var s=a("WEpk").Object;e.exports=function(e,t,a){return s.defineProperty(e,t,a)}},Rqdy:function(e,t,a){var s=a("Y7ZC");s(s.S+s.F*!a("jmDH"),"Object",{defineProperty:a("2faE").f})},SEkw:function(e,t,a){e.exports={default:a("RU/L"),__esModule:!0}},YEIV:function(e,t,a){"use strict";t.__esModule=!0;var s=function(e){return e&&e.__esModule?e:{default:e}}(a("SEkw"));t.default=function(e,t,a){return t in e?(0,s.default)(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},YZgg:function(e,t,a){"use strict";var s,i=a("QbLZ"),n=a.n(i),r=a("YEIV"),l=a.n(r),o=a("L2JU"),u=a("rY9o"),d=a("X4fA"),c={props:["listQuery","noTitle","sn"],data:function(){return{userList:[],userQuery:{pageNum:1,pageSize:50,productAgentID:"",productID:null,name:"",agentFindType:3,genre:1},userId:"",loading:!1}},watch:(s={userId:function(e){this.$emit("selectUserId",e)}},l()(s,"listQuery.productAgentId",function(e){this.userList=[],this.userId=""}),l()(s,"listQuery.productAgentid",function(e){this.userList=[],this.userId=""}),l()(s,"listQuery.agentFindType",function(e){this.userList=[],this.userId=""}),l()(s,"listQuery.productAgentID",function(e){this.userList=[],this.userId=""}),l()(s,"listQuery.userId",function(e){this.userId=e}),l()(s,"listQuery.userID",function(e){this.userId=e}),l()(s,"userQuery.genre",function(e){this.userQuery.name="",this.userList=[],this.userId=""}),s),computed:n()({},Object(o.b)([""])),mounted:function(){var e=this;this.$nextTick(function(){(e.$route.query.name||e.$route.query.userId)&&(e.userList=[{id:e.$route.query.userId,name:e.$route.query.name}])})},methods:{getUserList:function(e){var t=this,a=JSON.parse(Object(d.b)());this.userQuery.productID=a.id,this.userQuery.name=e,this.listQuery&&(this.userQuery.productAgentID=this.listQuery.productAgentid||this.listQuery.productAgentId||this.listQuery.productAgentID||"",this.userQuery.agentFindType=this.listQuery.agentFindType||3),Object(u.Hd)(this.userQuery).then(function(e){t.userList=e.rows})},getOkUserName:function(e){return e.name+(e.mobile?"-"+e.mobile:"")},remoteMethod:function(e){var t=this;this.loading=!0,this.isNumberic(e)?setTimeout(function(){t.loading=!1,t.getUserList(e)}):this.userList=[]},isNumberic:function(e){return null!=e.match(/[\u4E00-\u9FA5]/g)||(null!=e.match(/[0-9]/g)||void 0)}}},h=(a("oUfR"),a("KHd+")),p=Object(h.a)(c,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"nav-select"},[e.sn?a("div",{staticClass:"nav-select-title select-input-style"},[a("el-select",{staticClass:"handle-select select-w-4 big-small select-date-style",attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.userQuery.genre,callback:function(t){e.$set(e.userQuery,"genre",t)},expression:"userQuery.genre"}},[a("el-option",{attrs:{value:1,label:"商户名或手机号"}},[e._v("商户名或手机号")]),e._v(" "),a("el-option",{attrs:{value:2,label:"终端序列号"}},[e._v("终端序列号")])],1)],1):e.noTitle?e._e():a("div",{staticClass:"nav-select-title"},[e._v("商户名或手机号")]),e._v(" "),a("el-select",{staticClass:"handle-select select-w-8",attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入"+(1==e.userQuery.genre?"商户名或手机号":"终端序列号"),"remote-method":e.remoteMethod,clearable:!0,disabled:!(!e.listQuery||!e.listQuery.disabled)&&e.listQuery.disabled,loading:e.loading},model:{value:e.userId,callback:function(t){e.userId=t},expression:"userId"}},e._l(e.userList,function(t){return a("el-option",{key:t.id,attrs:{value:t.id,label:e.getOkUserName(t)}},[a("span",{staticStyle:{float:"left","font-size":"12px"}},[e._v(e._s(t.name))]),e._v(" "),a("span",{staticStyle:{float:"right","font-size":"12px"}},[a("span",{staticStyle:{color:"#8492a6"}},[e._v(e._s(t.mobile))]),e._v(" "),2==t.status?a("span",{staticClass:"blue"},[e._v("禁用")]):e._e(),e._v(" "),3==t.status?a("span",{staticClass:"tipText"},[e._v("删除")]):e._e()])])}))],1)])},[],!1,null,"ad3c348a",null);p.options.__file="filterBox.vue";t.a=p.exports},aI7T:function(e,t,a){var s=a("vn91");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);(0,a("SZ7m").default)("3ad94f3c",s,!0,{})},caUn:function(e,t,a){"use strict";var s=a("QbLZ"),i=a.n(s),n=a("L2JU"),r=(a("rY9o"),a("X4fA"),{props:["page","timeOption","refund","showday","defaultDate","disType"],data:function(){var e=this;return{flag:2,loading:!1,timeBox:"",regDate:new Date((new Date).setDate((new Date).getDate()-7)),startDate:new Date((new Date).setDate((new Date).getDate()-7)),endDate:new Date,timeValue:0,pickerBeginDateBefore:{disabledDate:function(t){if(e.endDate)return t.getTime()>(new Date).getTime()}},pickerBeginDateAfter:{disabledDate:function(t){var a=e.startDate,s=e.availableDay,i=new Date(new Date(a).setDate(new Date(a).getDate()+s));if(a)return t.getTime()<a||t.getTime()>i||t.getTime()>(new Date).getTime()}}}},watch:{flag:function(e){this.$emit("updateFlag",this.flag,this.startDate,this.endDate)},timeOption:function(e){this.timeValue=e[0].value},defaultDay:function(e){this.resetDate()}},computed:i()({},Object(n.b)([""]),{availableDay:function(){return reqCfg.dateArr&&reqCfg.dateArr[""+this.page]&&reqCfg.dateArr[""+this.page].availableDay?reqCfg.dateArr[""+this.page].availableDay:this.defaultDate&&this.defaultDate.availableDay?this.defaultDate.availableDay:30},defaultDay:function(){return reqCfg.dateArr&&reqCfg.dateArr[""+this.page]&&reqCfg.dateArr[""+this.page].day?reqCfg.dateArr[""+this.page].day:this.defaultDate&&this.defaultDate.day||this.defaultDate&&0===this.defaultDate.day?this.defaultDate.day:7}}),mounted:function(){var e=this;this.$nextTick(function(){e.$route.query.startDate&&(e.startDate=new Date(e.$route.query.startDate)),e.$route.query.endDate&&(e.endDate=new Date(e.$route.query.endDate)),e.$route.query.startDate||e.$route.query.endDate||(e.regDate=e.startDate=new Date((new Date).setDate((new Date).getDate()-e.defaultDay))),e.$route.query.timeValue&&(e.timeValue=e.$route.query.timeValue-0),e.timeOption&&e.timeOption.length&&(e.timeValue=e.timeOption[0].value),e.timeOption&&e.timeOption.length?e.$emit("updateTimeValue",e.timeValue,e.startDate,e.endDate):e.$emit("updateFlag",e.flag,e.startDate,e.endDate)})},methods:{statusChange:function(e){this.startDate=this.regDate,this.endDate=new Date},timeValueChange:function(e){this.timeValue=e,this.startDate=this.regDate,this.endDate=new Date,this.timeOption&&this.timeOption.length?this.$emit("updateTimeValue",this.timeValue,this.startDate,this.endDate):this.$emit("updateFlag",this.flag,this.startDate,this.endDate)},resetDate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.startDate=new Date((new Date).setDate((new Date).getDate()-this.defaultDay)),this.endDate=new Date,e&&e(this.startDate,this.endDate),this.$emit("updateTimeValue",this.timeValu,this.startDate,this.endDate)},startDateChange:function(e){var t=new Date(new Date(e).setDate(new Date(e).getDate()+this.availableDay)),a=new Date(new Date(e).setDate(new Date(e).getDate()+this.defaultDay));this.endDate=t<a.getTime()?t<(new Date).getTime()?t:new Date:a<(new Date).getTime()?a:new Date,this.timeOption&&this.timeOption.length?this.$emit("updateTimeValue",this.timeValue,this.startDate,this.endDate):this.$emit("updateFlag",this.flag,this.startDate,this.endDate)},endDateChange:function(e){this.timeOption&&this.timeOption.length?this.$emit("updateTimeValue",this.timeValue,this.startDate,this.endDate):this.$emit("updateFlag",this.flag,this.startDate,this.endDate)}}}),l=(a("nAPR"),a("KHd+")),o=Object(l.a)(r,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"nav-select"},[e.timeOption&&e.timeOption.length>1?a("div",{staticClass:"nav-select-title select-input-style"},[a("el-select",{staticClass:"handle-select select-w-2 big-small select-date-style",attrs:{slot:"prepend",placeholder:"请选择"},on:{change:e.timeValueChange},slot:"prepend",model:{value:e.timeValue,callback:function(t){e.timeValue=t},expression:"timeValue"}},e._l(e.timeOption,function(e,t){return a("el-option",{key:t,attrs:{label:e.text,value:e.value}})}))],1):e.timeOption&&1==e.timeOption.length?a("div",{staticClass:"nav-select-title select-input-style"},[e._v(e._s(e.timeOption[0].text))]):a("div",{staticClass:"nav-select-title select-input-style"},[a("el-select",{staticClass:"handle-select select-w-2 big-small select-date-style",attrs:{slot:"prepend",placeholder:"请选择"},on:{change:e.statusChange},slot:"prepend",model:{value:e.flag,callback:function(t){e.flag=t},expression:"flag"}},[a("el-option",{attrs:{label:1==e.showday?"订单日期":"订单时间",value:2}}),e._v(" "),a("el-option",{attrs:{label:"清算日",value:1}}),e._v(" "),1==e.refund?a("el-option",{attrs:{label:"退款时间",value:3}}):e._e()],1)],1),e._v(" "),a("el-date-picker",{attrs:{editable:!1,type:"date","picker-options":e.pickerBeginDateBefore,disabled:e.disType||!1},on:{change:e.startDateChange},model:{value:e.startDate,callback:function(t){e.startDate=t},expression:"startDate"}}),e._v(" -\n    "),a("el-date-picker",{attrs:{editable:!1,type:"date","picker-options":e.pickerBeginDateAfter,disabled:e.disType||!1},on:{change:e.endDateChange},model:{value:e.endDate,callback:function(t){e.endDate=t},expression:"endDate"}})],1)])},[],!1,null,"320aab82",null);o.options.__file="timeBox.vue";t.a=o.exports},nAPR:function(e,t,a){"use strict";var s=a("RQWr");a.n(s).a},oUfR:function(e,t,a){"use strict";var s=a("aI7T");a.n(s).a},snek:function(e,t,a){(e.exports=a("I1BE")(!1)).push([e.i,"\n.select-input-style[data-v-320aab82] .el-select .el-input__inner:focus {\r\n  border-color: rgba(0, 0, 0, 0);\n}\n.select-date-style[data-v-320aab82] .el-input__inner {\r\n  background-color: rgba(0, 0, 0, 0);\r\n  border: none;\n}\n.select-date-style[data-v-320aab82] .el-input__inner {\r\n  padding-right: 0px;\r\n  padding-left: 0px;\r\n  color: #909399;\n}\n.select-date-style[data-v-320aab82] .el-select__caret {\r\n  margin-right: -20px !important;\n}\r\n",""])},vn91:function(e,t,a){(e.exports=a("I1BE")(!1)).push([e.i,"\n.select-input-style[data-v-ad3c348a] .el-select .el-input__inner:focus {\r\n  border-color: rgba(0, 0, 0, 0);\n}\n.select-date-style[data-v-ad3c348a] .el-input__inner {\r\n  background-color: rgba(0, 0, 0, 0);\r\n  border: none;\n}\n.select-date-style[data-v-ad3c348a] .el-input__inner {\r\n  padding-right: 0px;\r\n  padding-left: 0px;\r\n  color: #909399;\n}\n.select-date-style[data-v-ad3c348a] .el-select__caret {\r\n  margin-right: -20px !important;\n}\r\n",""])}}]);