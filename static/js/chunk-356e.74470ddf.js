(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-356e"],{Pj3R:function(e,t,a){"use strict";a.r(t);var i=a("QbLZ"),l=a.n(i),n=a("L2JU"),s=a("6Uqi"),r=a("eWaB"),o=a("meRd"),d=a("Yfch"),c=a("7Qib"),u=a("u7w5"),m={name:"feeAuditing",components:{PageTable:s.a,agentLevelBox:r.a,query:o.a},data:function(){return{searchForm:[{type:"agentDropDownList"},{type:"select",text:"审核状态",array:[{text:"全部",value:-1},{text:"待审核",value:0},{text:"审核成功",value:1}],name:"auditType",length:4,show:!0},{type:"time",page:"feeAuditing",array:[{text:"添加时间",value:1},{text:"审核时间",value:2}],show:!0},{type:"searchBtn",text:"查询",name:"searchBtn"}],listQuery:{auditType:0,dateType:1,endDate:"",userId:"",userID:"",productAgentId:"",startDate:""},listQuery2:{},table_list:[{type:"click",label:"代理商名称",width:"100px",name:"agentName",checked:!0},{type:"tel",label:"手机号",name:"agentMobile",checked:!0},{label:"上级代理商",name:"parentAgentName",checked:!0,width:"120px"},{label:"一级代理商名称",name:"topAgentName",checked:!0,width:"120px"},{label:"通道名称",name:"busChannelName",checked:!0,width:"100px"},{type:"stateMuch",label:"审核状态",width:"100px",name:"auditType",stateMuch:{0:"待审核",1:"审核成功"},checked:!0},{type:"date",label:"添加时间",name:"insertDate",checked:!0},{type:"date",label:"审核时间",name:"auditDate",checked:!0},{label:"审核人",name:"auditName",checked:!0,width:"100px"},{type:"popover",label:"说明",name:"content",checked:!0}],levelItem:null,levelVisible:!1,agentLevelData:"",agentInfo:{id:"productAgentId",name:"agentName",mobile:"agentMobile"},selectData:[],formTable:[{label:"储蓄卡费率",name:"fee",company:"万分之"},{label:"储蓄卡大额费率",name:"fee2",company:"万分之"},{label:"信用卡费率",name:"creditFee",company:"万分之"},{label:"信用卡大额费率",name:"creditFee2",company:"万分之"},{label:"T0手续费",name:"serviceFeeT0",company:"元/笔"},{label:"T0大额手续费",name:"bigServiceFeeT0",company:"元/笔"},{label:"T1手续费",name:"serviceFeeT1",company:"元/笔"},{label:"T1大额手续费",name:"bigServiceFeeT1",company:"元/笔"}],feeAuditDetail:{fee:"",fee2:"",creditFee:"",creditFee2:"",serviceFeeT0:"",bigServiceFeeT0:"",serviceFeeT1:"",bigServiceFeeT1:""},addForm:{fee:"",fee2:"",creditFee:"",creditFee2:"",serviceFeeT0:"",bigServiceFeeT0:"",serviceFeeT1:"",bigServiceFeeT1:""},rules2:{fee:[{required:!0,validator:d.A,name:"",trigger:"blur"}],fee2:[{required:!0,validator:d.A,name:"",trigger:"blur"}],creditFee:[{required:!0,validator:d.A,name:"",trigger:"blur"}],creditFee2:[{required:!0,validator:d.A,name:"",trigger:"blur"}],serviceFeeT0:[{required:!0,validator:d.A,name:"",trigger:"blur"}],bigServiceFeeT0:[{required:!0,validator:d.A,name:"",trigger:"blur"}],serviceFeeT1:[{required:!0,validator:d.A,name:"",trigger:"blur"}],bigServiceFeeT1:[{required:!0,validator:d.A,name:"",trigger:"blur"}]},btnType:"",dialog_status:!1,load_info:!1,save_status:!1}},computed:l()({},Object(n.b)(["rate_audit_list","productInfo"])),watch:{productInfo:function(e,t){e.id!=t.id&&t.id&&this.sizeChange(10)}},mounted:function(){this.$nextTick(function(){})},methods:{currentChange:function(e){this.select_query(e)},sizeChange:function(e){this.listQuery2.auditType=this.listQuery.auditType,this.listQuery2.dateType=this.listQuery.findDateType,this.listQuery2.productAgentId=this.listQuery.productAgentId,this.listQuery2.startDate=Object(c.g)(this.listQuery.startDate)+" 00:00:00",this.listQuery2.endDate=Object(c.g)(this.listQuery.endDate)+" 23:59:59",this.select_query(1,e)},select_query:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.listQuery2.pageNum=e||this.rate_audit_list.pageNum,this.listQuery2.pageSize=t||this.rate_audit_list.pageSize,this.$store.dispatch("reqUrl_SysData",{reqName:u.e,dataName:"rate_audit_list",data:this.listQuery2})},handleSelectionChange:function(e){this.selectData=e},changeLevelVisible:function(e,t,a){this.levelVisible=e,2==t&&(this.levelItem={id:a.productAgentId||a.id})},clickData:function(e,t,a){switch(a.name){case"agentName":this.levelVisible=!0,this.agentLevelData=t}},resetForm:function(e){for(var t in this.$refs[e].resetFields(),this.feeAuditDetail)this.feeAuditDetail[t]="",this.addForm[t]=""},save:function(e){var t=this;this.save_status=!0,this.$refs[e].validate(function(e){if(e){var a={};for(var i in t.addForm)a[i]=t.addForm[i]||0;t.$store.dispatch("reqUrl_SysData",{reqName:u.a,data:a}).then(function(e){t.dialog_status=t.save_status=!1,t.select_query()}).catch(function(){t.save_status=!1})}})},getDetail:function(e){var t=this;this.load_info=!0,this.$store.dispatch("reqUrl_SysData",{reqName:u.c,data:{sysRateAuditId:e.id}}).then(function(e){t.load_info=!1;var a=e.data;for(var i in a)switch(i){case"details":for(var l=a[i],n=0;n<l.length;n++)t.addForm[l[n].fieldName]=l[n].data,t.feeAuditDetail[l[n].fieldName]=l[n].isUpdate;break;default:t.feeAuditDetail[i]=a[i],t.addForm[i]=a[i]}}).catch(function(){t.load_info=!1})},btnClickHandle:function(e){switch(this.btnType=e,e){case"check":1==this.selectData.length?0==this.selectData[0].auditType?(this.dialog_status=!0,this.getDetail(this.selectData[0])):this.$message.warning("只有待审核的才能进行审核"):this.$message.warning("请选择一条数据进行审核");break;case"details":1==this.selectData.length?(this.load_info=this.dialog_status=!0,this.getDetail(this.selectData[0])):this.$message.warning("请选择一条数据进行查看");break;default:this.$message.warning("请联系管理员")}}}},g=a("KHd+"),h=Object(g.a)(m,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"table"},[a("div",{staticClass:"container"},[a("query",{attrs:{isQuery:!0,page:"feeAuditing",searchForm:e.searchForm,listQuery:e.listQuery},on:{handleFilter:e.sizeChange}}),e._v(" "),a("PageTable",{attrs:{showSummary:!1,tableList:e.table_list,tableData:e.rate_audit_list},on:{handleSelectionChange:e.handleSelectionChange,sizeChange:e.sizeChange,currentChange:e.currentChange,btnClickHandle:e.btnClickHandle,clickData:e.clickData}}),e._v(" "),a("agentLevelBox",{attrs:{levelVisible:e.levelVisible,agentLevelData:e.agentLevelData,agentInfo:e.agentInfo},on:{changeLevelVisible:e.changeLevelVisible}}),e._v(" "),a("el-dialog",{attrs:{"close-on-click-modal":!1,"append-to-body":!0,visible:e.dialog_status,width:"600px",title:"审核费率"+("details"==e.btnType?"详情":"")},on:{"update:visible":function(t){e.dialog_status=t},closed:function(t){e.resetForm("addForm")}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.load_info,expression:"load_info"}],ref:"addForm",staticClass:"w-100 no-mragin",attrs:{"element-loading-text":"Loading",rules:e.rules2,model:e.addForm,"label-width":"130px",disabled:"details"==e.btnType}},[a("el-form-item",{staticStyle:{"margin-bottom":"0px"},attrs:{label:"通道名称",prop:"busChannelName"}},[a("el-input",{attrs:{disabled:"",placeholder:"请输入通道名称"},model:{value:e.addForm.busChannelName,callback:function(t){e.$set(e.addForm,"busChannelName","string"==typeof t?t.trim():t)},expression:"addForm.busChannelName"}})],1),e._v(" "),a("el-row",{staticStyle:{margin:"0 auto"}},e._l(e.formTable,function(t,i){return a("el-col",{key:i,staticStyle:{"margin-top":"20px"},attrs:{xs:12,sm:12,hidden:1==e.feeAuditDetail[t.name]||""===e.feeAuditDetail[t.name]}},[a("el-form-item",{attrs:{label:t.label,prop:t.name}},[a("el-input",{model:{value:e.addForm[t.name],callback:function(a){e.$set(e.addForm,t.name,"string"==typeof a?a.trim():a)},expression:"addForm[item.name]"}},[a("i",{staticClass:"el-input__icon",attrs:{slot:"suffix"},slot:"suffix"},[e._v(e._s(t.company)+" ")])])],1)],1)})),e._v(" "),!e.feeAuditDetail.originalSysRate||"details"==e.btnType&&1==e.selectData[0].auditType?e._e():a("el-form-item",{staticStyle:{"margin-bottom":"0px"}},[a("div",{staticClass:"work-time"},[e._v("\n              "+e._s(e.feeAuditDetail.originalSysRate)+"\n            ")])])],1),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialog_status=!1}}},[e._v("取 消")]),e._v(" "),"check"==e.btnType?a("el-button",{attrs:{size:"small",type:"primary",loading:e.save_status},on:{click:function(t){e.save("addForm")}}},[e._v("确 定")]):e._e()],1)],1)],1)])])},[],!1,null,null,null);h.options.__file="feeAuditing.vue";t.default=h.exports},"RU/L":function(e,t,a){a("Rqdy");var i=a("WEpk").Object;e.exports=function(e,t,a){return i.defineProperty(e,t,a)}},Rqdy:function(e,t,a){var i=a("Y7ZC");i(i.S+i.F*!a("jmDH"),"Object",{defineProperty:a("2faE").f})},SEkw:function(e,t,a){e.exports={default:a("RU/L"),__esModule:!0}},YEIV:function(e,t,a){"use strict";t.__esModule=!0;var i=function(e){return e&&e.__esModule?e:{default:e}}(a("SEkw"));t.default=function(e,t,a){return t in e?(0,i.default)(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},eWaB:function(e,t,a){"use strict";a("L2JU");var i=a("rY9o"),l=a("X4fA"),n={props:["levelVisible","agentLevelData","agentInfo"],data:function(){return{newLevelVisible:!1,levelList:[],load_level:!1}},computed:{},watch:{levelVisible:function(e){this.newLevelVisible=e,e&&this.getUpAgentList()}},mounted:function(){this.$nextTick(function(){})},methods:{closeDialog:function(){this.newLevelVisible=!1,this.$emit("changeLevelVisible",!1,1)},getUpAgentList:function(){var e=this;this.load_level=!0,Object(i.Dd)({productAgentId:this.agentLevelData[this.agentInfo&&this.agentInfo.id||"id"],productId:JSON.parse(Object(l.b)()).id}).then(function(t){e.levelList=t.rows,e.load_level=!1}).catch(function(t){e.load_level=!1})},setAgentInfo:function(e){this.newLevelVisible=!1,this.$emit("changeLevelVisible",!1,2,e)}}},s=a("KHd+"),r=Object(s.a)(n,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{"close-on-click-modal":!1,"append-to-body":!0,title:e.agentLevelData[e.agentInfo&&e.agentInfo.name||"name"]+"代理商层级",width:"600px",visible:e.newLevelVisible},on:{close:e.closeDialog,"update:visible":function(t){e.newLevelVisible=t}}},[e.levelList&&0!=e.levelList.length?a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.load_level,expression:"load_level"}],staticClass:"text-center"},[e._l(e.levelList,function(t,i){return a("div",{key:i},[a("div",{on:{click:function(a){e.setAgentInfo(t)}}},[a("el-tag",{staticClass:"add-more",attrs:{type:"info"}},[e._v(e._s(i+1)+"-"+e._s(t.productAgentName)+"-"+e._s(t.mobile))])],1),e._v(" "),a("div",{staticStyle:{"font-size":"18px",margin:"5px",color:"#909399"}},[e._v("|")])])}),e._v(" "),a("div",{on:{click:function(t){e.setAgentInfo(e.agentLevelData)}}},[a("el-tag",{staticClass:"add-more"},[e._v(e._s(e.levelList.length+1)+"-"+e._s(e.agentLevelData[e.agentInfo&&e.agentInfo.name||"name"])+"-"+e._s(e.agentLevelData[e.agentInfo&&e.agentInfo.mobile||"mobile"]))])],1)],2):a("div",{staticClass:"text-center blue"},[e._v("暂无上级")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.newLevelVisible=!1}}},[e._v("关 闭")])],1)])],1)},[],!1,null,null,null);r.options.__file="agentLevelBox.vue";t.a=r.exports}}]);